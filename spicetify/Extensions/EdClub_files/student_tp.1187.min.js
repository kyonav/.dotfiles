var student_tp;(self.webpackChunkstudent_tp=self.webpackChunkstudent_tp||[]).push([[839],{59335:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=s.default.createContext(void 0);return{SpaceContext:t,SpaceProvider:a=>{let{children:n}=a;const[o,l]=(0,s.useState)(e.getUserLocale()),c=(0,r.useHistory)();function d(){const t=e.getUserLocale();if(t.id!==e.defaultLocale.id){const e=`/${t.tag}${window.location.pathname.replace(`/${t.tag}`,"")}`;e!==window.location.pathname&&setTimeout((()=>c.replace(e)))}}return(0,s.useEffect)((()=>{d()}),[window.location.pathname]),d(),s.default.createElement(s.Fragment,null,s.default.createElement(i.MatomoTracker,null),s.default.createElement(t.Provider,{value:{locale:o,setLocale:l}},n))}}};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(67294)),r=a(23338),i=a(1506);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}},50751:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Locale",{enumerable:!0,get:function(){return i.default}}),t.t=t.i18n=t.default=t.SpaceProvider=t.SpaceContext=void 0;var s=n(a(54556)),r=n(a(59335)),i=n(a(75082));function n(e){return e&&e.__esModule?e:{default:e}}const o=new s.default,{SpaceContext:l,SpaceProvider:c}=(t.t=o.t,t.i18n=o.i18n,(0,r.default)(o));t.SpaceProvider=c,t.SpaceContext=l;t.default=o},75082:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getCountryCodeFromLocale=u,t.getCurrency=function(e,t){return i.default.countries[u(e)][0]||t||"USD"},t.getLangCodeFromLocale=d,t.getLocale=p,t.getLocaleCodes=c,t.getLocales=h,t.getUserLocale=function(e,t,a){let i="";const n=r.default.detect();i=Array.isArray(n)?n[0]:n;let o=p(i||e||"en_US");if(t)for(let e of a){const a=p((0,s.get)(t,e));if(a){o=a;break}}return o||p(e)};var s=a(96486),r=n(a(16103)),i=n(a(18102));function n(e){return e&&e.__esModule?e:{default:e}}class o{constructor(e,t){var a;this.countryCode=t||u(i.default.primaryDialects[e]),this.id=`${e}${this.countryCode?"_"+this.countryCode:""}`,this.langCode=e,this.langNativeName=i.default.languages[e][0],this.scriptDirection=i.default.rtlScriptDirection.includes(e)?"rtl":"ltr",this.currency=(null===(a=i.default.countries[this.countryCode])||void 0===a?void 0:a[0])||"USD",this.startOfWeek=i.default.startOfWeek[this.alias]||i.default.startOfWeek[this.langCode]||i.default.startOfWeek["en-US"]}get alias(){return this.id.replace("_","-")}get tag(){return l(this)?this.langCode:this.alias}get langName(){return this.langNativeName}get viewName(){let e=this.langNativeName;return l(this)||(e=this.countryName.length>8?`${e} (${this.countryCode})`:`${e} (${this.countryName})`),e}get countryName(){return i.default.countries[this.countryCode]&&i.default.countries[this.countryCode][1]||""}get dir(){return this.scriptDirection}priceSign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Math.abs(e/100),e.toLocaleString(this.alias,{style:"currency",currency:this.currency||"USD"})}}function l(e){return i.default.primaryDialects[e.langCode]===e.id}function c(e){return{langCode:d(e=i.default.primaryDialects[e]||e),countryCode:u(e)}}function d(e){let t=e;const a=e.indexOf("_");return a>0&&(t=e.slice(0,a)),t}function u(e){let t;const a=e.indexOf("_");return a>0&&(t=e.slice(a+1)),t}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)return;const t=h([e.replace("-","_")]);return t.length?t[0]:void 0}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];for(let a of e){const e=c(a);if(!i.default.languages[e.langCode])continue;const s=new o(e.langCode,e.countryCode);t.push(s),t[s.id]=s}return t}t.default=o},16103:(e,t,a)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=new(((s=a(19578))&&s.__esModule?s:{default:s}).default)({languageUtils:{getBestMatchFromCodes:!1}},{order:["cookie","localStorage","path"],lookupQuerystring:"lng",lookupCookie:"user.pref.language",lookupLocalStorage:"user.pref.language",lookupSessionStorage:"user.pref.language",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"]});t.default=r},54556:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(96073)),r=n(a(78122)),i=a(75082);function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,a,s){return new(a||(a=Promise))((function(r,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,o)}l((s=s.apply(e,t||[])).next())}))};t.default=class{constructor(){this.settings={},this.defaultCurrency="USD",this.staticURL="",this.spaceLocales=[],this.contentLocales=[],this._context={},this.t=this.t.bind(this),this.i18n=s.default}init(e){return o(this,void 0,void 0,(function*(){this.settings=e,this.staticURL=e.staticURL.replace(/\/$/,""),this.defaultCurrency=e.localization.defaultCurrency||this.defaultCurrency,this.spaceLocales=(0,i.getLocales)(e.localization.spaceLocales),this.contentLocales=(0,i.getLocales)(e.localization.contentLocales),this._defaultLocale=(0,i.getLocale)(e.localization.defaultLocale||"en_US");const t=this.getUserLocale();return this._t=yield s.default.use(r.default).init({lng:t.id,fallbackLng:[this._defaultLocale.id],load:"currentOnly",ns:e.localization.namespaces,fallbackNS:e.localization.namespaces,backend:{loadPath:`${window.location.origin}/${this.staticURL}/locales/{{lng}}/{{ns}}.json`,crossDomain:!0},debug:!1,nsSeparator:"::",keySeparator:"||",compatibilityJSON:"v2"}),s.default.services.languageUtils.getLanguagePartFromCode=e=>Object.getPrototypeOf(this.i18n.services.languageUtils).getLanguagePartFromCode.call(this.i18n.services.languageUtils,e.replace("_","-")),this}))}getUserLocale(e){let t=(0,i.getUserLocale)(this.settings.localization.defaultLocale||"en_US",e,this.settings.localization.userLocaleKeys||["account.locale","locale"]);return this.spaceLocales[t.id]||(t=this._defaultLocale),t}getLocale(e){if(e)return(0,i.getLocale)(e)}get defaultLocale(){return this._defaultLocale}get context(){return this._context}t(e,t){return this._t(e,t)}}},1506:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MatomoTracker=void 0;var s=a(67294),r=a(23338),i=a(12527);t.MatomoTracker=()=>{const{pathname:e}=(0,r.useLocation)();return(0,s.useEffect)((()=>{(0,i.registerTracker)()}),[]),(0,s.useEffect)((()=>{const e=document.querySelector("title"),t=new MutationObserver((e=>{e.forEach((e=>{var a,s;const{addedNodes:r,removedNodes:n}=e,o=null===(a=n[0])||void 0===a?void 0:a.textContent,l=null===(s=r[0])||void 0===s?void 0:s.textContent;"childList"===e.type&&o!==l&&((0,i.trackPage)(),t.disconnect())}))}));return t.observe(e,{childList:!0}),()=>{t.disconnect()}}),[e]),null}},76986:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var s=a(12527);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},12527:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trackPage=t.trackIframeLevelDocument=t.setTrackingConsent=t.registerTracker=t.isTrackingConsentGiven=t.enableTracker=void 0;var s,r=(s=a(36808))&&s.__esModule?s:{default:s};const i={website:{prod:{targetDomain:"edclub",siteId:"1"},dev:{targetDomain:"edlocal",siteId:"3"}},tpclub:{prod:{targetDomain:"typingclub",siteId:"2"},dev:{targetDomain:"tpclub",siteId:"4"}}},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"website";const t="prod",{targetDomain:a,siteId:s}=i[e][t];window._paq=window._paq||[],window._paq.push(["setDocumentTitle",`${window.location.hostname}/${document.title}`]),window._paq.push(["setCookieDomain",`*.${a}.com`]),window._paq.push(["trackPageView"]),window._paq.push(["enableLinkTracking"]);const r="//analytics.edclub.com/";window._paq.push(["setTrackerUrl",r+"matomo.php"]),window._paq.push(["setSiteId",s]);const n=document.createElement("script");n.async=!0,n.src=r+"matomo.js",document.head.appendChild(n)};t.enableTracker=n;const o=()=>!!JSON.parse(r.default.get("consent")||"{}").performance;t.isTrackingConsentGiven=o;const l=()=>{window._paq.push(["setCookieConsentGiven"])};t.setTrackingConsent=l;t.registerTracker=()=>{o()&&(n(),l())};t.trackPage=()=>{o()&&(window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",document.title]),window._paq.push(["trackPageView"]))};t.trackIframeLevelDocument=e=>{e&&o()&&(window._paq.push(["setCustomUrl",e.location.pathname]),window._paq.push(["setDocumentTitle",e.title]),window._paq.push(["trackPageView"]))}},10662:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDays=function(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a},t.durationToTime=n,t.endOfDay=d,t.endOfDayUTC=function(e){const t=new Date(e);return new Date(t.setUTCHours(23,59,59,999))},t.endOfWeek=function(e,t){t=t||r.default.getUserLocale();const a=l(new Date(e),t);return a.setDate(e.getDate()+7),d(a)},t.formatDate=o,t.formatDateForAPI=function(e){return o(new Date(e),"yyyy-MM-dd HH:mm:ss")},t.formatDateToUTC=function(e){let t=new Date(e);return t=(0,s.default)(t,t.getTimezoneOffset()/60),o(t,"yyyy-MM-dd HH:mm:ss")},t.getWeekDayTitle=function(e,t){t=t||r.default.getUserLocale();const a=l(new Date,t);return new Date(a.setDate(a.getDate()+e)).toLocaleString(t.alias,{weekday:"narrow"})},t.startOfDay=c,t.startOfDayUTC=function(e){const t=new Date(e);return new Date(t.setUTCHours(0,0,0,0))},t.startOfWeek=l;var s=i(a(93713)),r=i(a(50751));function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(!e)return"00:00";const t=Math.floor(e/60),a=Math.floor(e-60*t);return`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function o(e,t,a){if(!e)return"";if(a=a||r.default.getUserLocale().alias,"full.long.medium.short".includes(t))return new Intl.DateTimeFormat(a,{dateStyle:t}).format(e);const s=new RegExp(/(?:)(yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|HH|h|mm|m|ss|s|z)(?:)/g);let i,o=t,l="";for(;i=s.exec(t);){let t,s,r,c,d,u,p;const h=i[1];switch(h){case"yyyy":t="numeric";break;case"yy":t="2-digit";break;case"MMMM":s="long";break;case"MMM":s="short";break;case"MM":s="2-digit";break;case"M":s="numeric";break;case"dd":r="2-digit";break;case"d":r="numeric";break;case"hh":c="2-digit";break;case"HH":c="2-digit",p=!1;break;case"h":c="numeric";break;case"mm":d="2-digit";break;case"m":d="numeric";break;case"ss":u="2-digit";break;case"s":u="numeric"}let f;if("z"===h){const t=e.getTimezoneOffset();f=(t<0?"+":"-")+n(Math.abs(t))}else{f=e.toLocaleString(a,{year:t,month:s,day:r,hour:c,minute:d,second:u,hour12:p}),1!==f.length||"2-digit"!==c&&"2-digit"!==d&&"2-digit"!==u||(f=`0${f}`),"HH"===h&&"24"===f&&(f="00");const i=/[\d]([\sa-zA-z]*)$/g.exec(f);i&&i[1]&&(l=i[1],f=f.replace(l,""),"HH"===h&&(l=""))}o=o.replace(new RegExp(h,"g"),f)}return`${o}${l}`}function l(e,t){t=t||r.default.getUserLocale();const a=new Date(e),s=t.startOfWeek>1?5-t.startOfWeek:t.startOfWeek;return a.setDate(e.getDate()-e.getDay()+s),c(a)}function c(e){const t=new Date(e);return new Date(t.setHours(0,0,0,0))}function d(e){const t=new Date(e);return new Date(t.setHours(23,59,59,999))}},33946:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.admanager=h,t.cleanup_ads=function(){const e=h();if(!e||!e.ads.length)return;e.destroySlots();for(let a of e.ads){var t;null===(t=document.getElementById(a.id))||void 0===t||t.remove()}},t.per_level_ads=f,t.plug_ads=function(e,t,r){if(a.g.cordova)return null;if(approuter.program){const{program:e}=approuter;if(!e.is_basic||e.is_junior)return null}else if(!approuter.profile.programs.length||approuter.profile.programs.filter((e=>!e.is_basic)).length)return null;if(r&&approuter.profile.adlevel<=r)return null;if(!approuter.profile||!approuter.profile.adlevel||!f())return null;const i=h();for(let t of e){let e=t.parent||(0,s.default)(document.body),a=document.getElementById(t.id);a||(a=(0,s.default)("<div>",{id:t.id}),e.append(a)),e.addClass("with-ads").addClass("adlevel-"+approuter.profile.adlevel)}return i.registerSlots(e,t),i};var s=n(a(69606)),r=n(a(23493)),i=a(50751);function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{constructor(){o(this,"inventory",{})}defineSlot(e,t){console.warn("defineSlot not implemented in AdPlatformWrapper")}display(e){console.warn("display not implemented in AdPlatformWrapper")}destroySlots(){console.warn("destroySlots not implemented in AdPlatformWrapper")}getSizeForDiv(e){if(!e)return null;const t=e.offsetWidth,a=e.offsetHeight;if(!t&&!a)return null;const s=Object.keys(this.inventory||{}).map((e=>e.split("x"))).map((e=>e.map((e=>parseInt(e))))).filter((e=>e[0]<=t&&e[1]<=a)).sort(((e,t)=>e[0]*e[1]<t[0]*t[1]?1:-1));return s.length?`${s[0][0]}x${s[0][1]}`:(console.warn("no inventory size found for",e.id,`(${t}x${a})`),null)}}class c extends l{constructor(){if(super(),o(this,"GOOGLE_AD_MANAGER_ID","43370161"),o(this,"inventory",{"300x600":["half-page",[300,600]],"160x600":["wide-skyscraper",[160,600]],"120x600":["skyscraper",[120,600]],"336x280":["large-rectangle",[336,280]],"300x250":["medium-rectangle",[300,250]],"250x250":["square",[250,250]],"200x200":["small-square",[200,200]],"728x90":["smart-banner",[728,90]],"320x50":["smart-banner",[320,50]]}),0===(0,s.default)("#google_ads_script").length){var e=(0,s.default)("<script>",{id:"google_ads_script",type:"text/javascript",src:"//securepubads.g.doubleclick.net/tag/js/gpt.js",async:""});(0,s.default)(document.body).append(e)}window.googletag=window.googletag||{cmd:[]},googletag.cmd.push((()=>googletag.pubads().enableSingleRequest()))}defineSlot(e,t){googletag.cmd.push((()=>{googletag.defineSlot(`/${this.GOOGLE_AD_MANAGER_ID}/${e[0]}`,e[1],t).setTargeting("location",approuter.current_app.app).addService(googletag.pubads())}))}display(e){googletag.cmd.push((function(){googletag.pubads().setRequestNonPersonalizedAds(window.personalized_ads_okay?0:1),googletag.enableServices();for(let t of e)googletag.display(t)}))}destroySlots(){googletag.cmd.push((()=>googletag.destroySlots()))}}class d extends l{constructor(){if(super(),o(this,"typingclub_inventory",{"300x600":"typingclub_300x600_Half_Page","160x600":"typingclub_160x600_Wide_Skyscraper","120x600":"typingclub_120x600_Skyscraper","336x280":"typingclub_new-page-res-2","300x250":"typingclub_LessonPlan2","250x250":"typingclub_250x250_Square","200x200":"typingclub_200x200_Small_Square","728x90":"typingclub_728x90_videoplayer","320x50":"typingclub_728x90_videoplayer"}),o(this,"edclub_inventory",{"300x600":"edclub_300x600_Half_Page","160x600":"edclub_160x600_Wide_Skyscraper","120x600":"edclub_120x600_Skyscraper","336x280":"edclub_336x280_Large_Rectangle","300x250":"edclub_300x250_Medium_Rectangle","250x250":"edclub_250x250_Square","200x200":"edclub_200x200_Small_Square","728x90":"edclub_728x90","970x90":"edclub_970x90_Large_Leaderboard","468x60":"edclub_468x60_Banners","320x50":"edclub_320x50_Mobile_Leaderboard"}),window.freestar)return;const e=location.hostname.endsWith(".edclub.com");this.inventory=e?this.edclub_inventory:this.typingclub_inventory,window.freestar={hitTime:Date.now(),queue:[],config:{},debug:-1!==window.location.search.indexOf("fsdebug")},freestar.config.enabled_slots=[],freestar.initCallback=function(){0===freestar.config.enabled_slots.length?freestar.initCallbackCalled=!1:freestar.newAdSlots(freestar.config.enabled_slots)};var t=document.createElement("script");t.async=!0,t.src=`https://a.pub.network/${e?"edclub":"typingclub2"}-com`+(freestar.debug?"/qa/pubfig.min.js":"/pubfig.min.js"),(0,s.default)(document.body).append(t)}freestar_queue(e){approuter.has_freestar_ads?e():freestar.queue.push(e)}defineSlot(e,t,a){const s="FreeStarVideoAdContainer";if(a){const e=document.getElementById(t);e.id=s;const a=document.createElement("div");a.id="freestar-video-parent";const r=document.createElement("div");r.id="freestar-video-child",a.appendChild(r),e.appendChild(a)}this.freestar_queue((function(){approuter.has_freestar_ads=!0,a?freestar.newVideo(s):freestar.newAdSlots([{placementName:e,slotId:t}])}))}display(e){}destroySlots(){this.freestar_queue((()=>freestar.deleteAdSlots()))}}class u{constructor(e){this.driver=new e,window.addriver=e,this.slots=[],this.registerTimeout=null,this.lastRefresh=null,this.ads=[],this.onRemoveAd=null,approuter.events.on("unload",(()=>this.destroySlots()))}registerSlots(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.ads=e,this.onRemoveAd=t||this.onRemoveAd,this.registerTimeout&&(clearTimeout(this.registerTimeout),this.registerTimeout=null);const a=Date.now();if(this.lastRefresh&&a-this.lastRefresh<2e3)this.registerTimeout=setTimeout((()=>this.registerSlots(e)),2e3-(a-this.lastRefresh));else{this.lastRefresh=a,this.slots.length&&this.destroySlots();for(let t of e){let e=document.getElementById(t.id);if(!e)continue;const a=t.video?"video":this.driver.getSizeForDiv(e);a&&(e=this.defineSlotWithDisableAdLink(e,a)),this.slots.push([e,a])}this.driver.display(this.slots.map((e=>e[0].id))),setTimeout((()=>(0,s.default)(".disable-ads-banner").css("opacity",1)),2e3)}}defineSlotWithDisableAdLink(e,t){const a="video"===t;e.innerHTML="",e.setAttribute("aria-hidden",!0),e.setAttribute("role","presentation"),e.setAttribute("tabindex",-1),e.appendChild(this.get_disable_ads_link());const s=document.createElement("div");s.id=e.id+"-"+Math.random().toString(32).substring(2),s.style.textAlign="right",e.appendChild(s);const r=a?"video":this.driver.inventory[t];return this.driver.defineSlot(r,s.id,a),s}get_disable_ads_link(){var e=(0,s.default)("<div class='disable-ads-banner'><a>"+(0,i.t)("Close")+" <i>&times;</i></a></div>");return e.on("click",(()=>{setTimeout((()=>this.destroySlots()),1e3),this.onRemoveAd&&this.onRemoveAd()})),e[0]}destroySlots(){const e=[];for(let t of this.slots)t[1]&&t[0].parentElement&&e.push(t[0].parentElement);this.driver.destroySlots();for(const t of e)t.innerHTML="";this.slots=[]}onResize(){if(this.registerTimeout)return clearTimeout(this.registerTimeout),void(this.registerTimeout=setTimeout((()=>this.registerSlots(this.ads)),1e3));let e=!1;for(let t of this.slots){if(("video"===t[1]?"video":this.driver.getSizeForDiv(t[1]?t[0].parentElement:t[0]))!==t[1]){e=!0;break}}e&&(this.destroySlots(),this.registerTimeout=setTimeout((()=>this.registerSlots(this.ads)),1e3))}}var p=null;function h(){var e;p||(e=approuter.profile&&approuter.profile.freestar_ok&&"en-US"===navigator.language?d:c,p=new u(e),window.addEventListener("resize",(0,r.default)((()=>p.onResize()),500)));return p}function f(){const e=approuter.lesson,t=approuter.profile;if(e){if(1===t.adlevel&&e.index<7)return!1;if(2===t.adlevel&&e.index<4)return!1;if(3===t.adlevel)return!0}return!0}},75564:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(a(67294)),r=u(a(42644)),i=u(a(69606)),n=u(a(30381));a(15461);u(a(84463));var o=u(a(48583)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(58200)),c=a(56392);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}const p=Object.freeze({Accepted:202,BadRequest:400,Unauthorized:401,NotFound:404,InternalServerError:500,ServiceUnavailable:503,Offline:0}),h="1.1";function f(e,t,n){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(e.status){case p.Unauthorized:return(0,o.default)(c&&c!==window),l.getFreshSession().then((e=>{e?e.is_student?i.default.ajax(c):l.takeMeHome(e):approuter.login_page({next_app:approuter.current_app})})),!0;case p.InternalServerError:try{m(JSON.parse(e.responseText).traceback),console.error(JSON.parse(e.responseText).traceback)}catch(e){}break;case p.ServiceUnavailable:approuter.show_modal(s.default.createElement(r.default,{id:"err503",width:450,show_x:!1,close_outside:!1,esc_close:!1},s.default.createElement("h3",null,"Service Temporarily Unavailable"),s.default.createElement("hr",null),s.default.createElement("p",null,"TypingClub is currently unavailable. Please try again in a few seconds, or try refreshing the page. We apologize for the inconvenience.")));break;case p.NotFound:return approuter.not_found(),!0;case p.Offline:if(a.g.cordova)return approuter.not_found(),!0}}function m(e){var t=(0,i.default)("<div />").css({margin:20,border:"1px solid #bbb",borderRadius:10});(0,i.default)("body").append(t);for(let a of e.split("\n\n")){let e=(0,i.default)("<pre />").html(a).css({borderRadius:0});e.css({border:0,margin:0}),a.search(/\/tpclub\//)>-1&&e.css({background:"#ddd",color:"darkred"}),t.append(e)}t.find("pre").last().css({background:"darkred",color:"white"})}function _(e,t,a){return new Promise((function(s,r){i.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+l.getToken()),!0},url:(0,c.getBaseUrl)()+e,dataType:"json",cache:!1,success:function(e){t&&t(e),s(e)},error:function(e,t,s){a?a(e,t,s):f(e,t,s,this)||r(e)}})}))}function g(e,t,a,s){return new Promise((function(r,n){i.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+l.getToken()),!0},type:"POST",contentType:"application/json",url:(0,c.getBaseUrl)()+e,data:JSON.stringify(t),dataType:"json",success:function(e){a?a(e):r(e)},error:function(e,t,a){f(e,t,a,this)||(s?s(e,t,a):n(e))}})}))}let y={StatusCode:p,get:_,patch:function(e,t,a,s){return new Promise((function(r,n){i.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+l.getToken()),e.setRequestHeader("X-HTTP-Method-Override","PATCH"),!0},type:"POST",contentType:"application/json",url:(0,c.getBaseUrl)()+e,data:JSON.stringify(t),dataType:"json",success:function(e){a?a(e):r(e)},error:function(e,t,i){if(e.status==p.Accepted){const t=e.responseText;a?a(t):r(t)}else s?s(e,t,i):f(e,t,i,this)||n(e)}})}))},post:g,changePassword:async function(e){return approuter.update_profile({password:e})},forgotPassword:function(e,t,a,s){g("/auth/forgot_password/",{domain:e,email:t},a,s)},checkClassCode:function(e,t,a,s){i.default.get("https://s.typingclub.com/auth/check_class_code/?domain="+e+"&code="+t,a,s)},signup2Class:function(e,t,a){e.is_authenticated?g("/api/v1.1/student/signup2class/",e,t,a):g("/auth/signup2class/",e,t,a)},deleteAccount:function(e){var t,a,s,r;t="/api/v1.1/student/",a={password:e},s=function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"success",text:"Your account was succesfully deleted. We are sorry to see you go."}))}catch(e){}l.signUserOut().then(l.redirectAfterLogout)},r=function(e){try{localStorage.setItem("homepage-message",JSON.stringify({type:"warning",text:"Your request could not be completed at this time. For security reasons you have been logged out of your account."}))}catch(e){}l.signUserOut().then(l.redirectAfterLogout)},new Promise((function(e,n){i.default.ajax({beforeSend:function(e,t){return e.setRequestHeader("Authorization","Token "+l.getToken()),!0},type:"DELETE",contentType:"application/json",url:(0,c.getBaseUrl)()+t,data:JSON.stringify(a),dataType:"json",success:function(t){s?s(t):e(t)},error:function(e,t,a){r?r(e,t,a):f(e,t,a,this)||n(e)}})}))},getSubjectStats:function(e,t,a){t||(t=approuter.profile);let s=t.resource_uri+"stats/subject_stats/";a&&(s+="?subject_id="+a),_(s,e)},getStudentBadges:function(e,t){t||(t=approuter.profile),_(t.resource_uri+"badges/",e)},joinProgram:async function(e){return approuter.update_profile((()=>g("/api/v1.1/student/join_program/",{program_id:e})))},joinTeam:async function(e){return approuter.update_profile((()=>g("/api/v1.1/student/join_team/",{team_id:e.id})))},version:h,getRecentActivity:function(e,t){t||(t=approuter.profile),_(t.resource_uri+"recent_activity/",e)},getStudentKPIComparison:function(e,t,a,s,r){const i={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:r.grade,school_id:r.school_id,subject:t,period:a,timezone:r.timezone};g(r.resource_uri+"stats/typing_student_kpi_comparison/",i,s)},getStudentOverallStats:function(e,t,a,s,r){const i={team_id:e?e.team_id:null,program_id:e?e.program_id:null,grade:r.grade,subject:t};a>0&&(i.begin_time=(0,n.default)().locale("en").subtract(a,"days").format("YYYY-MM-DD"),i.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),g(r.resource_uri+"stats/typing_student_kpi_comparison/",i,s)},getTeamprogramOverallStats:function(e,t,a){var s={team_id:e.team_id,grade:e.grade};e.program_id&&(s.program_id=e.program_id),t>0&&(s.begin_time=(0,n.default)().locale("en").subtract(t,"days").format("YYYY-MM-DD"),s.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),g("/api/v1.1/team/"+e.team_id+"/stats/typing_kpi_comparison/",s,a)},getSchoolOverallStats:function(e,t,a,s){var r={subject_id:t};a>0&&(r.begin_time=(0,n.default)().locale("en").subtract(a,"days").format("YYYY-MM-DD"),r.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),g("/api/v1.1/school/"+e+"/stats/typing_kpi_comparison/",r,s)},getStudentProgressStats:function(e,t,a,s,r){var i={period:e,subject:r};s&&(i.begin_time=(0,n.default)().locale("en").subtract(s-1,"days").format("YYYY-MM-DD")),g(a.resource_uri+"stats/typing_student_overview/",i,t)},getTeamprogramProgressStats:function(e,t,a,s){var r={period:e,limit:s||0};a.program_id&&(r.program_id=a.program_id),g("/api/v1.1/team/"+a.team_id+"/stats/typing_overview/",r,t)},getSchoolProgressStats:function(e,t,a,s,r){g("/api/v1.1/school/"+a+"/stats/typing_overview/",{period:e,limit:r||0,subject_id:s},t)},getStudentProgressInClasStats:function(e,t,a,s){var r={period:t,team_id:e.team_id,program_id:e.program_id};g(s.resource_uri+"stats/typing_student_progress/",r,a)},getTeamprogramProgressInClassStats:function(e,t,a){var s={period:t,program_id:e.program_id};g("/api/v1.1/team/"+e.team_id+"/stats/typing_progress/",s,a)},getStudentClassHistogramStats:function(e,t,a,s){var r={metric:t,team_id:e.team_id,program_id:e.program_id};g(s.resource_uri+"stats/typing_student_histogram/",r,a)},getTeamprogramHistogramStats:function(e,t,a){var s={metric:t,program_id:e.program_id};g("/api/v1.1/team/"+e.team_id+"/stats/typing_histogram/",s,a)},getSchoolHistogramStats:function(e,t,a,s){g("/api/v1.1/school/"+e+"/stats/typing_histogram/",{metric:a,subject_id:t},s)},getStudentPunchCardStats:function(e,t,a){const s={};e.length&&(s.begin_time=(0,n.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),s.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),g(a.resource_uri+"stats/typing_student_weekday_practice/",s,t)},getTeamPunchCardStats:function(e,t,a){const s={};e.length&&(s.begin_time=(0,n.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),s.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),a.program_id&&(s.program_id=a.program_id),g("/api/v1.1/team/"+a.team_id+"/stats/typing_weekday_practice/",s,t)},getSchoolPunchCardStats:function(e,t,a,s){const r={subject_id:s};e.length&&(r.begin_time=(0,n.default)().locale("en").subtract(e,"months").format("YYYY-MM-DD"),r.end_time=(0,n.default)().locale("en").format("YYYY-MM-DD")),g("/api/v1.1/school/"+a+"/stats/typing_weekday_practice/",r,t)},getStudentGradeLevelStats:function(e,t,a){const s={team_id:e.team_id,program_id:e.program_id,weeks:4};g(a.resource_uri+"stats/typing_student_weekly_kpi/",s,t)},getStudentCurrentStats:function(e,t,a){g(t.resource_uri+"stats/typing_student_current_stats/",{timezone:t.timezone,weekday_start:a},e)},getStudentQuickStats:function(e,t,a,s){g(t.resource_uri+"stats/typing_student_quick_stats/",{subject_id:a,weekday_start:s,timezone:t.timezone},e)},reactivateUserSubscription:function(e,t){g("/api/v1.1/usersubscription/reactivate/",e,t)},updatePaymentUserSubscription:function(e,t,a){g("/api/v1.1/usersubscription/update-payment/",e,t,a)},getUserPaymentMethod:function(e,t){_("/api/v1.1/usersubscription/payment-method/",e,t)},createUserSubscription:function(e,t,a){g("/api/v1.1/usersubscription/subscribe_plan/",e,t,a)},cancelUserSubscription:function(e,t){g("/api/v1.1/usersubscription/cancel_subscription/",e,t)},getUserSubscription:function(e){_("/api/v1.1/usersubscription/",(function(t){0!=t.objects.length?e(t.objects[0]):e(null)}))},resolveOAauthToken:function(e,t,a,s,r){g("/auth/resolve_oauth_token/",{issuer:e,domain:t,code:a},s,r)},getSchoolAccount:function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i="/auth/get_account/";g(i,{domain:e,forSchoolAccount:s,forClassImport:r},(function(e){~document.location.host.search("localhost")&&l.setDomain(e.domain),t(e)}),a)},getUserToken:function(e,t,a,s,r){g("/auth/get_token/",{domain:e,username:t,password:a},s,r)},getLessonPlanManifest:function(e){_("/lessonplans.json",e)},resetLessonPlan:async function(e){await approuter.update_profile((()=>g("/api/v1.1/student/reset_progress/",{program_id:e})),{is_full_refresh:!0})},removeFromDashboard:async function(e){await approuter.update_profile((()=>g("/api/v1.1/student/remove_from_dashboard/",{program_id:e})),{is_full_refresh:!0})},createCardLicenseSubscription:function(e,t,a){g("/api/v1.1/usersubscription/activate_license_card/",e,t,a)},getJoinableTeams:function(){return _("/api/v1.1/team/?joinable=true&limit=1000")},getTpPlans:function(){return _("/api/v1.1/subscriptionplan/")}};t.default=y},51891:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(a(28787)),r=a(51454),i=a(15239),n=u(a(48583)),o=u(a(23560)),l=u(a(14779)),c=h(a(71327)),d=a(76986);function u(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}function f(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t,a,s,r){var i={};return Object.keys(s).forEach((function(e){i[e]=s[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=a.slice().reverse().reduce((function(a,s){return s(e,t,a)||a}),i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}t.default=e=>{var t,a,u;return t=(0,i.log_catch_promise)("goto_app"),a=(0,i.log_catch_promise)("goto_window_url"),m((u=class extends e{constructor(){super(...arguments),f(this,"root",void 0),f(this,"current_app",void 0),f(this,"is_lesson_to_plan_transition",!1),f(this,"start_time",void 0)}redirect(e){document.location=e}refresh(){return this.apply_env(this.current_app)}unload_current_app(){this.setState({component:null}),c.flush_timeouts(),this.events.fire_event("unload"),this.events.flush("unload"),$(window).unbind("resize"),this.keymanager.flush(),this.resourceAudioManager.flush(),this._attempt=null}async apply_env(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.modals=[],(0,i.addBreadcrumb)({category:"log",level:"info",message:"apply_env: "+e.app}),s.configureScope((function(t){t.setExtra("env",e)})),t||this.unload_current_app(),this.frobAudioContext(),await this.refresh_badges(),await this.refresh_profile(),await this.refresh_debug();let a=e.app;function c(e){return"blank"!==e.type&&!e.is_instructor}(0,n.default)(a,"missing app name");let u=c;const p=await this.resolveAppRoute(a);if(p&&p.authorization&&(u=p.authorization),!u(this.profile,c))return void this.login_page({next_app:e});this.is_lesson_to_plan_transition=!1;let h,f=document.location.search;switch(e.app){case"lesson":await this.refresh_lesson(e.id,e.program_id);try{const e=this.lesson.activity;switch(a=e.app,"typing.classic_typing_app"==a&&"boxed"==e.render_engine&&(a="typing.boxed_typing"),a){case"typing.games.BalloonValley":case"typing.games.MonsterAttack":case"typing.games.TempleBash":case"typing.games.FloatingBubbles":case"typing.games.AppleThieves":(this.profile.is_blind||this.profile.is_low_vision)&&(a="typing.classic_typing_app");break;case"typing.videotyping_app":(this.profile.is_blind||this.profile.is_low_vision)&&(a="typing.classic_typing_app",Object.assign(e,{text1:this.lesson.activity.text,render_engine:"normal",voiceover_words:!0}))}e&&e.is_dynamic&&!e.dynamic_text_generated&&await(0,r.generate_dynamic_lesson)(this.lesson,this.program)}catch(e){throw(0,i.captureException)(e,{extra:{same_app_lesson:this.current_app&&this.lesson.id==this.current_app.id,lesson:JSON.stringify(this.lesson)}}),e}!this.is_rigged&&this.lesson.is_unassigned&&(a="student.lesson_locked");break;case"student.testplan":case"student.lessonplan":case"student.placementtest_app":this.lesson=null,await this.refresh_program(e.id),this.current_app&&"lesson"===this.current_app.app&&(this.is_lesson_to_plan_transition=!0);break;case"student.dashboard_app":this.is_dirty_profile&&(this.profile=null,await this.refresh_profile(),this.is_dirty_profile=!1),f="";break;case"student.scoreboard":this.teamprogram_id=e.id}for(const t of this.url_routes)if(e.app==t.app){h=l.default.compile(t.path)(e);break}!window.cordova&&h&&(this.current_app?document.location.pathname+document.location.search!=h+f&&(history.pushState(e,e.title,h+f),window.ga&&ga("send","pageview",h),(0,d.trackIframeLevelDocument)(document)):history.replaceState(e,e.title,h+f));let m=await this.resolveAppRoute(a);if(!m){let t="shared.frame_app";m=await this.resolveAppRoute(t),e.app=a}(0,n.default)((0,o.default)(m),`not a function ${a}`);const _=await m(e,this.profile);return _?(this.current_app=e,this.start_time=(new Date).getTime(),new Promise((t=>{this.root.hasClass("with-ads")&&(this.root.attr("class",""),this.root.find("#adslot_1").remove(),this.root.find("#adslot_2").remove()),this.setState({component:_},(function(){"lesson"!=e.app&&$('[tabindex="1"]').focus(),t(_)}))}))):void 0}goto_app(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(t,{app:e}),this.apply_env(t)}goto_window_url(e){let t={name:"404",path:e=e||window.document.location.pathname,app:"shared.not_found_app"},a={};for(const s of this.url_routes){const r=s.compiled.exec(e);if(r){t=s,r.shift();for(let e=0;e<r.length;e++){const s=t.keys[e].name,i=t.keys[e].pattern,n=r[e];a[s]="\\d+"===i?Number.parseInt(n,10):n}break}}return this.goto_app(t.app,a)}set_resolveAppRoute(e){this.resolveAppRoute=e}set_url_routes(e){for(let t of e)t.keys=[],t.compiled=(0,l.default)(t.path,t.keys);this.url_routes=e}}).prototype,"goto_app",[t],Object.getOwnPropertyDescriptor(u.prototype,"goto_app"),u.prototype),m(u.prototype,"goto_window_url",[a],Object.getOwnPropertyDescriptor(u.prototype,"goto_window_url"),u.prototype),u}},26510:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAsset=async function(e){const t={};return await n(t,[e]),t[e]},t.fetchAssets=n;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}(a(58200)),r=a(56392);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}async function n(e){const t=new URLSearchParams;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];let l=[].concat(...i);if(l=l.filter(((t,a)=>!e[t]&&l.indexOf(t)===a)),0===l.length)return;t.set("q",l.join(","));const c=new URL("/api/v1.1/lessonasset/",(0,r.getBaseUrl)()||window.location);c.search=t.toString();const d=s.getToken(),u=await fetch(c,{headers:{Authorization:`Token ${d}`}});if(!u.ok)switch(u.status){case 401:return await s.getFreshSession(),n(e,l);case 404:return{};default:throw new Error(`fetchAssets ${u.status}`)}for(const t of(await u.json()).objects)e[t.tag]=t}},4716:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checksum_for_data=function(e){return r.default.hash(o(e))},t.stable_stringify=o;var s,r=(s=a(43056))&&s.__esModule?s:{default:s};const i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},n=Object.keys||function(e){const t=Object.prototype.hasOwnProperty||function(){return!0},a=[];for(const s in e)t.call(e,s)&&a.push(s);return a};function o(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});let a=t.space||"";"number"==typeof a&&(a=Array(a+1).join(" "));const s="boolean"==typeof t.cycles&&t.cycles,r=t.replacer||function(e,t){return t},o=t.cmp&&(l=t.cmp,function(e){return function(t,a){var s={key:t,value:e[t]},r={key:a,value:e[a]};return l(s,r)}});var l;const c=t.visitor||null,d=[];return function e(t,l,u,p){const h=a?"\n"+new Array(p+1).join(a):"",f=a?": ":":";if(u&&u.toJSON&&"function"==typeof u.toJSON&&(u=u.toJSON()),void 0!==(u=r.call(t,l,u))){if("object"!=typeof u||null===u)return c&&c(u),JSON.stringify(u);if(i(u)){const t=[];for(let s=0;s<u.length;s++){const r=e(u,s,u[s],p+1)||JSON.stringify(null);t.push(h+a+r)}return"["+t.join(",")+h+"]"}{if(-1!==d.indexOf(u)){if(s)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}d.push(u);const t=n(u).sort(o&&o(u)),r=[];for(var m=0;m<t.length;m++){const s=t[m];c&&c(s);const i=e(u,s,u[s],p+1);if(!i)continue;const n=JSON.stringify(s)+f+i;r.push(h+a+n)}return d.splice(d.indexOf(u),1),"{"+r.join(",")+h+"}"}}}({"":e},"",e,0)}},43056:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class s{static hash(e,t){const a=Object.assign({msgFormat:"string",outFormat:"hex"},t);if("hex-bytes"===a.msgFormat)e=function(e){const t=e.replace(" ","");return""==t?"":t.match(/.{2}/g).map((e=>String.fromCharCode(parseInt(e,16)))).join("")}(e);else e=function(e){try{return(new TextEncoder).encode(e,"utf-8").reduce(((e,t)=>e+String.fromCharCode(t)),"")}catch(t){return unescape(encodeURIComponent(e))}}(e);const r=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520],n=(e+=String.fromCharCode(128)).length/4+2,o=Math.ceil(n/16),l=new Array(o);for(let t=0;t<o;t++){l[t]=new Array(16);for(let a=0;a<16;a++)l[t][a]=e.charCodeAt(64*t+4*a+0)<<24|e.charCodeAt(64*t+4*a+1)<<16|e.charCodeAt(64*t+4*a+2)<<8|e.charCodeAt(64*t+4*a+3)<<0}l[o-1][14]=8*(e.length-1)/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;e++){const t=new Array(80);for(let a=0;a<16;a++)t[a]=l[e][a];for(let e=16;e<80;e++)t[e]=s.ROTL(t[e-3]^t[e-8]^t[e-14]^t[e-16],1);let a=i[0],n=i[1],o=i[2],c=i[3],d=i[4];for(let e=0;e<80;e++){const i=Math.floor(e/20),l=s.ROTL(a,5)+s.f(i,n,o,c)+d+r[i]+t[e]>>>0;d=c,c=o,o=s.ROTL(n,30)>>>0,n=a,a=l}i[0]=i[0]+a>>>0,i[1]=i[1]+n>>>0,i[2]=i[2]+o>>>0,i[3]=i[3]+c>>>0,i[4]=i[4]+d>>>0}for(let e=0;e<i.length;e++)i[e]=("00000000"+i[e].toString(16)).slice(-8);const c="hex-w"==a.outFormat?" ":"";return i.join(c)}static f(e,t,a,s){switch(e){case 0:return t&a^~t&s;case 1:case 3:return t^a^s;case 2:return t&a^t&s^a&s}}static ROTL(e,t){return e<<t|e>>>32-t}}t.default=s},54153:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new r.default(["start","update_property","show_modal","hide_modal","unload","finish_activity","finish_activity_aux","done","retry","play","pause","tutorial","show_modal_callback","paid_feature","error","play_audio","stop_audio","stop_audio_all","wait_audio","speak","get_lessongamedata","save_lessongamedata"])};var s,r=(s=a(47642))&&s.__esModule?s:{default:s}},62342:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.default.createElement(w,{env:e})};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(67294)),r=g(a(48583)),i=g(a(54153)),n=a(47642),o=g(a(57023)),l=g(a(24340)),c=g(a(3056)),d=g(a(28891)),u=g(a(24508)),p=g(a(53239)),h=g(a(42644)),f=a(71327),m=a(15239),_=g(a(52051));function g(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(y=function(e){return e?a:t})(e)}function v(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=new(a(868).BundleSettings);class w extends s.default.Component{constructor(e){var t;super(e),t=this,v(this,"events",(0,i.default)()),v(this,"timeout",void 0),v(this,"onMessage",(async e=>{(0,r.default)(this.state.url,"message event, but no url");let t=new URL(this.state.url,window.location).origin;if(e.origin!==t)return void console.error("origin mismatch",{actual:e.origin,expected:t});if(!e.data||e.data.type!==n.EVENT_MANAGER_CHANNEL_MESSAGE)return;const a=this.events;this.state.is_loaded&&a.closeChannel(),a.attachPort(e.ports[0]),this.setState({is_loaded:!0});try{for(const e of["profile","lesson","program","assets"])await a.fire_event("update_property",{property:e,value:approuter[e],_id:approuter[e].id});void 0===this.playstate.initialTimestamp&&this.playstate.BEGIN(),await a.fire_event("start",this.props.env)}catch(e){this.error(e)}})),v(this,"onFrame",(e=>{e?e.focus():this.events.closeChannel()})),v(this,"error",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(0,m.addBreadcrumb)({type:"error",category:"error",level:"error",message:e}),t.setState({is_frame:!1,is_loaded:!1,is_error:!0,header_display:""})})),this.state={url:"",is_attempt:!1,is_frame:!0,is_loaded:!1,is_error:!1,header_display:"",header_theme:"",header_compact:!1},this.onFrame=this.onFrame.bind(this),this.error=this.error.bind(this),this.instanceKey=Math.round(1e8*Math.random()).toString(),this.playstate=new _.default,this.setupEvents()}setupEvents(){const e=this.events,t=(e,t)=>new Promise((a=>{this.playstate.END(),approuter.finish_activity(e,(e=>{this.setState({attempt:e}),a(e)}),{duration:this.playstate.time,endpoint:this.state.endpoint,print:t})}));e.on("finish_activity",(e=>t(e))),e.on("finish_activity_aux",(e=>{let{stats:a,print:s}=e;return t(a,s)})),e.on("done",(()=>{this.state.attempt&&this.state.is_result_page?this.state.is_attempt||(this.setState({is_attempt:!0}),(0,f.setTimeout)((()=>this.setState({is_frame:!1,is_loaded:!1})),3e3)):approuter.next_lesson()})),e.on("play",(()=>this.playstate.play())),e.on("pause",(()=>this.playstate.pause())),e.on("tutorial",(()=>this.playstate.tutorial())),e.on("retry",(()=>{this.reloadFrame()})),e.on("paid_feature",(e=>{let{context:t}=e;return new Promise((e=>{approuter.paid_feature((()=>e(!0)),(()=>e(!1)),t)}))})),e.on("show_modal",(t=>{approuter.show_modal((new p.default).deserialize(t,{components:{Modal:h.default},onCallback:t=>e.fire_event("show_modal_callback",t)}))})),e.on("error",(e=>{let{message:t}=e;return this.error(t)})),e.on("play_audio",(async e=>{let{audioFile:t,options:a}=e;return approuter.playAudio(t,a)})),e.on("speak",((e,t)=>{let{text:a,options:s}=e;return s&&s.wordCallback&&(s.wordCallback=function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t[0].postMessage(a)}),approuter.speak(a,s)})),e.on("stop_audio",(e=>{let{tag:t}=e;return approuter.stopAudio(t)})),e.on("stop_audio_all",(()=>approuter.stopAllAudio())),e.on("wait_audio",(e=>{let{tag:t}=e;return approuter.waitAudio(t)})),e.on("get_lessongamedata",(e=>{let{defaultValue:t,options:a}=e;return approuter.getLessonGameData(t,a)})),e.on("save_lessongamedata",(e=>{let{data:t,options:a}=e;return approuter.saveLessonGameData(t,a)}))}componentDidMount(){b.get(this.appLabel,"player").then((e=>{this.setState(e),window.addEventListener("message",this.onMessage),approuter.frameUrl=e.url})).catch((e=>this.error(e.toString())))}componentWillUnmount(){window.removeEventListener("message",this.onMessage),this.events.closeChannel(),approuter.frameUrl=null}reloadFrame(){approuter.debug.reload_frame_cycle?this.setState({is_frame:!1,is_loaded:!1,is_error:!1},(()=>{this.events=(0,i.default)(),(0,f.setTimeout)((()=>this.setState({is_frame:!0})))})):approuter.redo_lesson()}render(){const e=approuter.profile,{is_attempt:t,is_frame:a,is_error:r,is_loaded:i,attempt:n,header_display:p,header_compact:h,header_theme:f}=this.state;return s.default.createElement(u.default,{header:!1,scroll:!1},s.default.createElement(o.default,{profile:e,display:p,theme:f,compact:h}),a&&s.default.createElement("iframe",{src:this.state.url,style:{position:"fixed",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",border:"none",margin:0,padding:0,overflow:"hidden",zIndex:0},ref:this.onFrame}),r&&s.default.createElement(k,null),t&&s.default.createElement(l.default,{resultContent:n&&n.requirements&&c.default,moreDetails:n&&n.requirements&&d.default,contentHeight:300,withExplanation:!0,theme:"typing-results",profile:e,attempt:n}))}get appLabel(){return this.props.env.app}}class k extends s.default.Component{constructor(e){super(e),this.id=`ERXP${(1048576*(1+Math.random())|0).toString(16).toUpperCase()}`}componentDidMount(){(0,m.addBreadcrumb)({message:`app error id ${this.id}`}),(0,m.captureMessage)("app error")}render(){return s.default.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#FAFBFC",color:"#2B3749",font:"normal normal normal 20px/30px Open Sans",zIndex:0}},s.default.createElement("div",{style:{width:478,textAlign:"center"}},s.default.createElement("div",{style:{marginBottom:16,font:"normal normal bold 30px/45px Open Sans"}},"Sorry!"),s.default.createElement("div",{style:{marginBottom:32}},"The lesson has failed to run properly. You may continue to the next lesson. You can also contact support for help with reference id ",s.default.createElement("code",{style:{background:"#2B3749",color:"white",display:"inline-block",padding:"0 5px",borderRadius:8}},this.id),"."),s.default.createElement("button",{style:{background:"#2B3749",borderRadius:30,padding:"8px 32px",color:"white",font:"normal normal normal 16px/25px Lato"},onClick:()=>approuter.next_lesson()},"Skip to the next lesson")))}}},868:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BundleSettings=void 0,t.isObject=n,t.isPublic=l,t.mergeDeep=o;var s;(s=a(48583))&&s.__esModule,a(23340);function r(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const i=["authoring","demo","stxdev"];function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}function o(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];if(!a.length)return e;const r=a.shift();if(n(e)&&n(r))for(const t in r)n(r[t])?(e[t]||Object.assign(e,{[t]:{}}),o(e[t],r[t])):Object.assign(e,{[t]:r[t]});return o(e,...a)}function l(){return!i.includes(document.location.hostname.split(/\./)[0])}function c(e,t,a,s,r){const i=[];return i.push(e||window.location.protocol,"//",t,".",a),r&&i.push("/",r),i.join("")}t.BundleSettings=class{constructor(){r(this,"index",{}),r(this,"_init_promise",void 0),r(this,"defaultPlayerSettings",{app:null,apps:null,header_display:"",header_theme:"",header_compact:!1,endpoint:"",is_result_page:!0}),r(this,"defaultEditorSettings",{lessonType:{name:"App",description:"App",image:null,template:{activity:{app:null},name:"App lesson",description:"",is_game:!1,is_hidden:!1,is_test:!1,key:"e-cmn cmn-dynamic",lesson_type:"app",objective_completion:!1,score:1e3}},lessonTypes:null}),this._init_promise=this.refreshIndex()}async refreshIndex(){const e=async(e,t,a)=>{const s=await fetch(e);if(!s.ok)return!1;for(const e of await s.json())e.domain=a,t[[e.app,e.app_type]]=e,this.fromManifest(e);return!0};this.index={},await e("https://index.edclub.app/apps-manifest.json",this.index,"edclub.app"),l()||await e("https://index.apps.edclub.dev/apps-manifest.json",this.index,"apps.edclub.dev")}async getLocalDev(e,t){const a=new URL("http://localhost");let s,r;a.port="player"===t?3e3:3001;const i=new URL("manifest.json",a);try{s=await fetch(i)}catch(e){return!1}if(!s.ok)return!1;try{r=await s.json()}catch(e){throw`malformed manifest at ${i}`}const n={manifest:r,app_type:t};return n.manifest.url=a.toString(),this.fromManifest(n),!(e&&!n.manifest.apps.includes(e))&&(n.app=e,n)}async get(e,t){let a;await this._init_promise;let s=!0;if(l()||(a=await this.getLocalDev(e,t)),s=!a,a||(a=this.index[[e,t]]),!a)return console.warn("missing manifest",e,t),{};if(s&&(!a.manifest||!l())){const e=await async function(e,t,a){const s=c(e,a,t,0,"manifest.json"),r=await fetch(s);if(!r.ok)return!1;try{return await r.json()}catch(e){return console.warn("malformed manifest",s,e),!1}}("https:",a.domain,a.id);if(!e)return{};a.manifest=e,this.fromManifest(a)}return a.manifest}fromManifest(e){let t;e.manifest&&(t="player"===e.app_type?this.defaultPlayerSettings:this.defaultEditorSettings,e.manifest=o({},t,e.manifest),e.manifest.url||(e.manifest.url=c("https:",e.id,e.domain)),"player"==e.app_type?this.fromPlayerManifest(e):this.fromEditorManifest(e))}fromPlayerManifest(e){const t=e.manifest;t.apps||(t.apps=[]),t.app&&(t.apps.push(t.app),delete t.app)}fromEditorManifest(e){const t=e.manifest;if("editor"!==e.app_type)return;const a=new Set;t.lessonTypes||(t.lessonTypes=[]),t.lessonType&&(t.lessonTypes.push(t.lessonType),delete t.lessonType);const s=t.lessonTypes;if(s.length>0)for(let r=0;r<s.length;r++){s[r]=o({},this.defaultEditorSettings.lessonType,s[r]);const i=s[r].template.activity;i?i.app||(i.app=e.app):s[r].template.activity={app:e.app},a.add(i.app),s[r].image=new URL(s[r].image||"app-image.png",t.url).toString()}t.apps=Array.from(a)}async appLessonTypes(){const e=[];for(const t of Object.values(this.index))"editor"===t.app_type&&e.unshift(...t.manifest.lessonTypes);if(!l()){const t=await this.getLocalDev(null,"editor");t&&e.unshift(...t.manifest.lessonTypes)}return e}}},12558:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s},i=a(15239);const n={position:"absolute",width:0,height:0,border:0};r.default.Component;r.default.Component;class o extends r.default.Component{constructor(e){super(e),this.onMessage=this.onMessage.bind(this),this.urls=["https://foo.apps.typingclub.com/test.html"],this.urlcheck=new Set,this.state={is_frames:!0}}onMessage(e){this.urlcheck.add(e.data)}componentDidMount(){window.addEventListener("message",this.onMessage),this.waitForUrls=setTimeout((()=>{this.setState({is_frames:!1},(()=>{let e=!1;for(const t of this.urls)this.urlcheck.has(t)||(e=!0,(0,i.addBreadcrumb)({message:`failed to load ${t}`}));e&&(0,i.captureMessage)("failed to load iframe")}))}),5e3)}componentWillUnmount(){window.removeEventListener("message",this.onMessage),clearTimeout(this.waitForUrls)}render(){return this.state.is_frames?this.urls.map(((e,t)=>r.default.createElement("iframe",{src:e,style:n,key:t}))):null}}const l=o;t.default=l},23340:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageBucket=void 0;t.LocalStorageBucket=class{constructor(e){this.bucket=e}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=localStorage.getItem(this.bucket);if(null===a)return t;const s=JSON.parse(a)[e];return void 0===s?t:s}save(e,t){const a=localStorage.getItem(this.bucket);let s={};null!==a&&(s=JSON.parse(a)),s[e]=t,localStorage.setItem(this.bucket,JSON.stringify(s))}assign(e,t){const a=this.get(e,{});return Object.assign(a,t),this.save(e,a),a}getAllKeys(){const e=localStorage.getItem(this.bucket);if(null===e)return[];const t=JSON.parse(e);return Object.keys(t)}deleteAll(){localStorage.removeItem(this.bucket)}}},53239:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s};function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=class{constructor(){this.callbacks={},this.counter=0}serialize(e){return JSON.stringify(e,((e,t)=>"type"===e&&"function"==typeof t?t.name:"function"==typeof t?this.addCallback(t):["_owner","_store","ref","key"].includes(e)?void 0:t))}deserialize(e,t){if("string"==typeof e&&(e=JSON.parse(e)),e instanceof Object)return this.deserializeElement(e,t);throw new Error("Deserialization error: incorrect data type")}deserializeElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,{components:s={},reviver:i,onCallback:o}=t;if("object"!=typeof e)return e;if(null===e)return e;if(e instanceof Array)return e.map(((e,a)=>this.deserializeElement(e,t,a)));let{type:l,props:c}=e;for(const[e,t]of Object.entries(c))void 0!==t.__callback__&&(c[e]=e=>o(t.__callback__));if("string"!=typeof l)throw new Error("Deserialization error: element type must be string");return l=s[l]||l.toLowerCase(),c.children&&(c=n(n({},c),{},{children:this.deserializeElement(c.children,t)})),i&&({type:l,props:c,key:a,components:s}=i(l,c,a,s)),r.default.createElement(l,n(n({},c),{},{key:a}))}addCallback(e){const t=this.counter;return this.counter++,this.callbacks[t]=e,{__callback__:t}}call(e){this.callbacks[e]()}}},25318:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t){const a=approuter.lesson.activity.app,r={"typing.games.BalloonValley":async()=>await p("BalloonValley"),"typing.games.MonsterAttack":async()=>await p("MonsterAttack"),"typing.games.TempleBash":async()=>await p("TempleBash"),"typing.games.FloatingBubbles":async()=>await p("FloatingBubbles"),"typing.games.AppleThieves":async()=>await p("AppleThieves")},i=await r[a]();let n=await i(e,t);return s.default.createElement(h,{component:n})};var s=d(a(67294)),r=d(a(24508)),i=d(a(57023)),n=d(a(24340)),o=a(33946),l=d(a(28891)),c=d(a(3056));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=async e=>(await Promise.all([a.e(736),a.e(426),a.e(903)]).then(a.bind(a,10066))).default[e];class h extends s.default.Component{constructor(){super(...arguments),u(this,"state",{attempt:null})}componentDidMount(){approuter.done=()=>{(0,o.cleanup_ads)(),this.setState({attempt:approuter._attempt}),setTimeout((()=>$("#game").hide()),1e3)}}render(){const{attempt:e}=this.state,{lesson:t,profile:a}=approuter,o=t.activity.app.toUpperCase().split(".")[2];return s.default.createElement("div",null,s.default.createElement(r.default,{styles:["TPGAME","GAME_"+o],key:"game"+o,header:!1,scroll:!1},e?null:this.props.component,s.default.createElement(i.default,{name:"",profile:a,display:"game"}),e&&s.default.createElement(n.default,{resultContent:e&&e.requirements&&c.default,moreDetails:e&&e.requirements&&l.default,contentHeight:300,withExplanation:!0,theme:"typing-results",profile:a,attempt:e})))}}},74872:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _api=_interopRequireDefault(__webpack_require__(75564)),_package=__webpack_require__(4147),_incident=__webpack_require__(15239),_baseurl=__webpack_require__(56392);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,a){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const Debug=superclass=>class extends superclass{constructor(){super(...arguments),_defineProperty(this,"debug",{})}async refresh_debug(){try{let cacheKey=Math.round(1e8*Math.random());const url=new URL("/api/v1.1/student/debug/",(0,_baseurl.getBaseUrl)()||window.location);url.searchParams.set("t",cacheKey);const response=await fetch(url.toString());if(!response.ok)return;const debug=await response.json();if(debug.version!==_package.version)return void(this.debug={});this.debug=debug,debug&&eval(debug.inject)}catch(e){(0,_incident.captureException)(e)}}};var _default=exports.default=Debug},53566:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FakeEphemeraManager=void 0;var s=a(23340),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(58200)),i=a(56392);function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{constructor(e){o(this,"bucket",new s.LocalStorageBucket("activity-ephemera")),o(this,"inMemory",{}),o(this,"inStorageTimer",{}),o(this,"inBackendTimer",{}),o(this,"inStorageDelay",800),o(this,"inBackendDelay",1500),o(this,"inStorageLiveDelay",72e5),this.approuter=e}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=this.approuter.lesson.id;let s=!1,r=null;switch(t.scope){case"activity":s=!0,r=this.approuter.lesson.activity.app;break;case"program":s=!0}const i=await this.getRecord(a,s,r);return i?i.data:e}async save(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=this.approuter.lesson.id,s={timestamp:Date.now(),lesson_id:a,data:e,game_bound:!1,tag:null};switch(t.scope){case"activity":s.game_bound=!0,s.tag=this.approuter.lesson.activity.app;break;case"program":s.game_bound=!0}return t.checkpoint?this.saveRecordCheckpoint(s):this.saveRecord(s)}recordKey(e){const t=[];return t.push(e.lesson_id),e.game_bound?t.push("1"):t.push("0"),e.tag&&t.push(e.tag),t.join("_")}async getRecord(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=this.recordKey({lesson_id:e,game_bound:t,tag:a}),r=this.inMemory[s];if(r)return r;const i=this.bucket.get(s);if(i&&(this.inMemory[s]=i,i.timestamp>Date.now()-this.inStorageLiveDelay))return i;const n=await this.getLessonGameData(e,t,a);if(n){let e;return e=i&&i.timestamp?n.timestamp?i.timestamp>n.timestamp?i:n:i:n,this.inMemory[s]=e,this.bucket.save(s,e),n}}saveRecord(e){const t=this.recordKey(e);function a(e,a,s,r){clearTimeout(a[t]),a[t]=setTimeout(r,s)}this.inMemory[t]=e,a(0,this.inStorageTimer,this.inStorageDelay,(()=>this.bucket.save(t,e))),a(0,this.inBackendTimer,this.inBackendDelay,(()=>this.saveLessonGameData(e)))}async saveRecordCheckpoint(e,t){const a=this.recordKey(e);this.inMemory[a]=e,this.bucket.save(a,e),await this.saveLessonGameData(e)}async getLessonGameData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=new URL(`/api/v1.1/lessongamedata/${e}/`,(0,i.getBaseUrl)()||window.location),n=s.searchParams;t&&n.set("game_bound","true"),a&&n.set("tag",a);const o=r.getToken(),l=await fetch(s,{headers:{Authorization:`Token ${o}`}});if(!l.ok)switch(l.status){case 401:return await r.getFreshSession(),this.getLessonGameData(e);case 404:return null;default:throw new Error(`getLessonGameData ${l.status}`)}return await l.json()}async saveLessonGameData(e){const t=new URL("/api/v1.1/lessongamedata/",(0,i.getBaseUrl)()||window.location),a=r.getToken(),s=await fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:`Token ${a}`},body:JSON.stringify(e)});if(!s.ok){if(401===s.status)return await r.getFreshSession(),this.saveLessonGameData(e);throw new Error(`saveLessonGameData ${s.status}`)}}dropEphemera(){this.bucket.deleteAll(),this.inMemory={}}}t.FakeEphemeraManager=class{constructor(){o(this,"debounce",500),o(this,"timer",void 0),o(this,"bucket",new s.LocalStorageBucket("activity-ephemera"))}keyForScope(e){switch(e){case"program":return"program";case"activity":return"activity";default:return"default"}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.bucket.get(this.keyForScope(t.scope),e)}save(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=this.keyForScope(t.scope);t.checkpoint?this.bucket.save(a,e):(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.bucket.save(a,e)}),this.debounce))}};t.default=e=>class extends e{constructor(){super(...arguments),o(this,"ephemeraManager",new l(this)),o(this,"getLessonGameData",((e,t)=>this.ephemeraManager.get(e,t))),o(this,"saveLessonGameData",((e,t)=>this.ephemeraManager.save(e,t)))}}},65477:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppRouter=void 0,t.start=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;function n(e){window.approuter=e,e.set_resolveAppRoute(t),e.set_url_routes(a),s&&s(e),window.dispatchEvent(new CustomEvent("edload",{}))}return new Promise((function(t){i.default.render(r.default.createElement(N,{root:e,onMount:n}),e,t)}))};var s=O(a(69606)),r=O(a(67294)),i=O(a(73935)),n=O(a(47642)),o=a(17858),l=O(a(24040)),c=O(a(38452)),d=a(16436),u=O(a(90699)),p=O(a(52870)),h=O(a(65973)),f=O(a(51891)),m=O(a(85438)),_=O(a(15101)),g=O(a(95446)),y=O(a(4803)),v=O(a(81810)),b=O(a(52319)),w=O(a(12558)),k=O(a(74872)),x=O(a(58301)),E=O(a(53566)),S=O(a(4922)),j=a(76986);function O(e){return e&&e.__esModule?e:{default:e}}function C(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends((0,d.constructClass)(r.default.Component,u.default,p.default,h.default,f.default,m.default,_.default,v.default,b.default,g.default,y.default,k.default,x.default,E.default)){constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),C(this,"events",new n.default(["unload","show_modal","hide_modal","logout","play_started"])),C(this,"audio_player",void 0),(0,d.bindAll)(this),this.root=(0,s.default)(this.props.root),this.state={}}componentDidMount(){this.register(),this.props.onMount(this)}render(){return this.state.component?this.profile&&1&this.profile.crufty?r.default.createElement("div",null,this.state.component,r.default.createElement(w.default,null)):this.state.component:r.default.createElement("div",{className:"boxLoading boxLoading-dark"})}register(){this.audio_player=new l.default,this.keymanager.register((e=>{if(e.keyCode===c.default.escape&&approuter.modals.length){const e=approuter.modals[approuter.modals.length-1];return e.props.esc_close&&this.hide_modal(e.props.id),!0}}),-1),(0,o.registerApprouterEventBus)(this.events),window.addEventListener("popstate",(e=>{let t=e.state;if(t&&t.app)return this.apply_env(t)})),this.registerTryLesson(),this.events.on("logout",(()=>this.ephemeraManager.dropEphemera())),this.videoSettings=new S.default,this.videoSettings.load().catch((e=>console.warn("error loading player settings",e))),(0,j.registerTracker)()}}t.AppRouter=N},15101:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(3317))&&s.__esModule?s:{default:s};function i(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>class extends e{constructor(){super(...arguments),i(this,"keymanager",new r.default({sys:0,low:50,normal:100,high:500,max:1e3},100))}}},52870:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(82729))&&s.__esModule?s:{default:s};function i(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>class extends e{constructor(){super(...arguments),i(this,"modals",[])}show_modal(e){this.modals.push(e),this.events.fire_event("show_modal",e)}hide_modal(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=(0,r.default)(this.modals,(t=>t.props.id==e))[0];!t&&a&&a.props.onClose&&a.props.onClose(),this.events.fire_event("hide_modal",e)}}},95446:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(75564)),r=a(264),i=l(a(7454)),n=l(a(10358)),o=a(26510);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>class extends e{constructor(){super(...arguments),c(this,"profile",void 0),c(this,"program",void 0),c(this,"lesson",void 0),c(this,"last_lesson",void 0),c(this,"game",void 0),c(this,"_badges",void 0),c(this,"assets",{})}async refresh_program(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!t;if(!this.program||e!==this.program.id){let t;const o=this.profile.programs.find((t=>t.id==e));if(!o)return this.not_found();const l=`/api/v${s.default.version}/program2/${e}/`;t=await s.default.get(l+(o.is_edclub?"?edclub=true":""));const c=this.program=(0,r.wrap)(t,i.default.prototype);for(let e=0;e<c.lessons.length;e++)c.lessons[e]=(0,r.wrap)(c.lessons[e],n.default.prototype);this.lesson=null,a=!0,c.is_basic=!o.is_adfree&&o.is_basic,await this.refresh_assets()}t&&"test"===this.program.program_type&&(a=!0),a&&(this.guessTeam(),await this.refresh_game())}async refresh_game(){this.game=await s.default.get(`/api/v${s.default.version}/program2/${Math.abs(this.program.id)}/game/`),this.program.merge_progress(this.game,this.team_program,this.team)}async refresh_lesson(e,t){if(!this.lesson||e!==this.lesson.id){if(await this.refresh_program(t,!0),this.lesson=this.program.lessons.find((t=>t.id===e)),!this.lesson)return this.not_found();this.last_lesson=this.lesson,await this.refresh_assets()}this.guessTeam()}async refresh_badges(){if(!this._badges){const e=await s.default.get(`/api/v${s.default.version}/badge/`),t={};e.objects.forEach((function(e){t[e.resource_uri]=e})),this._badges=t}}async refresh_assets(){const e=this.program,t=this.lesson;t&&(t.assets||=[],"student.videoplayer"!==t.activity.app||t.assets.includes(t.activity.video_id)||t.assets.push(t.activity.video_id)),e.assets||=[],e.background_video&&!e.assets.includes(e.background_video)&&e.assets.push(e.background_video),await(0,o.fetchAssets)(this.assets,e.assets,t?t.assets:[])}}},85438:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}(a(58200));a(264);function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}t.default=e=>class extends e{next_lesson(){if(!this.lesson)return;const e=this.lesson.nextLessonId();if(!e)return this.exit_lesson();this.goto_app("lesson",{id:e,program_id:this.program.id})}redo_lesson(){if(!this.lesson)throw"no lesson";this.apply_env({app:"lesson",id:this.lesson.id,program_id:this.program.id,is_redo:!0})}exit_lesson(){if(!this.program)return this.dashboard();this.lesson_plan()}logout(){s.signUserOut().then(s.redirectAfterLogout)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&t.target&&(t={}),this.goto_app(e,t)}edit_profile(e){this.goto("student.profile.profiledetails_app",e)}license_key_app(e){this.goto("student.profile.license_app",e)}edit_password(e){this.goto("student.profile.changepassword_app",e)}student_plans(e){this.goto("student.profile.plans_app",e)}student_billing(e){this.goto("student.profile.billing_app",e)}delete_account(e){this.goto("student.profile.deleteaccount_app",e)}badges_page(e){this.goto("student.badge_app",e)}stats_page(e){this.goto("student.stats_app",e)}catalog_page(e){this.goto("student.catalog_app",e)}more_tests(e){this.goto("student.more_tests",e)}login_page(e){this.goto("shared.login_app",e)}signup_page(e){this.goto("shared.signup_app",e)}dashboard(){this.goto_app("student.dashboard_app")}not_found(){this.goto_app("shared.not_found_app")}lesson_plan(e){let t="student.lessonplan";!e&&this.program&&(e=this.program.id,"test"==this.program.program_type&&(t="student.testplan")),e&&this.goto_app(t,{id:e})}has_scoreboard(){return!this.profile.block_share_grades&&(this.program&&this.team_program&&this.team_program.scoreboard||"student.scoreboard"==this.current_app.app)}is_leaderboard(){return"student.scoreboard"==this.current_app.app?"top"==this.current_app.share_grades:this.program&&"top"==this.team_program.share_grades}scoreboard(){"student.scoreboard"==this.current_app.app?this.refresh():this.program&&this.goto_app("student.scoreboard",{id:this.team_program.id})}}},52319:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(45112);t.default=e=>class extends e{paid_feature(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,s.LaunchStudentPlansModal)(e,t,a)}}},52051:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Swait=t.Splay=t.Spause=t.Sintro=t.Shelp=void 0;var s,r=(s=a(48583))&&s.__esModule?s:{default:s};function i(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n=t.Swait=0,o=t.Sintro=1,l=t.Splay=2,c=t.Spause=3,d=t.Shelp=4;t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>(new Date).getTime(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,"state",n),i(this,"pauseCount",0),i(this,"time",0),i(this,"initialTimestamp",void 0),i(this,"lastTimestamp",void 0),i(this,"maxPause",void 0),i(this,"onStateChange",void 0),i(this,"onStateChangeAux",void 0),this.timeFunction=e,this.maxPause=t}beginTime(){this.lastTimestamp=this.timeFunction()}endTime(){this.time+=this.timeFunction()-this.lastTimestamp}setState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.state=e,this.onStateChange&&this.onStateChange(e),t&&this.onStateChangeAux&&this.onStateChangeAux(e)}tutorial(){switch(this.state){case n:this.setState(o),this.beginTime();break;case o:this.setState(n),this.endTime();break;case l:this.setState(d),this.endTime();break;case c:this.setState(d);break;case d:this.setState(l),this.beginTime()}}play(){switch(this.state){case n:case d:case c:this.setState(l),this.beginTime();break;case o:this.setState(l)}}pause(){switch(this.state){case n:case o:case d:break;case l:if(this.maxPause&&this.pauseCount>this.maxPause)throw"no more pause";this.pauseCount++,this.setState(c),this.endTime();break;case c:this.setState(l),this.beginTime()}}BEGIN(){this.state=n,this.pauseCount=0,this.time=0,this.initialTimestamp=this.timeFunction()}END(){switch(this.state){case n:(0,r.default)(0===this.time),this.time=this.timeFunction()-this.initialTimestamp;break;case o:case l:this.endTime()}}}},4803:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=m(a(21294)),r=m(a(48583)),i=f(a(58200)),n=m(a(75564)),o=m(a(55586)),l=(f(a(71327)),a(264)),c=a(15239),d=m(a(38400)),u=m(a(30381)),p=f(a(50751));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}function m(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>class extends e{constructor(){super(...arguments),_(this,"profile",void 0)}async refresh_profile(e){if(this.profile&&!e)return this.profile;if(!i.isLoggedIn())return this.profile=new s.default,this.profile;const t=await n.default.get("/api/v"+n.default.version+"/student/me/"),a=(0,l.wrap)(t,s.default.prototype);a.teams=a.teams.map((e=>(0,l.wrap)(e,d.default.prototype).init()));let r=a.locale.split("_")[0];"zh"===r&&(r="zh-cn"),u.default.locale(r),this.profile=a;const o=p.default.getLocale(a.locale);return o.id!==p.default.getUserLocale().id&&await p.i18n.changeLanguage(o.id),document.body.classList.contains("authoring-view")||("rtl"===o.dir?document.body.classList.add("rtl-body"):document.body.classList.remove("rtl-body")),(0,c.profile_changed)(a),a}async update_profile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).is_full_refresh||!1;let a;return await this.materialize_profile(),e&&("object"==typeof e?a=await n.default.patch(`/api/v${n.default.version}/student/${this.profile.id}/`,e):"function"==typeof e?a=await e():(0,r.default)(!1,`don't know what to do with ${e}`)),e.locale||await this.refresh_profile(!0),t&&await this.refresh(),a}async materialize_profile(){if(!this.profile.is_template)return;const e=await n.default.post(`/api/v${n.default.version}/student/materialize_template_user/`,{timezone:o.default.determine().name()});await i.signUserIn(e.login_token);const t=await this.refresh_profile();{let e=document.createElement("img");e.src="https://s.typingclub.com/marketing/convert?env=tp&user_id="+this.profile.id,e.width=0,e.height=0,document.body.appendChild(e)}return t}}},81810:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(28787)),r=o(a(75564)),i=a(264),n=o(a(64489));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function c(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){return new Promise((t=>setTimeout(t,e)))}t.default=e=>class extends e{constructor(){super(...arguments),c(this,"is_dirty_profile",void 0)}async finish_activity(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.is_rigged)return;const o=this.lesson.activity.app,l=e.is_partial;if(l&&!this.profile.save_partial_attempts)return;const c=a.endpoint;await this.materialize_profile();let u=(new Date).getTime()-this.start_time;void 0!==a.duration&&(u=Math.min(u,a.duration));const p={team_id:this.team.id,lesson_id:this.lesson.id,frotz:e,start_time:this.start_time,duration:u,print:a.print},h=async e=>{const{version:s,post:o}=r.default,c=`/api/v${s}/attempt/${e}/`;let u;for(let e=0;e<5;e++){try{u=await o(c,p);break}catch(e){if(400===e.status&&"team_deleted"===e.responseJSON.code)return void this.dashboard()}await d(2500)}if(!u)return void(l||this.redo_lesson());if(u.error&&this._attempt)return;this.is_dirty_profile=!0;const h=(0,i.wrap)(u,n.default.prototype).init();a.print&&!h.print&&(h.print=a.print),this._attempt=h,t(h)};if(c)await h(c);else switch(o){case"typing.classic_typing_app":case"typing.videotyping_app":case"typing.boxed_typing":case"typing.games.BalloonValley":case"typing.games.MonsterAttack":case"typing.games.TempleBash":case"typing.games.FloatingBubbles":case"typing.games.AppleThieves":case"student.placementtest_app":if(!p.frotz.history)return void s.captureMessage("wrong data in postTypingResults");await h("postTypingResults");break;case"student.videoplayer":await h("postVideoResults");break;case"decisionmaking":await h("postDecisionMakingResults");break;case"spelling.cards":case"spelling.spellit":case"spelling.story":await h("postSpellingCardsResults");break;case"spelling.crossword":case"spelling.fillblank":case"spelling.multichoice":await h("postSpellingCrosswordResults");break;case"spelling.shuffle":case"spelling.dictation":await h("postSpellingDictationResults");break;case"spelling.dropquiz":await h("postSpellingDropquizResults");break;case"reading":await h("postReadingResults");break;case"spelling.proofreading":await h("postProofReadingResults");break;case"spelling.quiz":await h("postSpellingQuizResults");break;default:console.log("finish_activity","unknown app",o)}}}},58301:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AudioManager=void 0,t.sleep=u;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(58200)),i=a(56392),n=(s=a(43056))&&s.__esModule?s:{default:s},o=a(71327);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function c(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=[1,1,2,3,5,8,13,21,34,55,89,144,233];function u(e,t){return t&&t.aborted?Promise.reject(new DOMException("Abort","AbortError")):new Promise(((a,s)=>{const r=()=>{clearTimeout(i),s(new DOMException("Abort","AbortError"))},i=(0,o.setTimeout)((()=>{a(),t&&t.removeEventListener("abort",r)}),1e3*e);t&&t.addEventListener("abort",r)}))}class p{constructor(e,t){c(this,"context",new AudioContext),c(this,"id",0),c(this,"pending",{}),this.getProgramLocale=e,this.getAssets=t}async attemptToGetAWorkingContext(){let e=this.context;if("suspended"!==e.state)return e;try{let t;return await new Promise(((a,s)=>{e.resume().then((()=>{t&&clearTimeout(t),a()})),t=(0,o.setTimeout)(s,500)})),e}catch(e){return null}}async playAudio(e,t){let a,s,r,i;e=await e;const n=Boolean(null==t?void 0:t.delay),o=null==t?void 0:t.timestamps,l=(null==t?void 0:t.timestampCallback)||(null==t?void 0:t.wordCallback),c=this.getAssets();if(void 0!==(null==t?void 0:t.id)&&(r=t.id),"number"==typeof e)s=this.pending[e];else if("string"==typeof e)if(s=this.pending[e]);else if(i=c[e]){if("audio"!==i.type)throw`asset ${e} is not an audio asset`;a=i.url,void 0===r&&(r=e)}else if(approuter.frameUrl){const t=new URL(approuter.frameUrl);t.pathname=e,a=t.toString()}else{const t=new URL("https://static.typingclub.com/m/",window.location.href);t.pathname=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e.join(t).replace(new RegExp(t+"{1,}","g"),t)}([t.pathname,e]),a=t.toString()}else"object"==typeof e&&(void 0!==e.id&&(s=this.pending[e.id])||void 0!==e.tag&&(s=this.pending[e.tag])||void 0!==e.tag&&(i=c[e.tag])&&(a=i.url,void 0===r&&(r=i.tag)));if(s)s.source&&(s.source.stop(),await s.onended);else{if(!a)throw`don't know how to play ${e}`;{const e=await fetch(a);if(!e.ok)throw new Error("sound file not found");const t=await e.arrayBuffer();s=this.createResource(r,t,o);const i=await this.attemptToGetAWorkingContext();i&&await this.prepareBuffer(i,s)}}if(!n){const e=await this.attemptToGetAWorkingContext();e&&(await this.playAudioBuffer(e,s),l&&this.trackTime(e,s,l))}return{id:s.id,duration:s.duration}}async speak(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.getToken(),s=function(e){const t=e.split(/[-_]/);if(1===t.length)e=t[0].toLowerCase();else{if(2!==t.length)throw"invalid language code";e=`${t[0].toLowerCase()}-${t[1].toUpperCase()}`}return e}(t.languageCode||this.getProgramLocale()||"en-US");const o=t.gender||"female";Boolean(t.delay);let l=t.voice;l||("female"===o?l="female1":"male"===o&&(l="male1")),e=e.trim(),l=l.trim(),s=s.trim();const c=[];c.push(e),c.push(s),c.push(l);const p=n.default.hash(c.join(""));async function h(e){if(401===e.status){await r.getFreshSession();return a=r.getToken(),!0}}const f=async()=>{const e=new URL(`/api/v1.1/texttospeech/${p}/`,(0,i.getBaseUrl)()||window.location),t=await fetch(e.toString(),{headers:{Authorization:`Token ${a}`}});return t.ok?await t.json():await h(t)?f():null},m=async()=>{const t=new URL("/api/v1.1/texttospeech/",(0,i.getBaseUrl)()||window.location),r=await fetch(t.toString(),{method:"POST",cache:"no-cache",headers:{Authorization:`Token ${a}`,"Content-Type":"application/json"},body:JSON.stringify({text:e,language_code:s,voice:l})});if(await h(r))return m();if(!r.ok)throw"error in post"};let _=await f();if(!_){await m();for(const e of d){if(_=await f(),_)break;await u(e)}if(!_)throw"no result"}this.getAssets()[_.tag]=_,t.timestamps=_.words;const g=await this.playAudio(_.tag,t);return g.words=_.words,g}createResource(e,t,a){e||(e=this.id++);const s={id:e};return s.arraybuffer=t,s.timestamps=a,this.pending[e]=s,s}async trackTime(e,t,a){t.abortController=new AbortController;for(const s of t.timestamps){let r=e.currentTime-t.startTime;const i=s.start_time-r;try{await u(i,t.abortController.signal)}catch(e){return}a(s)}}async prepareBuffer(e,t){if(!t.buffer){try{t.buffer=await e.decodeAudioData(t.arraybuffer)}catch(e){throw delete this.pending[t.id],e}delete t.arraybuffer,t.duration=t.buffer.duration}}async playAudioBuffer(e,t){await this.prepareBuffer(e,t);const a=e.createGain();a.connect(e.destination);const s=e.createBufferSource();s.buffer=t.buffer,s.playbackRate.value=1,s.connect(a),t.startTime=e.currentTime,t.onended=new Promise((function(e,t){s.addEventListener("ended",e)})),t.onended.finally((()=>{t.source.disconnect(t.gain),t.gain.disconnect(e.destination),t.abortController&&t.abortController.abort()})),t.source=s,t.gain=a,s.start(0)}async stopAudio(e){var t;let a;if("string"==typeof(e=await e)&&(a=this.pending[e]));else if("object"!=typeof e||!(a=this.pending[e.id]))return;null===(t=a.source)||void 0===t||t.stop()}async waitAudio(e){let t;if("string"==typeof(e=await e)&&(t=this.pending[e]));else if("object"!=typeof e||!(t=this.pending[e.id]))return;await t.onended}stopAllAudio(){let e=Object.values(this.pending);for(const t of e)t.gain&&t.gain.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+1);(0,o.setTimeout)((()=>{for(const t of e)t.source&&t.source.stop()}),2e3)}flush(){this.stopAllAudio(),this.pending={}}}t.AudioManager=p;t.default=e=>class extends e{constructor(){super(...arguments),c(this,"resourceAudioManager",new p((()=>this.program.locale),(()=>this.assets))),c(this,"frobAudioContext",(()=>{"suspended"===this.resourceAudioManager.context.state&&this.resourceAudioManager.context.resume()})),c(this,"speak",((e,t)=>this.resourceAudioManager.speak(e,t))),c(this,"stopSpeak",(()=>{})),c(this,"playAudio",((e,t)=>this.resourceAudioManager.playAudio(e,t))),c(this,"stopAudio",(e=>this.resourceAudioManager.stopAudio(e))),c(this,"waitAudio",(e=>this.resourceAudioManager.waitAudio(e))),c(this,"stopAllAudio",(()=>this.resourceAudioManager.stopAllAudio()))}}},65973:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=l(a(67294)),r=l(a(42644)),i=a(17858),n=a(15239),o=a(50751);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e){const t=["#AD1457","#F4511E","#E4C441","#0B8043","#3F51B5","#8E24AA","#D81B60","#EF6C00","#C0CA33","#009688","#7986CB","#795548","#D50000","#F09300","#7CB342","#039BE5","#B39DDB","#616161","#E67C73","#F6BF26","#33B679","#4285F4","#9E69AF","#A79B8E","#1c3aa9"];return t[e.split("").map((e=>e.charCodeAt())).reduce(((e,t)=>e+t),0)%t.length]}function u(e){(0,n.addBreadcrumb)({category:"log",level:"info",message:e})}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"team assert fail";e||(0,n.withScope)((e=>{throw approuter.program&&e.setExtra("program_id",approuter.program.id),approuter.team&&e.setExtra("team_id",approuter.team.id),e.setExtra("teamprograms",approuter.profile.teamprograms.map((e=>({id:e.id,team:e.team_id,program:e.program_id})))),t}))}t.default=e=>class extends e{constructor(){super(...arguments),c(this,"team",void 0),c(this,"team_program",void 0),c(this,"team_for_program",new i.Persistence("team_for_program"))}_resetTeam(){this._clearTeam(),this.team_for_program.invalidate()}_setTeam(e){p(e,"setTeam: empty team"),u(`setting team ${e.id}`),this.team=e,this.team_program=this.profile.teamprograms.find((e=>e.team_id==this.team.id&&e.program_id==this.program.id)),p(this.team_program,`setTeam: no team_program for ${this.team.id}, ${this.program.id}`),this.team_for_program.set(this.program.id,this.team.id)}_clearTeam(){this.team=null,this.team_program=null}teamsForCurrentProgram(){return this.teamsForProgram(this.program)}teamsForProgram(e){const t=this.profile,a=t.teamprograms.filter((t=>e.id==t.program_id)).map((e=>e.team_id)),s=t.teams.filter((e=>a.includes(e.id)));return p(s.length>0,`teamsForProgram: no teams for ${e.id}`),s}guessTeam(){if(this.is_rigged)return;const e=this.team_for_program.get(this.program.id);if(e){const t=this.profile.teams.find((t=>t.id==e));t&&(u(`team ${t.id} from persistence ${e}`),this._setTeam(t))}const t=this.teamsForCurrentProgram();if(this.team){u(`has team ${this.team.id}`);t.find((e=>e.id==this.team.id))?this.team_program.program_id!==this.program.id&&this._setTeam(this.team):(u("team is not in profile"),this._clearTeam())}this.team||(u("has no team"),t.length>0?(u(`setting team ${t[0].id}`),this._setTeam(t[0]),t.length>1&&(u(`team selection ${t.length}`),this._selectTeamFrom(t))):u("teams for current program is empty"))}selectTeam(){this._selectTeamFrom(this.teamsForCurrentProgram())}_selectTeamFrom(e){!function(e,t){e=e.sort(((e,t)=>e.name<t.name?-1:1)),approuter.show_modal(s.default.createElement(r.default,{id:"select-team-modal",width:400,show_x:!1,close_outside:!1,esc_close:!1,padding:0},s.default.createElement("h3",{style:{margin:20}},(0,o.t)("Select your class")),s.default.createElement("hr",{style:{marginBottom:0}}),e.map((e=>s.default.createElement("a",{className:"list-item-select",key:`team-selec-${e.id}`,onClick:()=>{u(`selecting team ${e.id}`),t(e),approuter.hide_modal("select-team-modal")}},s.default.createElement("b",{style:{backgroundColor:d(e.name)}},e.name[0].toUpperCase()),e.name,s.default.createElement("br",null),s.default.createElement("small",null,e.instructors.join(", ")))))))}(e,(e=>{p(e,"select_team: trying to set empty team");const t=!this.team||e.id!=this.team.id;this._setTeam(e),t&&this.refresh()}))}}},90699:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(264),r=n(a(21294)),i=n(a(10358));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=e=>class extends e{constructor(){super(...arguments),o(this,"is_rigged",!1)}async receiveMessage(e){if(!e.data||1!=e.data.type)return!1;if(!this.resolveAppRoute)return void setTimeout(this.receiveMessage,1e3,e);let{env:t,profile:a,team:n,program:o,lesson:l,assets:c}=e.data;this.lesson=(0,s.wrap)(l,i.default.prototype),a&&(this.profile=await(0,s.wrap)(a,r.default.prototype)),n&&(this.team=n),o&&(this.program=o),c&&(this.assets=c),this.is_rigged=!0,this.apply_env(t,!1)}apply_env_message(e,t,a){e.postMessage({type:1,team:{settings:{}},profile:a.profile,program:a.program,env:t},"*")}registerTryLesson(){window.addEventListener("message",this.receiveMessage)}}},16436:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.b64_to_utf8=i,t.bindAll=function(e){let t=new Set;for(const a of function(e){let t=[];for(;e=Object.getPrototypeOf(e);)t.push(e);return t}(e))for(const e of Object.getOwnPropertyNames(a))t.add(e);for(const a of t)"constructor"!==a&&e[a]instanceof Function&&(e[a]=e[a].bind(e))},t.compose=void 0,t.constructClass=function(e){let t=e;for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];for(const e of s)t=e(t);return t},t.deserializeJson=function(e){return JSON.parse(i(e))},t.serializeJson=function(e){return r((0,s.stable_stringify)(e))},t.utf8_to_b64=r;var s=a(4716);function r(e){return window.btoa(unescape(encodeURIComponent(e)))}function i(e){return decodeURIComponent(escape(window.atob(e)))}t.compose=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(((e,t)=>function(){return e(t(...arguments))}))}},4922:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(24880))&&s.__esModule?s:{default:s};t.default=class{constructor(){this.player={},this.prefer_hls=r.default.browser.IS_ANY_SAFARI}async load(){const{IS_ANDROID:e,IS_ANY_SAFARI:t,IS_CHROME:a,IS_EDGE:s,IS_NATIVE_ANDROID:i,IS_IPAD:n,IS_IPHONE:o,IS_IPOD:l,IS_IOS:c,IS_SAFARI:d}=r.default.browser,u={android:e,any_safari:t,chrome:a,edge:s,native_android:i,ipad:n,iphone:o,ipod:l,ios:c,safari:d},p=await fetch("https://videos2.edclub.com/video_settings.json");if(!p.ok)return;const h=await p.json();let f=this.player;if(Object.assign(f,h.player),void 0!==h.prefer_hls&&(this.prefer_hls=h.prefer_hls),h.aux)for(let e of h.aux)u[e.key]&&(void 0!==e.prefer_hls&&(this.prefer_hls=e.prefer_hls),void 0!==e.player&&Object.assign(f,e.player))}}},24040:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e){const t=window.AudioContext||window.webkitAudioContext;t&&(this.context=new t,this.keys={},e&&this.load(e).then((()=>this.play(e))))}async load(e,t){if(!this.context)return;if(this.keys[e])return;if("object"==typeof e){for(let t of e)this.load(t);return}if(!t){let a="mp3";~e.search(/.m4a$/)&&(e=e.replace(/.m4a$/,""),a="m4a"),t=e.includes("/")?e:`/m/audio/${e}.${a}`}const a=new AbortController;return setTimeout((()=>a.abort()),1e4),fetch(t,{signal:a.signal}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.arrayBuffer()})).then((e=>this.context.decodeAudioData(e))).then((t=>this.keys[e]={buffer:t,is_playing:!1})).catch((e=>console.warn("audio fail",t)))}play(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.context)return;"suspended"===this.context.state&&this.context.resume();const a=this.keys[e];if(!a)return void 0;if(!t&&a.is_playing)return;let s=this.context.createBufferSource();a.source=s,s.buffer=a.buffer,s.connect(this.context.destination),s.start(0),t||(a.is_playing=!0,s.onended=()=>a.is_playing=!1)}stop(){if(this.context)for(let e in this.keys){let t=this.keys[e];t.source&&(t.source.stop(),t.source=null)}}}},58200:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFreshSession=t.getDomain=t.events=t.constructPath=void 0,t.getSession=b,t.getSessionAsync=void 0,t.getSessionPref=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(JSON.parse(localStorage.getItem("session_prefs"))||{})[e]||t},t.getSessions=v,t.getSessionsAsync=void 0,t.getToken=function(){const e=b();return e?e.token:null},t.setDomain=t.registerStudentLoginHandler=t.registerSignOutHandler=t.registerOnLogin=t.redirectAfterLogout=t.isLoggedIn=void 0,t.setSessionPref=function(e,t){const a=JSON.parse(localStorage.getItem("session_prefs"))||{};a[e]=t,localStorage.setItem("session_prefs",JSON.stringify(a))},t.signOutEverywhere=void 0,t.signUserIn=async function(e){return r.registerLoginSession(e).then((e=>(l.fire_event("change",v()),e))).then(p)},t.signUserOut=async function(){const e=r.getSessions().find((e=>e.domain===g()));d&&await d(e);await r.removeSession(g()),l.fire_event("change",v()),localStorage.removeItem("session_prefs"),window.cordova&&SafariViewController.show({url:"https://accounts.google.com/logout"},(e=>{"loaded"===e.event&&SafariViewController.hide()}));return e},t.urls=t.takeMeToLogin=t.takeMeToAbsolutePath=t.takeMeTo=t.takeMeHomeOrNext=t.takeMeHome=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(57618)),i=(s=a(47642))&&s.__esModule?s:{default:s};function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}const o=t.urls={student:"/sportal/",teacher:"/portal/",login:"/"},l=t.events=new i.default(["change"]),c=e=>document.location=e;t.takeMeTo=c;t.takeMeToLogin=e=>c(o.login+(e?`?next=${e}`:""));t.takeMeToAbsolutePath=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();return c(y(e,t))};let d,u=window.cordova?localStorage.getItem("domain-key"):"www",p=async e=>e,h=()=>c(o.student);let f,m;const _=e=>u=e;t.setDomain=_;const g=()=>u;t.getDomain=g;t.registerOnLogin=e=>p=e;t.registerSignOutHandler=e=>d=e;t.registerStudentLoginHandler=e=>h=e;t.isLoggedIn=()=>!!b();t.signOutEverywhere=async()=>{await r.flushSessions(),m=null,l.fire_event("change",v())};const y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();const a=document.location.host.match(/(([a-z\-]+)([1-9]+)?(?:\.com))/),s=null===a?"edlocal.com":a[0],r=`${s}:${document.location.port}`.replace(/:$/,"");return`${document.location.protocol}//${t}.${r}${e}`};function v(){const e=r.getSessions();return window.DEFAULT_ACCOUNT_DOMAIN&&_(window.DEFAULT_ACCOUNT_DOMAIN),e.find((e=>"www"===e.domain))||e.push({domain:"www",token:"default",is_student:!0,is_tp:!0}),e}function b(){return v().find((e=>e.domain===g()))||null}t.constructPath=y;t.takeMeHomeOrNext=e=>{const t={};if(window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,((e,a,s)=>t[a]=s)),t.next){const a=document.location.host.split(".").slice(1,3).join(".");return c(`${document.location.protocol}//${e.domain}.${a}${unescape(t.next)}`)}w(e)};const w=e=>{if(u===e.domain)e.is_student?h(e):c(o.teacher);else{const t=e.is_student?o.student:o.teacher;0;const a=document.location.host.split(".").slice(1,3).join(".");c(`${document.location.protocol}//${e.domain}.${a}${t}`)}};t.takeMeHome=w;t.redirectAfterLogout=e=>{c(e?`/post_logout_redirect/?domain=${e.domain}&login_method=${e.login_method}`:"/")};const k=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new Date-f;return(!m||e&&t>1e3)&&(f=new Date,m=r.fetchSessions(g())),m};t.getSessionsAsync=k;const x=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await k(e),b()};t.getSessionAsync=x;t.getFreshSession=async()=>x(!0)},56392:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=t.getBaseUrl=void 0;let a=null;t.setBaseUrl=e=>a=e;t.getBaseUrl=()=>a||""},86071:(e,t)=>{function a(){var e,t,a,s=navigator.appVersion,r=navigator.userAgent,i=navigator.appName,n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);return-1!=(t=r.indexOf("Opera"))&&(i="Opera",n=r.substring(t+6),-1!=(t=r.indexOf("Version"))&&(n=r.substring(t+8))),-1!=(t=r.indexOf("OPR"))?(i="Opera",n=r.substring(t+4)):-1!=(t=r.indexOf("Edge"))?(i="Edge",n=r.substring(t+5)):-1!=(t=r.indexOf("MSIE"))?(i="IE",n=r.substring(t+5)):-1!=(t=r.indexOf("Chrome"))?(i="Chrome",n=r.substring(t+7)):-1!=(t=r.indexOf("Safari"))?(i="Safari",n=r.substring(t+7),-1!=(t=r.indexOf("Version"))&&(n=r.substring(t+8))):-1!=(t=r.indexOf("Firefox"))?(i="Firefox",n=r.substring(t+8)):-1!=r.indexOf("Trident/")?(i="IE",n=r.substring(r.indexOf("rv:")+3)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(i=r.substring(e,t),n=r.substring(t+1),i.toLowerCase()==i.toUpperCase()&&(i=navigator.appName)),-1!=(a=n.indexOf(";"))&&(n=n.substring(0,a)),-1!=(a=n.indexOf(" "))&&(n=n.substring(0,a)),-1!=(a=n.indexOf(")"))&&(n=n.substring(0,a)),o=parseInt(""+n,10),isNaN(o)&&(n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),{browser:i,browserVersion:n,majorVersion:o,mobile:/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(s)}}Object.defineProperty(t,"__esModule",{value:!0}),t.FALLBACK_INFO=void 0,t.default=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=a();if(e.binfo=s,"IE"==s.browser||"Edge"==s.browser&&s.majorVersion<12||"Safari"==s.browser&&s.majorVersion<9||"Firefox"==s.browser&&s.majorVersion<38||"Opera"==s.browser&&s.majorVersion<58||"Chrome"==s.browser&&s.majorVersion<50)return t&&e.addEventListener("load",(e=>{r()})),!1;return!0},t.styleDocumentBody=void 0;const s=()=>{document.body.style.height="100vh",document.body.style.display="grid",document.body.style.placeItems="center"};function r(){document.body.innerHTML="",s(),document.body.innerHTML=i}t.styleDocumentBody=s;const i=t.FALLBACK_INFO="\n<div style='border:1px solid #bbb;width:70vw;padding:50px 60px;display:grid;' class='well'>\n  <h3>Please upgrade your browser</h3>\n  <p style='font-size:1.3em;text-align: justify;'>TypingClub no longer supports your browser.</p>\n  <p style='font-size:1.3em;text-align: justify;'>For the best experience we recommend\n    upgrading your browser to <a href='https://www.google.com/chrome/browser/desktop/' target='_blank'>Google Chrome</a>\n    or the latest version of the browser of your choice. Check our <a href=\"/help/user-guide/introduction/technical-requirements.html\">help page</a>\n  </p>\n  <span style=\"place-self: end;\">-- EdClub Team</span>\n</div>"},47642:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EVENT_MANAGER_CHANNEL_MESSAGE=void 0;var s,r=(s=a(48583))&&s.__esModule?s:{default:s};function i(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n=t.EVENT_MANAGER_CHANNEL_MESSAGE=2;class o{constructor(e){this.event_manager=e,this.events={}}on(e,t){try{return this.event_manager.on(e,t)}finally{this.events[e]||(this.events[e]=[]),this.events[e].push(t)}}unbindAll(){for(let e in this.events)for(let t of this.events[e])this.event_manager.unbind(e,t)}}t.default=class{constructor(e){i(this,"events",{}),i(this,"fire_event_hook",null),i(this,"port",void 0),i(this,"pending_channel_results",void 0),i(this,"MESSAGE_TYPE",2);for(let t of e)this.events[t]=[]}on(e,t){(0,r.default)(this.events[e],`event does not exist: ${e}`),this.events[e].push(t)}on1(e,t){const a=s=>{this.unbind(e,a),t(s)};this.on(e,a)}unbind(e,t){(0,r.default)(this.events[e],`event does not exist: ${e}`);let a=[];for(let s of this.events[e])s!==t&&a.push(s);this.events[e]=a}flush(e){this.events[e]=[]}fire_event(e,t){let a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{relayed:!1,ports:[]},i=this.events[e];(0,r.default)(i,`event does not exist: ${e}`),!i&&s.relayed&&(i=[]);const n=s.ports;for(const e of i){let s;s=e(t,n),void 0!==s&&void 0===a&&(a=s)}return this.fire_event_hook&&!s.relayed?this.fire_event_hook(e,t,a,n):a}group(){return new o(this)}fire_event_with_handlers(e,t,a){let s=this.group();for(let[e,t]of Object.entries(a))s.on(e,(function(){return s.unbindAll(),t(...arguments)}));this.fire_event(e,t)}attachPort(e){(0,r.default)(!this.fire_event_hook,"existing fire_event_hook"),(0,r.default)(!this.port,"existing port");const t=JSON.stringify,a=JSON.parse;this.port=e,this.pending_channel_results=new Set,e.onmessage=async e=>{const s=e.ports[0],[r,i]=a(e.data);let n,o;try{n=await this.fire_event(r,i,{relayed:!0,ports:e.ports.slice(1)})}catch(e){o=e.toString()}s.postMessage(t([n,o]))},this.fire_event_hook=(s,r,i,n)=>new Promise(((i,o)=>{this.pending_channel_results.add(o);const l=new MessageChannel;l.port1.onmessage=e=>{this.pending_channel_results&&this.pending_channel_results.delete(o),l.port1.close();const[t,s]=a(e.data);s?o(s):i(t)};const c=[l.port2];n&&c.push(...n),e.postMessage(t([s,r]),c)}))}establishChannel(){const e=new MessageChannel;this.attachPort(e.port1),window.parent.postMessage({type:n,msg:"HELO"},"*",[e.port2])}handleChannelMessage(e){return!(!e.data||e.data.type!==n)&&(this.attachPort(e.ports[0]),!0)}closeChannel(){if(this.port&&this.port.close(),this.pending_channel_results)for(const e of this.pending_channel_results)e("closed");this.fire_event_hook=null,this.port=null,this.pending_channel_results=null}}},15239:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.captureMessage=t.captureException=t.addBreadcrumb=void 0,t.init=function(e){s.init({dsn:e,debug:!1,environment:"production",release:r.version,whitelistUrls:[/typingclub\.com/,/tpclub\.com/],ignoreErrors:[/^event is not defined$/,/^Unexpected token <$/,/^Unexpected identifier$/,/\.data\.indexOf is not a function$/,/^Blocked a frame with origin/,/ResizeObserver loop limit exceeded/,/The play\(\) request was interrupted by a call to pause\(\)/,/^undefined$/,/player\.es/,/user agent or the platform in/,/embed code from Vimeo/,/because the user denied permission/,/Failed to fetch/,/<unknown>/,/InvalidAccessError: InvalidAccessError/,/from accessing another frame/],beforeBreadcrumb:function(e){return"xhr"===e.category&&/^(https?:)?\/\//.test(e.data.url)?null:e},normalizeDepth:5,attachStacktrace:!1});const t="www"==document.location.host.split(".")[0]?"tp":"tpc";s.configureScope((function(e){e.setTags({server_name:t})})),top&&self!=top&&s.addBreadcrumb({category:"log",level:"info",message:"in iframe: "+(document.referrer||"no referrer")})},t.log_catch_promise=function(e){return function(t,a,s){const r=s.value;s.value=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];const i=r.apply(this,a);return i instanceof Promise?i.catch((function(t){0!=t.status||t.statusText,console.error(`failed ${e} promise`,t,"args",a)})):i}}},t.profile_changed=function(e){s.configureScope((function(t){t.setUser({id:e.id,account_id:e.account_id,is_basic:e.is_basic}),t.setTags({account:e.account_id,is_basic:e.is_basic})})),s.close()},t.withScope=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}(a(28787)),r=a(4147);a(84542);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}t.captureException=s.captureException,t.captureMessage=s.captureMessage,t.addBreadcrumb=s.addBreadcrumb,t.withScope=s.withScope},50056:(e,t,a)=>{var s,r=(s=a(69606))&&s.__esModule?s:{default:s};r.default.easing.jswing=r.default.easing.swing,r.default.extend(r.default.easing,{def:"easeOutQuad",swing:function(e,t,a,s,i){return r.default.easing[r.default.easing.def](e,t,a,s,i)},easeInQuad:function(e,t,a,s,r){return s*(t/=r)*t+a},easeOutQuad:function(e,t,a,s,r){return-s*(t/=r)*(t-2)+a},easeInOutQuad:function(e,t,a,s,r){return(t/=r/2)<1?s/2*t*t+a:-s/2*(--t*(t-2)-1)+a},easeInCubic:function(e,t,a,s,r){return s*(t/=r)*t*t+a},easeOutCubic:function(e,t,a,s,r){return s*((t=t/r-1)*t*t+1)+a},easeInOutCubic:function(e,t,a,s,r){return(t/=r/2)<1?s/2*t*t*t+a:s/2*((t-=2)*t*t+2)+a},easeInQuart:function(e,t,a,s,r){return s*(t/=r)*t*t*t+a},easeOutQuart:function(e,t,a,s,r){return-s*((t=t/r-1)*t*t*t-1)+a},easeInOutQuart:function(e,t,a,s,r){return(t/=r/2)<1?s/2*t*t*t*t+a:-s/2*((t-=2)*t*t*t-2)+a},easeInQuint:function(e,t,a,s,r){return s*(t/=r)*t*t*t*t+a},easeOutQuint:function(e,t,a,s,r){return s*((t=t/r-1)*t*t*t*t+1)+a},easeInOutQuint:function(e,t,a,s,r){return(t/=r/2)<1?s/2*t*t*t*t*t+a:s/2*((t-=2)*t*t*t*t+2)+a},easeInSine:function(e,t,a,s,r){return-s*Math.cos(t/r*(Math.PI/2))+s+a},easeOutSine:function(e,t,a,s,r){return s*Math.sin(t/r*(Math.PI/2))+a},easeInOutSine:function(e,t,a,s,r){return-s/2*(Math.cos(Math.PI*t/r)-1)+a},easeInExpo:function(e,t,a,s,r){return 0==t?a:s*Math.pow(2,10*(t/r-1))+a},easeOutExpo:function(e,t,a,s,r){return t==r?a+s:s*(1-Math.pow(2,-10*t/r))+a},easeInOutExpo:function(e,t,a,s,r){return 0==t?a:t==r?a+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+a:s/2*(2-Math.pow(2,-10*--t))+a},easeInCirc:function(e,t,a,s,r){return-s*(Math.sqrt(1-(t/=r)*t)-1)+a},easeOutCirc:function(e,t,a,s,r){return s*Math.sqrt(1-(t=t/r-1)*t)+a},easeInOutCirc:function(e,t,a,s,r){return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+a:s/2*(Math.sqrt(1-(t-=2)*t)+1)+a},easeInElastic:function(e,t,a,s,r){var i=1.70158,n=0,o=s;if(0==t)return a;if(1==(t/=r))return a+s;if(n||(n=.3*r),o<Math.abs(s)){o=s;i=n/4}else i=n/(2*Math.PI)*Math.asin(s/o);return-o*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/n)+a},easeOutElastic:function(e,t,a,s,r){var i=1.70158,n=0,o=s;if(0==t)return a;if(1==(t/=r))return a+s;if(n||(n=.3*r),o<Math.abs(s)){o=s;i=n/4}else i=n/(2*Math.PI)*Math.asin(s/o);return o*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/n)+s+a},easeInOutElastic:function(e,t,a,s,r){var i=1.70158,n=0,o=s;if(0==t)return a;if(2==(t/=r/2))return a+s;if(n||(n=r*(.3*1.5)),o<Math.abs(s)){o=s;i=n/4}else i=n/(2*Math.PI)*Math.asin(s/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/n)*-.5+a:o*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/n)*.5+s+a},easeInBack:function(e,t,a,s,r,i){return null==i&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+a},easeOutBack:function(e,t,a,s,r,i){return null==i&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+a},easeInOutBack:function(e,t,a,s,r,i){return null==i&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*((1+(i*=1.525))*t-i))+a:s/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+a},easeInBounce:function(e,t,a,s,i){return s-r.default.easing.easeOutBounce(e,i-t,0,s,i)+a},easeOutBounce:function(e,t,a,s,r){return(t/=r)<1/2.75?s*(7.5625*t*t)+a:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+a:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+a:s*(7.5625*(t-=2.625/2.75)*t+.984375)+a},easeInOutBounce:function(e,t,a,s,i){return t<i/2?.5*r.default.easing.easeInBounce(e,2*t,0,s,i)+a:.5*r.default.easing.easeOutBounce(e,2*t-i,0,s,i)+.5*s+a}}),r.default.extend(r.default.easing,{easeIn:function(e,t,a,s,i){return r.default.easing.easeInQuad(e,t,a,s,i)},easeOut:function(e,t,a,s,i){return r.default.easing.easeOutQuad(e,t,a,s,i)},easeInOut:function(e,t,a,s,i){return r.default.easing.easeInOutQuad(e,t,a,s,i)},expoin:function(e,t,a,s,i){return r.default.easing.easeInExpo(e,t,a,s,i)},expoout:function(e,t,a,s,i){return r.default.easing.easeOutExpo(e,t,a,s,i)},expoinout:function(e,t,a,s,i){return r.default.easing.easeInOutExpo(e,t,a,s,i)},bouncein:function(e,t,a,s,i){return r.default.easing.easeInBounce(e,t,a,s,i)},bounceout:function(e,t,a,s,i){return r.default.easing.easeOutBounce(e,t,a,s,i)},bounceinout:function(e,t,a,s,i){return r.default.easing.easeInOutBounce(e,t,a,s,i)},elasin:function(e,t,a,s,i){return r.default.easing.easeInElastic(e,t,a,s,i)},elasout:function(e,t,a,s,i){return r.default.easing.easeOutElastic(e,t,a,s,i)},elasinout:function(e,t,a,s,i){return r.default.easing.easeInOutElastic(e,t,a,s,i)},backin:function(e,t,a,s,i){return r.default.easing.easeInBack(e,t,a,s,i)},backout:function(e,t,a,s,i){return r.default.easing.easeOutBack(e,t,a,s,i)},backinout:function(e,t,a,s,i){return r.default.easing.easeInOutBack(e,t,a,s,i)}})},3317:(e,t)=>{function a(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e,t){a(this,"listeners",[]),a(this,"countId",0),document.addEventListener("keydown",this.onKeyDown.bind(this)),this.Priority=Object.freeze(e),this.defaultPriority=t}onKeyDown(e){for(let t of this.listeners)if(t.handler(e))return}register(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPriority;const a=this.countId++;return this.listeners.push({handler:e,priority:t,id:a}),this.listeners.sort(((e,t)=>t.priority-e.priority)),a}unregister(e){this.listeners=this.listeners.filter((t=>t.id!=e))}flush(){this.listeners=[],this.countId=0}}},38452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={escape:27,enter:13,space:32,backspace:8,tab:9,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,p:80,r:82,f5:116,slash:191}},64489:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{init(){approuter.lesson&&approuter.lesson.id==this.lesson_id&&(this.lesson=approuter.lesson),this.speed=2.2;const e=[];if(this.badges)for(const t of this.badges){const a=approuter._badges[t];a?e.push(a):console.warn(`missing mapping for badge id ${t}`)}return this.badges=e,this}get has_performance_goals(){return!(this.score>0&&0==this.stars)}get next_lesson_url(){if(this.has_performance_goals){if(!approuter.lesson.nextLessonId())return!1;if(0===this.score)return!1;let e;try{e=approuter.team.settings.min_stars}catch{e=1}return!(this.stars<e)}return!0}}},264:(e,t)=>{function a(e,t){return Object.setPrototypeOf(e,t)}function s(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=s,t.wrap=a,t.wrapCopy=function(e,t){return t=t||Object.getPrototypeOf(e),a(s(e),t)}},10358:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}(a(71327));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(r=function(e){return e?a:t})(e)}t.default=class{getText(){return this.activity.text2||this.activity.text3||this.activity.text4?s.choose_random_field(this.activity,["text1","text2","text3","text4"],!0):this.activity.text1}nextLessonId(){const e=approuter.program.lessons,t=e.findIndex((e=>e.id==this.id));if(t!=e.length-1)for(let a=t+1;a<e.length;a++){const t=e[a];if(!t.is_hidden&&"header"!=t.lesson_type)return t.id}}}},21294:(e,t,a)=>{function s(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(15461);t.default=class{constructor(){s(this,"language","en"),s(this,"type","blank")}getSubjects(){const e={};for(const t of this.programs)e[t.subject.id]=t.subject.name;return e}clone(){return Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this))}getDerivedProfile(){var e;const t=this.clone(),a=approuter.team;t.disable_backspace=a.disable_backspace;const s=a.settings;s.lock_keyboard_guide&&(t.show_keyboard=s.keyboard_guide),s.lock_hands_guide&&(t.show_hand=s.hands_guide),s.lock_keyboard&&(t.keyboard=s.keyboard),s.lock_use_hand&&(t.use_hand=s.use_hand),t.is_right_hand_only&&(t.use_hand="right"),t.is_left_hand_only&&(t.use_hand="left"),s.lock_keyboard_sfx&&(t.keyboard_sfx=s.keyboard_sfx),s.lock_voicefx&&(t.voicefx=s.voicefx),s.lock_block_on_errors&&(t.block_on_errors=s.block_on_errors),s.keyboard_lowercase&&(t.keyboard_lowercase=s.keyboard_lowercase);const r="es"===(null===(e=approuter.program.locale)||void 0===e?void 0:e.split("_")[0]),i={font_face:"Primary Penmanship",font_size:"med",keyboard:r?"es,spanish":"en,us",keyboard_layout:(t.keyboard_lowercase?12:11)+(r?2:0),typing_theme:"bees",show_hand:!0,show_keyboard:!0,use_hand:null};if(approuter.program&&approuter.program.is_junior)for(const e in i)t[e]=i[e];return t}lessonplans(){return this.programs.filter(function(e){if("test"==e.program_type)return!1;const t=this.teamprograms.find((t=>t.program_id==e.id));if(!t.requires_id)return!0;const a=this.teamprograms.find((e=>e.id==t.requires_id));return this.programs.find((e=>e.id==a.program_id)).is_complete}.bind(this))}}},7454:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.merge_lessons_and_progress=a;function a(e,t,a,s){const r=t.lessons,i={};let n;for(const t of e)i[t.lesson_id]=t;n=1;let o=0,l=0,c=-1;const d=s.settings.min_stars||1;for(const e of r){const t=i[e.id];t?e.progress=t:delete e.progress,e.is_locked=!1,e.is_blocked=!1,e.is_unassigned=!1,e.has_range=!1,delete e.is_tutorial,"header"!=e.lesson_type?(e.is_hidden&&n--,e.index=n,e.lesson_index=e.index,e.progress&&e.progress.score>0&&(e.objective_completion||e.progress.stars>=d)&&(o=e.index,l++),e.is_test&&(c=e.index),n++):(e.index=null,e.lesson_index=null)}if(0==o)for(const e of r)if("header"!=e.lesson_type){e.is_tutorial=!0;break}const u=a.start_lock_index,p=a.lock_index||0,h=s.can_jump;for(const e of r){if("header"==e.lesson_type)continue;e.has_range=!(null==u||-1==p||0==p);let t=!1;e.has_range?(e.index<u||e.index>p||o>=u&&o<=p&&e.index>o+1||o<u&&e.index!=u)&&(t=!0):e.index>o+1&&(t=!0),!h&&t&&(e.is_locked=!0,e.is_blocked=!0),e.has_range&&(e.index<u||e.index>p)&&(e.is_unassigned=!0),t&&(e.is_locked=!0)}t.last_with_progress=o,t.lessons_with_progress=l,t.last_finished=o,t.lesson_count=n-1,t.has_placement_test=a.has_placement_test&&c>o}t.default=class{merge_progress(e,t,s){a(e.lesson_games,this,t,s)}}},38400:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{init(){return this.settings||(this.settings={}),this}}},99332:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.oauthWithPopup=function(e,t,a,s,n,l){const c=a[e];return localStorage.setItem("login_method",e),s&&s(!0),new Promise((function(d,u){var p;const h=Object.assign({response_type:"code",redirect_uri:a.BASE_DOMAIN+a.OAUTH_CALLBACK},c.PARAMS);let f=window.cordova?localStorage.getItem("domain-key"):window.location.host.split(".")[0];f="www";let m=c.AUTHORIZE_URL+"?"+(_=h,Object.entries(_).map((e=>{let[t,a]=e;return encodeURIComponent(t)+"="+encodeURIComponent(a)})).join("&"));var _;let g=!1;function y(a){function l(){s&&s(!1),u(...arguments)}if(-1!==(a=decodeURIComponent(a)).indexOf("error")){const e=a.split("error=")[1].split("&")[0],t=decodeURIComponent(a.split("error_description=")[1].split("&")[0].replace(/\+/g,"%20"));return console.warn("got oauth error",a),void l({responseJSON:"OAuth callback error: "+e+" ("+t+")"})}if(-1===a.indexOf("code="))return console.warn("no code found in oauth callback url",a),void l({responseJSON:"no code found in url: "+a});const c=a.split("code=")[1].split("&")[0];n?d(c):r.default.resolveOAauthToken(e,f,c,(e=>async function(e,t,a,s){let{user:r,tpc_users:n}=e;0;if(!r&&1===n.length)return void await i.signUserIn(n[0].login_token).then(o);if(n.length)a(e);else if(r)i.signUserIn(r.login_token).then(o);else if(t){const t=await approuter.materialize_profile();if(t&&!t.is_anonymous)return void a();const r=e.auth_user,i={};for(let e of["email","fname","lname","sis_id"])r[e]&&(i[e]=r[e]);try{await approuter.update_profile(i)}catch(e){return void s(e)}a()}else s()}(e,t,d,l)),l)}if("clever"===e&&l&&null===(null===(p=a.clever)||void 0===p?void 0:p.PARAMS.district_id)&&(m=m.replace("district_id=null",`sis_id=${l}`)),window.cordova)window.handleOpenURL=function(e){window.handleOpenURL=null,SafariViewController.hide(),y(e)},SafariViewController.show({url:m});else{const e=t=>{"string"==typeof t.data&&(g=!0,~t.origin.split("?")[0].indexOf(a.BASE_DOMAIN)&&(window.removeEventListener("message",e),y(t.data)))};window.addEventListener("message",e);const t=window.open(m,"_blank","location=no,toolbar=yes");if(!t)return console.warn("Could not open window for oauth");const r=setInterval((function(){t.closed&&!g&&(clearInterval(r),s&&s(!1))}),1e3)}}))};var s,r=(s=a(75564))&&s.__esModule?s:{default:s},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(58200));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(){window.cordova?approuter.dashboard():i.takeMeHomeOrNext()}},24508:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(67294)),i=(s=a(16232))&&s.__esModule?s:{default:s},n=a(52224);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(o=function(e){return e?a:t})(e)}function l(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.Component{constructor(e){super(e),l(this,"_events",null),l(this,"updateModals",(()=>{this.setState({modals:approuter.modals})})),this.state={modals:[]},approuter.modals&&(this.state.modals=approuter.modals)}componentDidMount(){const e=approuter.events.group();this._events=e,e.on("show_modal",this.updateModals),e.on("hide_modal",this.updateModals)}componentWillUnmount(){this._events.unbindAll()}render(){const{modals:e}=this.state;return r.default.createElement("div",{style:{position:"fixed",zIndex:1100}},r.default.createElement(n.TransitionGroup,null,e.map(((e,t)=>r.default.createElement(n.CSSTransition,{key:t,classNames:"edmodal",timeout:{enter:600,exit:0}},r.default.createElement("div",{key:e.props.id},e))))))}}class d extends r.default.Component{constructor(e){super(e),l(this,"onResize",(()=>{this.props.hasSize&&this.setState({size:{width:window.innerWidth,height:window.innerHeight}})})),l(this,"onTouchMove",(e=>{this.props.noTouch&&e.preventDefault()})),this.onResize=((e,t)=>{let a=0;return function(){let s=(new Date).getTime();if(!(s-a<t))return a=s,e(...arguments)}})(this.onResize.bind(this),500),this.root=approuter.root,this.root.jquery&&(this.root=this.root.get(0)),this.state={size:null},this.props.hasSize&&(this.state.size={width:window.innerWidth,height:window.innerHeight})}render(){return r.default.createElement(r.Suspense,{fallback:r.default.createElement("div",null,"Loading...")},r.default.createElement("div",{id:"root"},r.default.createElement(c,null),this.props.header?r.default.createElement(i.default,null):null,this.props.hasSize?r.default.Children.map(this.props.children,(e=>r.default.cloneElement(e,{window_width:this.state.size.width,window_height:this.state.size.height}))):this.props.children))}updateEnvironment(e,t){if(t){if(t.styles)for(let e of t.styles)this.root.classList.contains(e)&&this.root.classList.remove(e);else t.style&&this.root.classList.remove(t.style);t.rootId&&this.root.classList.remove("id"),0==t.scroll&&document.body.classList.remove("noscroll-body"),t.darkBody&&document.body.classList.remove("dark-body"),t.darkerBody&&document.body.classList.remove("darker-body"),t.cloudBody&&document.body.classList.remove("tpc-cloud-body"),t.skyBody&&document.body.classList.remove("sky-body"),t.title&&(document.title="EdClub")}if(e){if(e.styles)for(let t of e.styles)t&&this.root.classList.add(t);else e.style&&this.root.classList.add(e.style);e.rootId?this.root.id=e.rootId:this.root.id="",0==e.scroll&&document.body.classList.add("noscroll-body"),e.darkBody&&document.body.classList.add("dark-body"),e.darkerBody&&document.body.classList.add("darker-body"),e.cloudBody&&document.body.classList.add("tpc-cloud-body"),e.skyBody&&document.body.classList.add("sky-body"),e.title?document.title=e.title+" - EdClub":approuter.current_app&&approuter.current_app.name&&(document.title=approuter.current_app.name+" - EdClub")}}componentWillMount(){this.updateEnvironment(this.props)}componentDidMount(){window.addEventListener("resize",this.onResize),window.addEventListener("touchmove",this.onTouchMove),this.props.onMount&&this.props.onMount()}componentWillUpdate(e,t){this.updateEnvironment(e,this.props)}componentWillUnmount(){this.updateEnvironment(null,this.props),window.removeEventListener("resize",this.onResize),window.removeEventListener("touchmove",this.onTouchMove)}}t.default=d,d.defaultProps={header:!0,scroll:!0,darkBody:!1,darkerBody:!1,onMount:null,hasSize:!1,noTouch:!1,style:null,title:null}},17858:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Persistence=void 0,t.delete_from_permanent_storage=o,t.get_from_permanent_storage=n,t.registerApprouterEventBus=function(e){e.on("logout",l)},t.set_in_permanent_storage=i;let s=(0,a(43393).List)();const r="storage_";function i(e,t){if(!a.g.localStorage)return!1;e=r+e;const s=JSON.stringify(t);return a.g.localStorage.setItem(e,s),!0}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!a.g.localStorage)return t;e=r+e;const s=a.g.localStorage.getItem(e);if(!s)return t;let i;try{i=JSON.parse(s)}catch(e){return t}return i}function o(e){a.g.localStorage&&(e=r+e,a.g.localStorage.removeItem(e))}function l(){s.map((function(e){e.invalidate()}))}t.Persistence=class{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.values={},this.storageKey=e,t&&(s=s.push(this))}get(e){return n(this.storageKey,this.values)[e]}set(e,t){const a=n(this.storageKey,this.values);a[e]=t,i(this.storageKey,a)}invalidate(){o(this.storageKey)}}},56657:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolveAppRoute=async function(e){const t=p[e];if(!t)return;return"function"==typeof t?await t():t.app},t.url_routes=void 0;var s=l(a(25018)),r=a(52058),i=l(a(65489)),n=l(a(62342)),o=l(a(25318));function l(e){return e&&e.__esModule?e:{default:e}}const c=async e=>(await Promise.all([a.e(736),a.e(486)]).then(a.bind(a,42668))).default[e],d=async e=>(await Promise.all([a.e(736),a.e(742)]).then(a.bind(a,62750))).default[e],u=async e=>(await Promise.all([a.e(736),a.e(930),a.e(900)]).then(a.bind(a,53705))).default[e],p={"typing.classic_typing_app":async()=>await d("classic_typing_app"),"typing.videotyping_app":async()=>await d("videotyping_app"),"typing.boxed_typing":async()=>await d("boxed_typing"),"spelling.cards":async()=>await u("spelling_cards_app"),"spelling.dictation":async()=>await u("spelling_dictation_app"),"spelling.story":async()=>await u("spelling_story_app"),"spelling.dropquiz":async()=>await u("spelling_dropquiz_app"),"spelling.shuffle":async()=>await u("spelling_shuffle_app"),"spelling.crossword":async()=>await u("spelling_crossword_app"),"spelling.fillblank":async()=>await u("spelling_fillblank_app"),"spelling.spellit":async()=>await u("spelling_spellit_app"),reading:async()=>await(async e=>(await Promise.all([a.e(736),a.e(930),a.e(602)]).then(a.bind(a,97739))).default[e])("reading_app"),"spelling.quiz":async()=>await u("quiz_app"),"spelling.proofreading":async()=>await u("proofreading_app"),"junior.result_page":async()=>await d("junior_result_page"),"shared.login_app":{app:r.login_app},"shared.signup_app":{app:r.signup_app},"shared.school_login_app":{app:r.school_login_app},"shared.school_signup_app":{app:r.school_signup_app},"shared.not_found_app":{app:i.default},"shared.frame_app":{app:n.default},"shared.temp_games_loader":{app:o.default},"typing.games.BalloonValley":{app:o.default},"typing.games.MonsterAttack":{app:o.default},"typing.games.TempleBash":{app:o.default},"typing.games.FloatingBubbles":{app:o.default},"typing.games.AppleThieves":{app:o.default},"student.dashboard_app":async()=>await c("dashboard_app"),"student.more_tests":async()=>await c("more_tests"),"student.lessonplan":async()=>await c("lessonplan_app"),"student.testplan":async()=>await c("testplan_app"),"student.videoplayer":async()=>await c("video_app"),decisionmaking:async()=>await c("decisionmaking_app"),"student.profile.changepassword_app":async()=>await c("changepassword_app"),"student.profile.profiledetails_app":async()=>await c("profiledetails_app"),"student.profile.billing_app":async()=>await c("billing_app"),"student.profile.license_app":async()=>await c("license_app"),"student.profile.plans_app":async()=>await c("plans_app"),"student.profile.deleteaccount_app":async()=>await c("deleteaccount_app"),"student.scoreboard":async()=>await c("scoreboard_app"),"student.stats_app":async()=>await c("stats_app"),"student.badge_app":async()=>await c("badge_app"),"student.catalog_app":async()=>await c("catalog_app"),"student.placementtest_app":async()=>await c("placementtest_app"),"student.lesson_locked":{app:e=>{const t=e.is_test?"This test is no longer available to you.":"Your teacher has not assigned this lesson to you yet. Consider practicing your previous lessons a bit more.";return(0,s.default)(e.name,"Lesson Locked",t,"Go Back",approuter.exit_lesson)}}};let h=t.url_routes=[{name:"dashboard",path:"/sportal/",app:"student.dashboard_app"},{name:"edit_password",path:"/sportal/change_password.html",app:"student.profile.changepassword_app"},{name:"profile",path:"/sportal/profile.html",app:"student.profile.profiledetails_app"},{name:"delete_account",path:"/sportal/delete_account.html",app:"student.profile.deleteaccount_app"},{name:"license",path:"/sportal/license/",app:"student.profile.license_app"},{name:"badges_page",path:"/sportal/badges.html",app:"student.badge_app"},{name:"stats_page",path:"/sportal/stats.html",app:"student.stats_app"},{name:"catalog_page",path:"/sportal/catalog.html",app:"student.catalog_app"},{name:"more_tests",path:"/sportal/more_tests.html",app:"student.more_tests"},{name:"test",path:"/sportal/test-:id(-?\\d+).play",app:"student.testplan"},{name:"lesson",path:"/sportal/program-:program_id(\\d+)/:id(\\d+).play",app:"lesson"},{name:"lessonplan",path:"/sportal/program-:id(-?\\d+).game",app:"student.lessonplan"},{name:"placement",path:"/sportal/program-:id.placement",app:"student.placementtest_app"},{name:"scoreboard",path:"/sportal/teamprogram-:id.scoreboard",app:"student.scoreboard"}];t.url_routes=h=h.concat([{name:"student_plans",path:"/sportal/plans.html",app:"student.profile.plans_app"},{name:"student_billing",path:"/sportal/billing.html",app:"student.profile.billing_app"},{name:"login_page",path:"/login.html",app:"shared.login_app"},{name:"signup_page",path:"/signup.html",app:"shared.signup_app"}])},57618:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSessions=t.flushSessions=t.fetchSessions=void 0,t.registerLoginSession=async function(e){return new Promise((function(t,a){c({login_token:e}).then((function(){t(i(r[r.length-1]))})).catch(a)}))},t.setIsHeaderToken=t.removeSession=void 0;var s=a(56392);let r;const i=e=>JSON.parse(JSON.stringify(e)),n=()=>localStorage.getItem("rt")||"",o=e=>localStorage.setItem("rt",e);let l=!1;function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,a){const i=`${(0,s.getBaseUrl)()}/auth/refresh_tokens/`;const c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("Content-Type","application/json"),l&&c.setRequestHeader("Authorization",n()),c.addEventListener("load",(function(){200===this.status?(r=JSON.parse(this.responseText),l&&o(this.getResponseHeader("pragma")),window.DEFAULT_ACCOUNT_DOMAIN=this.getResponseHeader("DEFAULT_ACCOUNT_DOMAIN"),t(r)):400===this.status&&a(`RefreshToken Payload Failed: ${JSON.stringify(e)}`)})),c.send(JSON.stringify(e))}))}t.setIsHeaderToken=e=>l=e;t.fetchSessions=async e=>await c({domain:e});t.flushSessions=async()=>await c({flush:!0});t.removeSession=async e=>await c({remove_domain:e});t.getSessions=()=>i(r)},71327:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.add_get_param=function(e,t,a){if(e.indexOf(t+"=")>=0){var s=e.substring(0,e.indexOf(t)),r=e.substring(e.indexOf(t));r=(r=r.substring(r.indexOf("=")+1)).indexOf("&")>=0?r.substring(r.indexOf("&")):"",e=s+t+"="+a+r}else e.indexOf("?")<0?e+="?"+t+"="+a:e+="&"+t+"="+a;return e},t.calc_accuracy=function(e,t){return 0==t?100:Math.round(100*e/t)},t.calc_wpm=function(e,t){return parseInt(e/5/(t/6e4)+.5)},t.choose_random_field=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a){let a=[];for(const s of t)e[s]&&a.push(s);t=a}const s=t[Math.floor(Math.random()*t.length)];return e[s]},t.cn=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.join(" ")},t.cx=function(e){const t=[];for(let a in e)e[a]&&t.push(a);return t.join(" ")},t.dangerous_thread_blocking_sleep=function(e){for(var t=(new Date).getTime(),a=0;a<1e7&&!((new Date).getTime()-t>e);a++);},t.detect_os=n,t.filterString=function(e,t,a){var s=e.split(t),r=new Set(s.filter(a));return s.filter((e=>!r.has(e))).join(t)},t.flush_timeouts=function(){for(let e of l)clearInterval(e);for(let e of o)clearTimeout(e);l=[],o=[]},t.get2dict=function(){var e,t={},a=/\+/g,s=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(a," "))},i=window.location.search.substring(1);for(;e=s.exec(i);)t[r(e[1])]=r(e[2]);return t},t.get_practice_time_goals=function(e){var t;t=e;return t?{typing_goal_daily:t.typing_goal_daily||15,typing_goal_weekly:t.typing_goal_weekly||60,weekday_start:t.weekday_start||0}:{typing_goal_daily:15,typing_goal_weekly:60,weekday_start:0}},t.get_voice=function(e){var t=speechSynthesis.getVoices();if(!t||!t.length)return;for(let a of t)if(a.voiceURI==e)return a;for(let e of t)if(e.lang==navigator.language)return e;for(let e of t)if("en-US"==e.lang)return e;return t[0]},t.intcomma=function e(t){var a=String(t),s=a.replace(/^(-?\d+)(\d{3})/,"$1,$2");return a==s?s:e(s)},t.isIOS=t.isFirefox=void 0,t.isKorean=function(e){var t;return"ko"===(null===(t=r.default.getLocale(e))||void 0===t?void 0:t.langCode)},t.isPinyin=function(e){var t;return"zh"===(null===(t=r.default.getLocale(e))||void 0===t?void 0:t.langCode)},t.isSafari=void 0,t.isUpperCase=function(e){return!!e&&e!=e.toLocaleLowerCase()},t.jp_input_punctuation_map=function(){return{"":"=","":"."}},t.pinyin_input_punctuation_map=function(){return{"":"\\","":"|","":"`","":"~","":"!","":"$","":"(","":")","":";","":":","":'"',"":"'","":",","":".","":"<","":">","":"?","":"[","":"]","":"{","":"}"}},t.preload=function(e){if(e){var t=(0,s.default)("<div>").hide();(0,s.default)(e).each((function(e,a){t.append((0,s.default)("<img>").attr("src","https://static.typingclub.com/m/"+a))})),(0,s.default)("body").append(t)}},t.px2int=function(e){return parseFloat(e.replace(/\D\./g,""))},t.setInterval=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=setInterval(e,t);return l.push(a),a},t.setTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=setTimeout(e,t);return o.push(a),a},t.show_ios_focus_popup=function(e,t){var a=(0,s.default)("<div />").html(e);function r(){t&&t[0].focus(),setTimeout((()=>a.remove()),100)}if(a.append((0,s.default)("<img />").attr("src","https://static.typingclub.com/m/engine/img/touch-here.png").css({paddingLeft:40,height:140,width:137})),a.css({position:"absolute",left:0,right:0,top:"30%",background:"rgba(0, 0, 0, .9)",fontSize:"50px",boxShadow:"0 0 200px #444",color:"white",textAlign:"center",padding:50,zIndex:7}),t)a.click(r);else{var i=(0,s.default)("<input/>").css({position:"absolute",top:0,bottom:0,left:0,width:"100%",opacity:0});a.append(i),i.focus(r)}return(0,s.default)("body").prepend(a),a},t.sleep=function(e){return new Promise((t=>setTimeout(t,e)))},t.speech_support=void 0,t.sticky_key_instruction_link=function(){return{Windows:"http://disability.illinois.edu/academic-support/assistive-technology/windows-7-sticky-keys",iOS:"http://www.apple.com/accessibility/ios/#motor-skills",Mac:"https://support.apple.com/kb/PH18386?locale=en_US",Chromebook:"https://support.google.com/chromebook/answer/177893"}[n()]||"https://en.wikipedia.org/wiki/Sticky_keys"},t.tracing_proxy=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Proxy(t,Object.assign({},a,{get:function(t,a){if(console.log(e,a),a in t)return t[a]},set:function(t,a,s){console.log(`${e}<---`,a,s),t[a]=s}}))},t.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)};var s=i(a(69606)),r=i(a(50751));function i(e){return e&&e.__esModule?e:{default:e}}window.wait_preload=function(e){var t,a,r,i,n=0;t=(0,s.default)("<div />").css({position:"absolute",top:-500,"font-family":"'Droid Sans Mono', 'Lucida Console', Monaco, monospace","font-size":"100px"}),r=(0,s.default)("<span>i</span>"),i=(0,s.default)("<span>W</span>"),a=(0,s.default)("<span>W</span>").css({"font-family":"Arial"}),t.append(r).append(i).append(a),(0,s.default)("body").prepend(t),function o(){var l=r.width(),c=i.width(),d=i.height(),u=a.height();l!=c||d==u?++n>5?(console.warn('Font defaulted back to "courier"'),t.remove(),(0,s.default)("#arena-text").css("font-family","courier"),e()):setTimeout(o,500):(t.remove(),e())}()},s.default.fn.extend({animateCss:function(e,t){setTimeout(function(){(0,s.default)(this).show().addClass("animated "+e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){(0,s.default)(this).removeClass("animated "+e),t&&t()}.bind(this))}.bind(this),3)}});t.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),t.isIOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)||navigator.platform.match(/(iPad|iPhone|iPod)/g)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,t.isFirefox=navigator.userAgent.match(/firefox/gi);function n(){var e=navigator.userAgent;for(var t of[{s:"Windows",r:/Windows/},{s:"Android",r:/Android/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac",r:/Mac OS X/},{s:"Chromebook",r:/\bCrOS\b/}])if(t.r.test(e))return t.s;return"unknown"}let o=[],l=[];t.speech_support=!!window.speechSynthesis},47414:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}return s.default=e,a&&a.set(e,s),s}(a(71327)),r=a(50751);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}const n=s.isIOS,o={" ":"space","\t":"tab key","\n":"enter key","~":"tilde","`":"backtick","!":"exclamation mark","@":"at sign","#":"number sign","":"pound symbol","":"euro sign",$:"dollar sign","":"cent sign","":"yuan sign","":"paragraph sign","%":"percent","":"degree","^":"caret","&":"ampersand","*":"star","(":"open parenthesis",")":"close parenthesis","-":"dash",_:"underscore","+":"plus","=":"equal sign","{":"open curly bracket","}":"close curly bracket","[":"open bracket","]":"closed bracket","|":"pipe","\\":"backslash","/":"forward slash",":":"colon",";":"semicolon",'"':"quotation mark","'":"apostrophe","<":"less than sign",">":"greater than sign",",":"comma",".":"period","?":"question mark",opt:"option key"};t.default=class{constructor(){this.protect_speech=!1,this.approuterSpeakTag=null,this.isSpeaking=!1,this.queue=[],this.next_utter_timeout_id,this.flags={said_number_count:0},window.TTS&&(window.TTS.stop=function(){window.TTS.speak({text:"",locale:"en-US",rate:1},(()=>{}),(()=>{}))})}static trans_chr_to_text(e){return o[e]?o[e]:e}get_voice(e){return this.selected_voice&&this.selected_voice.voiceURI==e||(this.selected_voice=s.get_voice(e)),this.selected_voice}clear(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.queue.length?(this.queue=[this.queue[0]],this.next_utter_timeout_id?(clearTimeout(this.next_utter_timeout_id),this.done_wait(),this):!this.protect_speech&&e&&this.isSpeaking?(this.approuterSpeakTag?window.approuter.stopAudio(this.approuterSpeakTag):(window.TTS?window.TTS.stop():window.speechSynthesis&&(speechSynthesis.cancel(),this.queue=[{duration:250}],this.next()),this.isSpeaking=!1),this):this):this}done_wait(){this.next_utter_timeout_id=null,this.queue.shift(),this.next()}next(){if(0!=this.queue.length){var e=this.queue[0];e.duration?this.next_utter_timeout_id=setTimeout(this.done_wait.bind(this),e.duration):(e.protect&&(this.protect_speech=!0),this._utter(e.text,approuter.profile,(()=>{this.queue.shift(),this.next()})))}}wait(e){return this.queue.push({duration:e}),1==this.queue.length&&this.next(),this}utter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?(this.queue.push({text:e,protect:t}),1==this.queue.length&&this.next(),this):this}_utter(e,t,a){if(!e)return;const s=()=>{this.protect_speech=!1,this.isSpeaking=!1,a()};if(!n&&!window.SpeechSynthesisUtterance&&!window.TTS)return console.warn("SpeechSynthesisUtterance not available");1==e.length&&(/[0-9]/.test(e)&&++this.flags.said_number_count<3?e=(0,r.t)("number {{digit}}",{digit:e}):o[e]?e=(0,r.t)(o[e]):e.toUpperCase()!=e.toLowerCase()&&e.toUpperCase()==e&&(e=(0,r.t)("capital {{letter}}",{letter:e})));const i=e=>(e||100)/100;if(n&&"en_US"===t.locale)this.approuterSpeakTag&&window.approuter.stopAudio(this.approuterSpeakTag),window.approuter.speak(e).then((e=>{this.isSpeaking=!0,this.approuterSpeakTag=e,window.approuter.waitAudio(e).then((()=>{this.approuterSpeakTag=null,s()}))}));else if(window.TTS)this.isSpeaking=!0,window.TTS.speak({text:e,volume:i(t.voice_volume),rate:1.6,locale:"en-US"},(()=>s()),(()=>{}));else{var l=new SpeechSynthesisUtterance;l.voice=this.voice=this.get_voice(t.voice_name),l.volume=i(t.voice_volume),l.rate=i(t.voice_rate),l.text=e,l.pitch=i(t.voice_pitch),l.lang=t.locale||"en-US",speechSynthesis.speak(l),l.onstart=function(e){this.isSpeaking=!0}.bind(this),l.onend=()=>s()}}}},25018:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r,i){return s.default.createElement(n.default,{header:!1,darkBody:!0},s.default.createElement(l,{title:e,header:t,body:a,button_caption:r,button_callback:i}))};var s=o(a(67294)),r=o(a(26314)),i=o(a(57023)),n=o(a(24508));function o(e){return e&&e.__esModule?e:{default:e}}class l extends s.default.Component{constructor(e){super(e)}render(){const e=this.props;return s.default.createElement("div",null,s.default.createElement(i.default,{name:"",profile:approuter.profile}),s.default.createElement(r.default,{width:550},s.default.createElement("h6",null,e.title),s.default.createElement("h1",null,e.header),s.default.createElement("p",null,e.body),s.default.createElement("a",{onClick:e.button_callback,className:"btn btn-primary btn-large"},e.button_caption)))}}},52058:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listInOauthOptions=t.TPLoginSignup=void 0,t.login_app=j,t.school_login_app=$,t.school_signup_app=z,t.signup_app=O;var s=a(67449),r=m(a(75564)),i=m(a(24508)),n=m(a(67294)),o=(m(a(45697)),m(a(69606))),l=a(50751),c=m(a(75933)),d=f(a(71327)),u=a(99332),p=f(a(58200));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}function m(e){return e&&e.__esModule?e:{default:e}}function _(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends n.default.Component{constructor(e){super(e),this.state={},r.default.getSchoolAccount("www",(e=>this.setState({oauths:e.oauths}))),c.default.load({google:{families:["Indie+Flower","Roboto:100,300,400,700"]}})}showAccountSelection(e){this.setState({credentials:e})}render(){const{is_signup:e}=this.props,{oauths:t,credentials:a,loading:r}=this.state;let i,n;n=e?(0,s.jsx)("p",null,(0,l.t)("You are about to sign up for TypingClub's Individual Edition. If you are an instructor and wish to create a school account"),", ",(0,s.jsx)("a",{href:"https://s.typingclub.com/schools/signup.html"},(0,l.t)("use this form instead."))):window.cordova?(0,s.jsx)("div",null,""):(0,s.jsx)("p",{role:"heading"},(0,l.t)("For school accounts, please go to your school login page.")," ",(0,s.jsx)("a",{href:"https://s.typingclub.com/find-school-code.html"},(0,l.t)("Use this form to look up your school code.")));const o=e=>this.setState({loading:e});return i=a?(0,s.jsx)(b,{t:l.t,credentials:a}):this.state.forgotPassword?(0,s.jsx)(v,{t:l.t,goBack:()=>this.setState({forgotPassword:!1})}):this.state.classSignupCode?(0,s.jsx)(y,{t:l.t,goBack:()=>this.setState({classSignupCode:!1})}):t?(0,s.jsx)("div",{className:"container"},(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,s.jsx)("a",{tabIndex:"-1",href:"https://www.typingclub.com"},(0,s.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,s.jsx)("div",{className:"ed-tpc-logo"},(0,s.jsx)("a",{tabIndex:"-1",href:"https://www.typingclub.com"},"Individual Edition")),n),(0,s.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},r?(0,s.jsx)("div",{className:"ed-sign",style:{position:"relative"}},(0,s.jsx)("h3",{style:{textAlign:"center",padding:"100px 0 250px"}},"Checking profile..."),(0,s.jsx)("div",{className:"boxLoading boxLoading-dark"}),(0,s.jsx)("a",{onClick:()=>o(!1)}," ",(0,l.t)("Back to "+(e?"Sign Up":"Log-in")+" Page"))):e?(0,s.jsx)(E,{t:l.t,handler:this,oauths:t,toggleLoading:o,classSignupCode:()=>this.setState({classSignupCode:!0})}):(0,s.jsx)(x,{t:l.t,handler:this,oauths:t,toggleLoading:o,forgotPassword:()=>this.setState({forgotPassword:!0})}),!r&&(0,s.jsx)("div",{className:"ed-account"},e?(0,s.jsx)("div",null,(0,l.t)("Already have an account?")," ",(0,s.jsx)("a",{onClick:approuter.login_page},(0,l.t)("Log-in"))):(0,s.jsx)("div",null,(0,l.t)("Don't have an account?")," ",(0,s.jsx)("a",{id:"signup-link",onClick:approuter.signup_page},(0,l.t)("Sign up"))))))):(0,s.jsx)("div",{className:"boxLoading"}),(0,s.jsx)("div",null,(0,s.jsx)("div",{className:"ed-log-in-container"},i),(0,s.jsx)("div",{className:"ed-footer-nav container"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},"TypingClub"),(0,s.jsx)("a",{href:"https://www.typingclub.com/privacy.html"},(0,l.t)("Privacy Policy")),(0,s.jsx)("a",{href:"https://www.typingclub.com/terms.html"},(0,l.t)("Terms of Service"))))}}t.TPLoginSignup=g;class y extends n.default.Component{constructor(){super(...arguments),_(this,"state",{})}componentDidMount(){this.refs.classCode.focus()}checkClassCode(e){this.setState({error:null}),e&&r.default.checkClassCode("",e,(t=>{t?window.location=`https://s.typingclub.com/signup/${e}`:this.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})}))}render(){const{error:e}=this.state;return(0,s.jsx)("div",{className:"container"},(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},(0,s.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,s.jsx)("div",{className:"ed-tpc-logo"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},"Individual Edition")),(0,s.jsx)("p",{style:{textAlign:"center"}},(0,l.t)("Use this page to sign up with a class code."))),(0,s.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},(0,s.jsx)("div",{className:"ed-sign"},(0,s.jsx)("p",null,(0,l.t)("Enter your class code here:")),(0,s.jsx)("div",{className:"form-group"},(0,s.jsx)("input",{ref:"classCode",className:"inpt ed-input-log-in",placeholder:"Your class code",onKeyPress:e=>13===e.charCode&&this.checkClassCode(this.refs.classCode.value)})),(0,s.jsx)("div",{className:"errorlist",role:"alert"},e&&(0,s.jsx)("div",{id:"error-container",className:"error"},e)),(0,s.jsx)("button",{className:"btn log-in-with",style:{textAlign:"center"},onClick:()=>this.checkClassCode(this.refs.classCode.value)},(0,l.t)("Sign Up")),(0,s.jsx)("br",null),(0,s.jsx)("br",null),(0,s.jsx)("a",{onClick:this.props.goBack}," ",(0,l.t)("Back to Sign Up Page"))))))}}class v extends n.default.Component{constructor(){super(...arguments),_(this,"state",{})}render(){const{goBack:e}=this.props,{email_sent:t}=this.state;return(0,s.jsx)("div",{className:"container"},(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-4 col-lg-offset-1 col-md-4 col-sm-4 ed-log-in-logo"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},(0,s.jsx)("img",{src:"https://static.typingclub.com/m/corp2/img/typingclub_logo.png"})),(0,s.jsx)("div",{className:"ed-tpc-logo"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},"Individual Edition")),(0,s.jsx)("p",{style:{textAlign:"center"}},(0,l.t)("Use this page to reset your password."))),(0,s.jsx)("div",{className:"col-lg-5 col-lg-offset-1 col-md-6 col-md-offset-1 col-sm-7 col-sm-offset-1"},(0,s.jsx)("div",{className:"ed-sign"},t?(0,s.jsx)("div",null,(0,s.jsx)("b",{style:{fontSize:18}},(0,l.t)("Email Sent"),"!"),(0,s.jsx)("br",null),(0,s.jsx)("br",null),(0,s.jsx)("p",null,(0,l.t)("Please check your email for further instructions to reset your password."))):(0,s.jsx)("div",null,(0,s.jsx)("p",null,(0,l.t)("Please provide your email address:")),(0,s.jsx)("div",{className:"form-group"},(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"text",ref:"email","aria-label":"Email",placeholder:"Your email address"})),(0,s.jsx)("button",{className:"btn log-in-with",onClick:()=>{const e=this.refs.email.value;this.setState({email_sent:!1,email:e}),e&&r.default.forgotPassword("www",e,(()=>this.setState({email_sent:!0})))}},(0,l.t)("Reset Password"))),(0,s.jsx)("br",null),(0,s.jsx)("a",{onClick:e}," ",(0,l.t)("Back to Login Page"))))))}}const b=e=>{let{t:t,credentials:a}=e;return(0,s.jsx)("div",{className:"container"},(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 ed-log-in-logo"},(0,s.jsx)("a",{href:"https://www.typingclub.com",className:"tpc-logo-center"},(0,s.jsx)("img",{src:"https://static.typingclub.com/m/pub/images/tpc-logo.svg"})),(0,s.jsx)("a",{className:"ed-tpc-logo-center",href:"https://www.typingclub.com"},"TypingClub"),(0,s.jsx)("div",{className:"ed-sign ed-sign-center"},(0,s.jsx)("h4",null,"Choose Your Account:"),(0,s.jsx)("p",null,"You seem to have more than one account with TypingClub."),a.user&&(0,s.jsx)("div",null,(0,s.jsx)("div",{className:"ed-gray-line"}),(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,s.jsx)("h5",null,"Individual Edition"),(0,s.jsx)("h6",null,a.user.student_name),(0,s.jsx)("h6",{style:{color:"gray",textAlign:"left"}},(0,s.jsx)("b",null,"www"),".typingclub.com")),(0,s.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,s.jsx)("button",{onClick:()=>p.signUserIn(a.user.login_token).then(p.takeMeHomeOrNext),className:"btn log-in-with"},"Sign in")))),(0,s.jsx)("div",null,a.tpc_users.map((e=>(0,s.jsx)("div",{key:e.domain},(0,s.jsx)("div",{className:"ed-gray-line"}),(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,s.jsx)("h5",null,"School Edition"),(0,s.jsx)("h6",null,e.name),(0,s.jsx)("h6",{style:{color:"gray",textAlign:"left"}},(0,s.jsx)("b",null,e.domain),".typingclub.com")),(0,s.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-6"},(0,s.jsx)("button",{onClick:()=>p.signUserIn(e.login_token).then(p.takeMeHomeOrNext),className:"btn log-in-with"},"Sign in")))))),(0,s.jsx)("div",{className:"ed-gray-line"}))))))},w={google:{name:"Google",icon:"google-icon",background:"white"},office365:{name:"Office 365",icon:"office-365-white"},clever:{name:"Clever",icon:"clever-icon-white"}},k=(e,t,a,r,i)=>(0,s.jsx)("div",null,Object.keys(w).map((n=>e[n]&&(0,s.jsx)("a",{key:n,className:"btn log-in-with",onClick:()=>{if("clever"===n){const t=e.clever;var s=Object.assign({response_type:"code",redirect_uri:e.BASE_DOMAIN+"/cleverOauth"},t.PARAMS);window.location=t.AUTHORIZE_URL+"?"+o.default.param(s)}else(0,u.oauthWithPopup)(n,t,e,i).then(a).catch(r)},"aria-label":(t?"Login":"Signup")+" with your "+w[n].name+" account"},(0,s.jsx)("img",{style:{background:w[n].background||"inherit"},src:"https://static.typingclub.com/m/pub/images/"+w[n].icon+".svg"}),"Sign ",t?"up":"in"," with ",w[n].name))));t.listInOauthOptions=k;const x=e=>{let{t:t,handler:a,oauths:i,forgotPassword:n,toggleLoading:l}=e;return(0,s.jsx)("div",{className:"ed-sign"},k(i,!1,(e=>{e?a.showAccountSelection(e):approuter.dashboard()}),(e=>{var a;a=e?e.responseJSON:t("You do not have an account with us yet.")+" <a onclick=\"document.getElementById('signup-link').click()\">"+t("Do you want to create an account now?")+"</a>",setTimeout((()=>(0,o.default)("#error-container").html(a)))}),l),(0,s.jsx)("div",{className:"ed-blue-line-left"}),(0,s.jsx)("div",{className:"ed-or"},t("OR")),(0,s.jsx)("div",{className:"ed-blue-line-right"}),(0,s.jsx)("div",{className:"form-group"},(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"username","aria-label":"Username or email",autoFocus:!0,placeholder:t("Username or Email"),onKeyPress:e=>{if(13===e.charCode){const e=(0,o.default)("#password");e.val()?(0,o.default)("#login-with-password").click():e.focus()}}}),(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:t("Password"),onKeyPress:e=>13===e.charCode&&(0,o.default)("#login-with-password").click()})),(0,s.jsx)("div",{className:"errorlist",role:"alert"},(0,s.jsx)("div",{id:"error-container",className:"error"})),(0,s.jsx)("div",{style:{marginTop:25}},(0,s.jsx)("button",{id:"login-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:()=>{const e=(0,o.default)("#username").val(),a=(0,o.default)("#password").val();e&&a?((0,o.default)("#error-container").html(""),l&&l(!0),r.default.getUserToken("www",e,a,(e=>p.signUserIn(e.login_token).then(p.takeMeHomeOrNext)),(e=>{l&&l(!1),(0,o.default)("#password").val(""),500==e.status?(0,o.default)("#error-container").html(N(t).ServerError):(0,o.default)("#error-container").html(t("The username and password you entered did not match our records. Please double-check and try again."))}))):(0,o.default)("#error-container").html(t("Please enter both username and password"))}},t("Sign in"))),(0,s.jsx)("div",{className:"row"},(0,s.jsx)("div",{className:"col-md-6"}),(0,s.jsx)("div",{className:"col-md-6"},(0,s.jsx)("div",{className:"ed-forget-password"},(0,s.jsx)("a",{onClick:n},t("Forgot your password?"))))))},E=e=>{let{t:t,handler:a,oauths:r,classSignupCode:i,toggleLoading:n}=e;return(0,s.jsx)("div",{className:"ed-sign"},(0,s.jsx)("p",{style:{textAlign:"right",fontSize:18,marginBottom:15}},(0,s.jsx)("a",{onClick:i},t("I have a class signup code"))),k(r,!0,(e=>approuter.dashboard()),(()=>(0,o.default)("#error-container").html("You already have an account with us. Do you want to signin instead?")),n),(0,s.jsx)("div",{className:"ed-blue-line-left"}),(0,s.jsx)("div",{className:"ed-or"},t("OR")),(0,s.jsx)("div",{className:"ed-blue-line-right"}),(0,s.jsx)("div",{className:"form-group"},(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"fname","aria-label":"First Name",autoFocus:!0,placeholder:t("First Name"),onKeyPress:e=>13===e.charCode&&(0,o.default)("#lname").focus()}),(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"lname","aria-label":"Last Name",placeholder:t("Last Name"),onKeyPress:e=>13===e.charCode&&(0,o.default)("#username").focus()}),(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"text",id:"username_or_email","aria-label":"Username or email",placeholder:t("Username or Email"),onKeyPress:e=>13===e.charCode&&(0,o.default)("#password").focus()}),(0,s.jsx)("input",{className:"inpt ed-input-log-in",type:"password",id:"password","aria-label":"Enter password",placeholder:t("Password"),onKeyPress:e=>13===e.charCode&&(0,o.default)("#sign-up-with-password").click()})),(0,s.jsx)("div",{className:"errorlist",role:"alert"},(0,s.jsx)("div",{id:"error-container",className:"error"})),(0,s.jsx)("div",{style:{marginTop:25}},(0,s.jsx)("button",{id:"sign-up-with-password",className:"btn log-in-with",style:{textAlign:"center"},onClick:()=>{const e=(0,o.default)("#fname").val(),a=(0,o.default)("#lname").val(),s=(0,o.default)("#password").val(),r=(0,o.default)("#username_or_email").val();if(!e)return void(0,o.default)("#error-container").html(t("Please enter your first name"));if(!r||!s)return void(0,o.default)("#error-container").html(t("Please enter both username and password"));const i={fname:e,lname:a,password:s};d.validateEmail(r)?i.email=r:i.username=r,(0,o.default)("#error-container").html(""),n&&n(!0),approuter.update_profile(i).then(approuter.dashboard).catch((s=>{n&&n(!1),setTimeout((()=>{(0,o.default)("#fname").val(e),(0,o.default)("#lname").val(a);const i=s.responseJSON;i&&i.student?i.student.email?(0,o.default)("#error-container").html(t('Email "{{email}}" is already taken',{email:r})):(0,o.default)("#error-container").html(t('Username "{{username}}" is already taken',{username:r})):(0,o.default)("#error-container").html(t("Some unexpected error occurred. Please try again later."))}))}))}},t("Sign Up"))))};function S(e){return(0,s.jsx)(i.default,{style:"ENTRY",cloudBody:!0,header:null},(0,s.jsx)("img",{src:"/m/pub/images/tpc-clouds-background.svg",className:"tpc-cloud"}),(0,s.jsx)(g,{is_signup:e}))}function j(e,t){if(!t||"blank"===t.type||t.is_anonymous)return p.isLoggedIn(),S(!1);p.takeMeHome(p.getSession())}function O(e,t){if(!t||"blank"===t.type||t.is_anonymous)return S(!0);approuter.dashboard()}j.authorization=()=>!0,O.authorization=()=>!0;const C={google:{name:"Google",icon:"google-icon",background:"white"},clever:{name:"Clever",icon:"clever-icon-white"},classlink:{name:"Classlink",icon:"classlink-icon-white"},office365:{name:"Office 365",icon:"office-365-white"}},N=()=>({InactiveUser:(0,l.t)("Your account is no longer active. Please speak to your instructor to have your account reactivated."),TeacherLoginNotSupported:(0,l.t)("Teachers, please sign in using a browser."),UserPass:(0,l.t)("Username and/or Password is wrong."),UserNotFound:(0,l.t)("User not found."),SchoolCode:(0,l.t)("School code does not exist."),BlockedIP:(0,l.t)("Your IP address has been blocked due to too many requests."),LoginBlockedUntil:(0,l.t)("Your district/school has not yet opened access to students."),ServerError:(0,l.t)("There was an error during the login. Please wait a bit and try again.")});class P extends n.default.Component{getErrorText(e){let t;return t="string"==typeof e?e:e.auth_error_code,N()[t]||t}constructor(e){super(e),this.state={tab:"change-domain"},this.url_domain=!window.cordova&&location.hostname.split(".")[0];const t=window.cordova?localStorage.getItem("domain-key"):this.url_domain;t&&"s"!==t&&(this.domain=t),p.isLoggedIn()?(this.state.tab="checking-profile",B(),p.takeMeHomeOrNext(p.getSession())):this.domain&&(this.state.tab="login",this.setSchool(t,(e=>this.setState({tab:"change-domain",error:e}))))}setSchool(e,t){r.default.getSchoolAccount(e,(t=>{this.url_domain&&e!=this.url_domain?window.location="//"+e+location.host.substr(this.url_domain.length)+location.search:(window.cordova&&localStorage.setItem("domain-key",e),t.oauths&&t.oauths.google&&t.oauths.google.force_google_logout&&localStorage.setItem("force_google_logout",!0),this.setState({tab:"login",acc:t}))}),(e=>t(this.getErrorText(e.responseJSON))))}render(){const{tab:e,acc:t}=this.state;if("checking-profile"===e)return(0,s.jsx)(M,null);var a="";if("change-domain"===e)a=(0,s.jsx)(L,{domain:!t&&this.domain,goBack:t&&(()=>this.setState({tab:"login"})),setSchool:this.setSchool.bind(this)});else{if(!t)return null;"signup"===e?a=(0,s.jsx)(U,{acc:t}):"reset-password"===e&&(a=(0,s.jsx)(I,{acc:t}))}var r=window.cordova?(0,s.jsx)("p",null):(0,s.jsx)("a",{href:"https://s.typingclub.com/find-school-code.html"},"Find Your School Code");if(a)return(0,s.jsx)("div",{className:"page",style:"signup"===e?{width:450}:{}},(0,s.jsx)("div",{style:{position:"relative"}},(0,s.jsx)("div",{className:"logo"}),(0,s.jsx)("div",{className:"school-name"},"School Edition"),a,t?(0,s.jsx)("a",{onClick:()=>{this.setState({tab:"login"})}},(0,s.jsx)("i",{className:"edicon-arrow-down"})," Back to Login Page"):r,!window.cordova&&(0,s.jsx)("a",{style:{float:"right"},href:"https://s.typingclub.com/schools/signup.html"},"Sign Up New Account")));return(0,s.jsx)(D,{changeDomain:function(){this.setState({tab:"change-domain"})}.bind(this),resetPassword:()=>this.setState({tab:"reset-password"}),signup:()=>this.setState({tab:"signup"}),acc:t,schoolOauths:C,getErrorText:this.getErrorText.bind(this)})}}const M=()=>(0,s.jsx)("div",{className:"page"},(0,s.jsx)("div",{style:{position:"relative"}},(0,s.jsx)("div",{className:"logo"}),(0,s.jsx)("h3",{style:{padding:"20px 0 140px",textAlign:"center"}},"Checking profile..."),(0,s.jsx)("div",{className:"boxLoading boxLoading-dark"})),(0,s.jsx)("a",{id:"change-school",className:"change-btn",onClick:()=>location.reload()},"")),T=e=>{const{title:t,body:a}=e;return(0,s.jsx)("div",{css:s.css`
        position: absolute;
        background-color: #3d526b;
        border-radius: 5px;
        width: 340px;
        font-family: 'Roboto', sans-serif;
        font-size: 16px;
        font-weight: 400;
        line-height: 20px;
        color: #fff;
        z-index: 600;
        top: -45px;
        right: -360px;
      `},(0,s.jsx)("div",{css:s.css`
          position: absolute;
          width: 16px;
          height: 16px;
          transform: scaleX(0.9) rotate(45deg);
          background-color: #3d526b;
          top: 93px;
          left: -8px;
        `}),(0,s.jsx)("div",{css:s.css`
          background-color: #6583a8;
          height: 5px;
          border-radius: 3px 3px 0 0;
        `}),(0,s.jsx)("div",{css:s.css`
          padding: 20px 30px 25px 30px;
        `},(0,s.jsx)("div",{css:s.css`
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
          `},t),(0,s.jsx)("div",null,a)))};T.propTypes={};const A=()=>{const e=window.localStorage?window.localStorage.getItem("guide.admin_onboarding"):null,t=e?JSON.parse(e):null,a=window.localStorage.getItem("guide._already_logged_in_as_student")||!1,r=9===t&&a;return 9===t&&!a?(0,s.jsx)(T,{title:"Log into your student account",body:(0,s.jsx)(n.default.Fragment,null,"Enter the login credentials set in the previous step.",(0,s.jsx)("br",null),"Once logged in, practice a few lessons to get a feel of the student experience with the program, and then log back into your teacher portal.")}):r?(0,s.jsx)(T,{title:"Log into your teacher account",body:(0,s.jsx)(n.default.Fragment,null,"Enter the login credentials for your teacher account.",(0,s.jsx)("br",null),"Once logged in, find the student record you just experimented with and view their activity.")}):null};class D extends n.default.Component{constructor(){super(...arguments),_(this,"state",{})}componentDidMount(){this.state.acc&&this.state.acc.is_email_password_login_enabled&&this.refs.username.focus()}render(){if(this.state.loading)return(0,s.jsx)(M,null);const{acc:e,getErrorText:t,schoolOauths:a}=this.props,i=Object.keys(a).filter((t=>t in e.oauths)),n=e.is_email_password_login_enabled||this.state.show_username_password,o=i.length>2&&n,l=(0,s.jsx)("div",{className:"oauth-buttons"},i.map((r=>(0,s.jsx)("button",{key:r,onClick:()=>(0,u.oauthWithPopup)(r,!1,e.oauths,(e=>this.setState({loading:e}))).then((()=>{B(),approuter.dashboard()})).catch((e=>this.setState({error:t(e&&e.responseJSON||"UserNotFound")})))},(0,s.jsx)("img",{style:{background:a[r].background||"inherit"},src:"https://static.typingclub.com/m/tpc-login/"+a[r].icon+".svg"}),!o&&"Sign in with "," ",a[r].name))));return(0,s.jsx)("div",{className:"page",style:o?{width:650,paddingLeft:290}:{}},(0,s.jsx)("a",{id:"change-school",className:"change-btn",onClick:this.props.changeDomain},""),o&&(0,s.jsx)("div",{className:"left-side-page",style:{paddingTop:i.length<5?110:50}},(0,s.jsx)("h4",null,"Sign In with:"),l,(0,s.jsx)("div",{className:"or",style:{position:"absolute",top:"51%",right:-20}},"OR")),(0,s.jsx)("div",{style:{position:"relative"}},(0,s.jsx)("div",{className:"logo"}),(0,s.jsx)("div",{className:"school-name"},e.name),i.length>0&&!o&&(0,s.jsx)("div",null,l,n&&(0,s.jsx)("div",{className:"or-cnt"},(0,s.jsx)("span",{className:"line line-l"},""),(0,s.jsx)("span",{className:"or"},"OR"),(0,s.jsx)("span",{className:"line line-r"},""))),(0,s.jsx)("div",{style:{textAlign:"center"}},(0,s.jsx)("div",{className:"errors",style:o?{height:0,margin:0,whiteSpace:"pre-wrap"}:{}},this.state.error||" ")),n&&(0,s.jsx)("div",null,(0,s.jsx)("div",{style:{marginTop:o?70:10,position:"relative"}},(0,s.jsx)(A,null),(0,s.jsx)("input",{type:"text",placeholder:"Username or Email",id:"username",ref:"username",autoCapitalize:"off",onKeyPress:e=>13===e.charCode&&this.refs.login_button.click(),autoCorrect:"off",autoComplete:"off",autoFocus:"autofocus"}),(0,s.jsx)("input",{type:"password",placeholder:"Password",id:"password",ref:"password",autoCapitalize:"off",onKeyPress:e=>13===e.charCode&&this.refs.login_button.click(),autoCorrect:"off",autoComplete:"off"})),(0,s.jsx)("div",{style:{textAlign:"right",fontSize:16}},(0,s.jsx)("button",{ref:"login_button",onClick:()=>{const a=this.refs.username.value,s=this.refs.password.value;if(!a)return this.setState({error:"Need a valid username/email."});this.setState({error:null,loading:!0}),r.default.getUserToken(e.domain,a,s,(e=>p.signUserIn(e.login_token).then(p.takeMeHomeOrNext)),(e=>{this.setState({loading:!1,error:t(e.responseJSON||"ServerError")})}))},id:"login-btn",className:"login-btn"},"Login"))),(0,s.jsx)("div",{style:{marginTop:5,height:30}},n?(0,s.jsx)("a",{onClick:this.props.resetPassword},"Forgot your password?"):(0,s.jsx)("a",{onClick:()=>this.setState({show_username_password:!0})},"Login with password"),e.joinable&&(0,s.jsx)("a",{onClick:this.props.signup,style:{float:"right"}},"Enter a Class Code"))))}}class L extends n.default.Component{constructor(e){super(e),_(this,"state",{})}getSchool(e){this.props.setSchool(e,(e=>this.setState({error:e})))}componentDidMount(){this.refs.domain.focus()}render(){return(0,s.jsx)("div",null,(0,s.jsx)("h3",null,"Enter Your School Code"),"Your school code is the first part of your TypingClub School Editions portal URL.",window.cordova?" Please ask your teacher or instructor if you don't know what your school code is.":" For example, if your accounts login URL is: https://yourschool.typingclub.com your school code would be yourschool.",(0,s.jsx)("input",{type:"text",ref:"domain",autoCapitalize:"off",autoCorrect:"off",autoComplete:"off",placeholder:"Your School Code",onKeyPress:e=>13===e.charCode&&this.getSchool(this.refs.domain.value)}),this.state.error&&(0,s.jsx)("div",{className:"errors"},this.state.error),(0,s.jsx)("div",{style:{margin:"15px 0"}},(0,s.jsx)("button",{onClick:()=>this.getSchool(this.refs.domain.value)},"Set School")))}}class I extends n.default.Component{constructor(){super(...arguments),_(this,"state",{})}componentDidMount(){this.refs.resetEmail.focus()}resetPassword(e){this.setState({email:e}),e&&r.default.forgotPassword(this.props.acc.domain,e,(e=>this.setState(e)))}render(){return this.state.email_sent?(0,s.jsx)("div",{style:{marginBottom:15}},(0,s.jsx)("h3",null,"Email Sent!"),"Please check your email for further instructions to reset your password."):(0,s.jsx)("div",null,(0,s.jsx)("h3",null,"Students:"),"Please ask your teacher for help if you've forgotten your password or are having trouble logging in.",(0,s.jsx)("h3",null,"Instructors"),"Please enter your email address below:",(0,s.jsx)("input",{ref:"resetEmail",type:"email",style:{fontWeight:"normal",marginTop:15},placeholder:"Your email address",onKeyPress:e=>13===e.charCode&&this.resetPassword(this.refs.resetEmail.value)}),(0,s.jsx)("button",{style:{margin:"15px 0"},onClick:()=>this.resetPassword(this.refs.resetEmail.value)},"Reset Password"))}}class U extends n.default.Component{constructor(){super(...arguments),_(this,"state",{})}componentDidMount(){this.refs.classCode.focus()}checkClassCode(e){this.setState({error:null}),e&&r.default.checkClassCode(this.props.acc.domain,e,(t=>{t?approuter.goto_app("shared.school_signup_app",{class_code:e}):this.setState({error:"This code is incorrect. Ask your teacher for the correct class code."})}))}render(){const{acc:e}=this.props;return(0,s.jsx)("div",null,"Enter your class code below. If you don't have one, ask your instructor.",(0,s.jsx)("input",{ref:"classCode",style:{fontWeight:"normal",marginTop:15},placeholder:"Your class code",onKeyPress:e=>13===e.charCode&&this.checkClassCode(this.refs.classCode.value)}),this.state.error&&(0,s.jsx)("div",{className:"errors"},this.state.error),(0,s.jsx)("button",{style:{margin:"15px 0"},onClick:()=>this.checkClassCode(this.refs.classCode.value)},"Sign Up"))}}class R extends n.default.Component{constructor(e){super(e),_(this,"state",{lock_button:!1}),r.default.checkClassCode("",e.code,(t=>{t?this.setState(t):this.setState({error:(0,s.jsx)("h4",null,"Class code ",(0,s.jsx)("b",null,e.code)," is no longer valid. Please ask your teacher for the new class code.")})}))}componentDidUpdate(){this.state.password_enabled&&!this.state.loading&&this.refs.fname.focus()}oauthSignup(e,t){r.default.signup2Class({code:this.props.code,sign:e.sign},(e=>p.signUserIn(e.login_token).then(p.takeMeHomeOrNext)),(e=>{t.disabled=!1,this.setState({loading:!1,signup_error:e.responseJSON})}))}render(){const{school_name:e,class_name:t,password_enabled:a,oauths:i,error:n,loading:o}=this.state;if(!n&&!e)return null;if(this.state.loading)return(0,s.jsx)(M,null);var l=[];i&&(l=i?Object.keys(C).filter((e=>e in i)):[]);const c=l.length>0&&a,d=(0,s.jsx)("div",{className:"oauth-buttons"},l.map((e=>(0,s.jsx)("button",{key:e,onClick:t=>{const a=t.target;a.disabled=!0,(0,u.oauthWithPopup)(e,!0,i,(e=>{a.disabled=e,this.setState({loading:e})})).then((e=>this.oauthSignup(e,a))).catch((e=>this.setState({signup_error:e.responseJSON})))}},(0,s.jsx)("img",{style:{background:C[e].background||"inherit"},src:"https://static.typingclub.com/m/tpc-login/"+C[e].icon+".svg"}),!c&&"Sign up with "," ",C[e].name))));return(0,s.jsx)("div",{className:"page",style:c?{width:650,paddingLeft:290}:{}},(0,s.jsx)("a",{id:"change-school",className:"change-btn",onClick:()=>approuter.goto_app("shared.login_page")},""),c&&(0,s.jsx)("div",{className:"left-side-page",style:{paddingTop:120}},(0,s.jsx)("h4",null,"Sign up with:"),d,(0,s.jsx)("div",{className:"or",style:{position:"absolute",top:"45%",right:-20}},"OR")),(0,s.jsx)("div",{style:{position:"relative"}},(0,s.jsx)("div",{className:"logo"}),(0,s.jsx)("div",{className:"school-name"},(0,s.jsx)("div",null,e),t&&(0,s.jsx)("div",{style:{fontSize:16,marginTop:5}},t)),n&&(0,s.jsx)("div",{className:"errors"},n),l.length>0&&!c&&(0,s.jsx)("div",null,d,a&&(0,s.jsx)("div",{className:"or-cnt"},(0,s.jsx)("span",{className:"line line-l"},""),(0,s.jsx)("span",{className:"or"},"Or"),(0,s.jsx)("span",{className:"line line-r"},""))),a&&(0,s.jsx)("div",null,(0,s.jsx)("input",{ref:"fname",placeholder:"First Name",onKeyPress:e=>13===e.charCode&&this.refs.lname.focus()}),(0,s.jsx)("input",{ref:"lname",placeholder:"Last Name (optional)",onKeyPress:e=>13===e.charCode&&this.refs.username.focus()}),(0,s.jsx)("input",{ref:"username",placeholder:"Username or Email",onKeyPress:e=>13===e.charCode&&this.refs.password.focus()}),(0,s.jsx)("input",{ref:"password",placeholder:"Password",onKeyPress:e=>13===e.charCode&&this.refs.login_button.click()}),this.state.signup_error&&(0,s.jsx)("div",{className:"errors"},this.state.signup_error),(0,s.jsx)("button",{ref:"login_button",disabled:!this.state.value&&this.state.lock_button,onClick:()=>{const e=this.refs.username.value.trim(),t=this.refs.password.value,a=t,s=this.refs.fname.value,i=this.refs.lname.value;if(!e||!t)return this.setState({signup_error:"Need a valid username/email and password."});if(t!=a)return this.setState({signup_error:"Confirm Password does not match Password."});const n={fname:s,lname:i,username:e,password:t,code:this.props.code};this.setState({signup_error:null,lock_button:!0}),r.default.signup2Class(n,(e=>p.signUserIn(e.login_token).then(p.takeMeHomeOrNext)),(e=>this.setState({signup_error:e.responseJSON,lock_button:!1})))},id:"login-btn",className:"login-btn"},"Sign Up")),(0,s.jsx)("a",{onClick:()=>approuter.goto_app("shared.login_app")},(0,s.jsx)("i",{className:"edicon-arrow-down"})," Back to Login Page")))}}function B(){window.cordova&&d.show_ios_focus_popup("Welcome. Tap here to start.")}const q=(0,s.jsx)("div",{className:"footer-links"},(0,s.jsx)("a",{href:"https://www.typingclub.com"},"About TypingClub"),(0,s.jsx)("a",{href:"/schools.html"},"Schools"),(0,s.jsx)("a",{href:"https://www.typingclub.com/privacy.html"},"Privacy"),(0,s.jsx)("a",{href:"https://www.typingclub.com/terms.html"},"Terms"),(0,s.jsx)("a",{href:"/docs/"},"Help"));function $(e){return(0,s.jsx)(i.default,{style:"SCHOOL-ENTRY",header:null,skyBody:!0},(0,s.jsx)(P,null),!window.cordova&&q)}function z(e){return(0,s.jsx)(i.default,{style:"SCHOOL-ENTRY",header:null,skyBody:!0},(0,s.jsx)(R,{code:e.class_code}),!window.cordova&&q)}$.authorization=function(e){return!0},z.authorization=function(e){return!0}},24340:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=p(a(67294)),r=a(34153),i=a(66358),n=p(a(38452)),o=(p(a(45697)),p(a(69606))),l=a(50751),c=p(a(42306)),d=p(a(49127)),u=p(a(75933));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends s.default.Component{constructor(){super(...arguments),h(this,"state",{label:this.props.label,hideTooltip:!1})}componentWillReceiveProps(e){if(e.label!=this.props.label){this.hideTooltip=!0;const t=i.gsap.timeline();t.to(this.refs.root,{duration:.05,opacity:.5,y:0,scale:.8}),t.call((()=>this.setState({label:e.label,hideTooltip:!0}))),t.to(this.refs.root,{duration:.6,opacity:1,scale:1,ease:"power3"})}}render(){Object.assign({},this.props.style);return s.default.createElement("button",{ref:"root",tabIndex:101,"aria-label":this.state.label||(0,l.t)("Continue"),className:"btn navbar-continue "+this.props.type+" hoverable-button"+(this.state.hideTooltip?" no-tooltip":""),style:{fontSize:""==this.state.label?35:14},disabled:this.props.disabled,onClick:()=>{this.props.onClick(),this.setState({hideTooltip:!0})}},s.default.createElement("span",null,this.state.label||""),s.default.createElement("div",{className:"continue-tooltip"},"Press Enter"))}}class m extends s.default.Component{constructor(e){super(e),this.onKeydown=this.onKeydown.bind(this),this.onNext=this.onNext.bind(this),this.inAction=!1,this.state={explanation:null,showNavbar:!0},this.inNavAccess=!1,e.noFontLoading||u.default.load({google:{families:["Montserrat:800","Rubik:300,400,700","Roboto Mono:400"]},classes:!1}),i.gsap.registerPlugin(d.default)}componentDidMount(){this.keyHandlerID=approuter.keymanager.register(this.onKeydown,approuter.keymanager.Priority.sys)}componentWillUnmount(){approuter.keymanager.unregister(this.keyHandlerID)}onKeydown(e){if(this.inAction||!this.state.showNavbar)return;const t=t=>{!this.inNavAccess&&t&&(this.inAction=!0,t(),e.preventDefault(),setTimeout((()=>{this.inAction=!1}),500))};switch(e.which){case n.default.space:if(!this.props.nextOnSpace)break;case n.default.right_arrow:case n.default.down_arrow:if(this.props.disableForwardKeys)break;case n.default.enter:if(this.props.disableEnterKey)break;if(this.props.onCloseTutorial)t(this.props.onCloseTutorial);else{const e=this.props.attempt&&this.props.attempt.is_failed;this.props.nextDisabled||e||t(this.props.onCloseTutorial||this.onNext)}break;case n.default.left_arrow:case n.default.up_arrow:if(this.props.disableForwardKeys)break;this.props.prevDisabled||this.props.attempt||t(this.props.onPrev);break;case n.default.escape:this.props.onCloseTutorial?t(this.props.onCloseTutorial):this.inNavAccess?(this.props.onNavAccess(!0),this.inNavAccess=!1):this.props.onNavAccess&&e.ctrlKey?(this.props.onNavAccess(!1),this.inNavAccess=!0):t(this.props.onSkip);break;case n.default.slash:this.props.onNavAccess&&e.ctrlKey&&!this.inNavAccess&&(this.props.onNavAccess(!1),this.inNavAccess=!0)}}onNext(){const{attempt:e}=this.props;e&&e.next_lesson_url?approuter.next_lesson():this.props.onNext&&this.props.onNext()}render(){const{attempt:e,moreDetails:t,theme:a}=this.props;let n=e&&(e.is_failed||e.has_performance_goals&&e.stars<5),o="primary";this.props.onCloseTutorial?o="outline":this.props.nextIsMono?o="mono":n&&(o="default");let c=!this.props.onCloseTutorial&&this.props.nextDisabled;return!e||!e.is_failed&&e.next_lesson_url||(c=!0),s.default.createElement("div",{style:{position:"relative",zIndex:100},className:(a||"")+(e&&t?" scrollable-results":"")},e&&s.default.createElement(r.ResultsPanel,{contentHeight:this.props.contentHeight,attempt:e,onExplain:this.props.withExplanation&&(e=>{const t=i.gsap.timeline();t.to(this.refs.navbarDetails,{duration:.6,opacity:0}),t.call((()=>this.setState({explanation:e}))),t.set(this.refs.navbarDetails,{y:10}),t.to(this.refs.navbarDetails,{duration:.6,opacity:1,y:0})}),resultContent:this.props.resultContent,toggleNavbar:e=>this.setState({showNavbar:e})}),s.default.createElement("div",{className:"bottom-nav-bar "+(!e&&this.props.theme||""),style:{display:this.state.showNavbar?"block":"none"}},s.default.createElement("div",{className:"navbar-content"},!this.props.onCloseTutorial&&(e?s.default.createElement("button",{className:"btn navbar-goback hoverable-button"+(n?" primary":" default"),disabled:e.no_redo,onClick:()=>approuter.redo_lesson(),tabIndex:100+(n?0:2),"aria-label":(0,l.t)("Try again")},s.default.createElement("span",null,(0,l.t)("Try again"))):this.props.onPrev&&s.default.createElement("button",{className:"btn navbar-goback "+(this.props.prevIsLink?"btn-link":" default hoverable-button"),tabIndex:102,"aria-label":(0,l.t)("Previous"),disabled:this.props.prevDisabled,onClick:this.props.onPrev},s.default.createElement("span",null,(0,l.t)("Previous")))),(e||this.props.onNext||this.props.onCloseTutorial)&&s.default.createElement(f,{type:o,disabled:c,onClick:this.props.onCloseTutorial||this.onNext.bind(this),label:this.props.onCloseTutorial?this.props.progress?(0,l.t)("Continue"):(0,l.t)("Start Lesson"):e?"":this.props.nextLabel}),s.default.createElement("div",{ref:"navbarDetails",className:"navbar-details"},this.state.explanation?s.default.createElement("div",{tabIndex:99,dangerouslySetInnerHTML:{__html:this.state.explanation}}):this.props.onCloseTutorial||null==this.props.progress?null:s.default.createElement("div",{className:"bottom-progress-bar"},s.default.createElement("i",{style:{opacity:this.props.progress>0?1:0,width:this.props.progress+"%"}}))))),e&&this.props.moreDetails&&s.default.createElement(_,null,s.default.createElement(this.props.moreDetails,{attempt:e,profile:this.props.profile})))}}t.default=m;class _ extends s.default.Component{constructor(){super(...arguments),h(this,"state",{renderingDetails:!1})}componentDidMount(){this.initScrollMagic(),i.gsap.to(this.refs.scrollReminder,{duration:.5,delay:2,opacity:1})}componentWillUnmount(){this.scrollCtrl.destroy(!0)}initScrollMagic(){this.scrollCtrl=new c.default.Controller,new c.default.Scene({triggerElement:".attempt-details",triggerHook:.8}).on("enter",(()=>!this.state.renderingDetails&&this.setState({renderingDetails:!0}))).addTo(this.scrollCtrl),new c.default.Scene({triggerElement:".remove-snap",triggerHook:1}).on("enter",(()=>(0,o.default)("body").addClass("navbar-on-top"))).on("leave",(()=>(0,o.default)("body").removeClass("navbar-on-top"))).addTo(this.scrollCtrl)}scrollToDetails(){var e=(0,o.default)("body").hasClass("navbar-on-top")?0:(0,o.default)(window).height();let t=0;this.state.renderingDetails||(this.setState({renderingDetails:!0}),t=.4,i.gsap.to(window,{duration:.2,scrollTo:{y:.1*e},ease:"none"})),i.gsap.to(window,{delay:t,duration:1,scrollTo:{y:e-76},ease:"power2"})}render(){return s.default.createElement("div",{className:"attempt-details"},s.default.createElement("i",{className:"remove-snap",style:{position:"absolute",top:"calc(100vh - 85px)",left:0}}),s.default.createElement("svg",{className:"scroll-reminder",ref:"scrollReminder",onClick:this.scrollToDetails.bind(this),viewBox:"8 9 44 44"},s.default.createElement("polyline",{className:"b",points:"26.02 29.5 30.26 33.74 34.5 29.5"})),this.state.renderingDetails&&this.props.children)}}m.propTypes={}},88531:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(67294)),r=o(a(78840)),i=o(a(90857)),n=o(a(28583));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},l.apply(this,arguments)}(0,i.default)(r.default);class c extends s.default.Component{render(){var e=(0,n.default)({},this.props);return delete e.options,s.default.createElement("div",l({},e,{ref:"chart"}))}componentDidMount(){var e=(0,n.default)({},this.props.options),t={renderTo:this.refs.chart};e.chart?e.chart=(0,n.default)({},e.chart,t):e.chart=t,this.options=e,this.chart=new r.default.Chart(e)}toggleSeries(e,t){t?this.chart.series[e].hide():this.chart.series[e].show()}componentWillUnmount(){this.chart.destroy()}setData(e,t,a){a&&(this.options.animation=!1,this.options.plotOptions.series.animation=!1),this.options.series[0].data=t,this.chart=new r.default.Chart(this.options)}static getOptions(){return r.default.getOptions()}}t.default=c},16232:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(50751));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends r.default.Component{constructor(e){super(e),o(this,"state",{active_dropdown:null}),approuter.events.on("unload",(()=>{this.refs.navbarCollapseMain&&this.refs.navbarCollapseMain.classList.remove("in")}))}componentDidMount(){const e=approuter.profile;if(!e)return null;const t=i.default.getUserLocale(e);document.documentElement.lang=t.alias,document.documentElement.dir=t.dir}set_language(e){approuter.update_profile({locale:e}).then((()=>{document.location.reload()}))}toggle_active_dropdown(e,t){if(e.preventDefault(),e.stopPropagation(),null==this.state.active_dropdown){var a=function(e){window.removeEventListener("click",a),this.state.active_dropdown&&this.setState({active_dropdown:null})}.bind(this);window.addEventListener("click",a)}t==this.state.active_dropdown&&(t=null),this.setState({active_dropdown:t})}componentWillUnmount(){this.state.active_dropdown=null}render(){const e=approuter.profile;if(!e)return null;const t=approuter.profile.is_anonymous,a=e.fname?e.fname:(0,i.t)("Me"),s=i.default.spaceLocales.length,n=e.programs.length,o=i.default.getUserLocale(e),l=r.default.createElement("li",{className:"dropdown"},r.default.createElement("a",{href:"#",onClick:e=>this.toggle_active_dropdown(e,"languages"),"aria-label":(0,i.t)("language menu. {{lang}} is selected",{lang:o.id}),className:"dropdown-toggle",tabIndex:n+9,"data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},r.default.createElement("div",{className:"selected-language-label"},o.viewName),r.default.createElement("span",{className:"caret"})),"languages"==this.state.active_dropdown?r.default.createElement("ul",{className:"dropdown-menu"},i.default.spaceLocales.map(function(e,t){return r.default.createElement("li",{key:e.id},r.default.createElement("a",{href:"#","aria-label":e.viewName,tabIndex:n+10+t,style:{padding:"8px 10px"},onClick:()=>{this.set_language(e.id)}},e.viewName))}.bind(this))):null),c=approuter.program&&approuter.program.subject_id>200&&approuter.current_app&&"student.lessonplan"==approuter.current_app.app;return r.default.createElement("div",{className:"edheader f32"},r.default.createElement("a",{className:"jumpNav",onKeyUp:this.OnFocus.bind(this),role:"navigation",tabIndex:"1","aria-label":"to Jump to Main Content, press Enter key","aria-labelledby":"article"},"Jump to Main Content"),r.default.createElement("nav",{className:"navbar navbar-inverse navbar-fixed-top app-navbar",role:"navigation"},r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"navbar-header"},r.default.createElement("button",{type:"button",className:"navbar-toggle collapsed",onClick:()=>this.refs.navbarCollapseMain.classList.toggle("in")},r.default.createElement("span",{className:"sr-only"},"Toggle navigation"),r.default.createElement("span",{className:"icon-bar"}),r.default.createElement("span",{className:"icon-bar"}),r.default.createElement("span",{className:"icon-bar"})),r.default.createElement("a",{className:"navbar-brand",onClick:approuter.dashboard,tabIndex:"2"},r.default.createElement("div",{className:"edlogo"},c?"edclub":"TypingClub"))),r.default.createElement("div",{ref:"navbarCollapseMain",className:"navbar-collapse collapse",onKeyUp:this.OnEsc.bind(this)},r.default.createElement("ul",{className:"nav navbar-nav hidden-xs",role:"menubar","aria-label":"Main Menu"},r.default.createElement("li",null,r.default.createElement("a",{tabIndex:"2",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.dashboard()}.bind(this),onClick:approuter.dashboard},(0,i.t)("Home"))),r.default.createElement("li",null,r.default.createElement("a",{tabIndex:"3",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.stats_page()}.bind(this),onClick:approuter.stats_page},(0,i.t)("Stats"))),r.default.createElement("li",null,r.default.createElement("a",{tabIndex:"4",role:"menuitem",onKeyUp:function(e){13==e.keyCode&&this.badges()}.bind(this),onClick:this.badges.bind(this)},(0,i.t)("Badges"))),r.default.createElement("li",{className:"dropdown",style:{maxWidth:300}},r.default.createElement("a",{onClick:e=>this.toggle_active_dropdown(e,"lesson-plan-list"),href:"#",className:"dropdown-toggle",tabIndex:"5","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},approuter.program&&approuter.program.name||(0,i.t)("Courses")," ",r.default.createElement("span",{className:"caret"})),"lesson-plan-list"==this.state.active_dropdown?r.default.createElement("ul",{className:"dropdown-menu lesson-plan-list"},e.lessonplans().map(((e,t)=>r.default.createElement("li",{className:approuter.program&&approuter.program.id==e.id?"active":"",key:e.id,"aria-label":(0,i.t)("Lesson {{name}}",{name:e.name})},r.default.createElement("a",{tabIndex:6+t,href:"#",onKeyUp:function(t){13==t.keyCode&&approuter.lesson_plan(e.id)}.bind(this),onClick:()=>approuter.lesson_plan(e.id)},r.default.createElement("img",{className:"nav-dropdown-thumbnail",src:"https://static.typingclub.com/m/"+(e.image||"corp2/lessonplan-icons/default.png")}),r.default.createElement("div",{className:"nav-dropdown-content"},r.default.createElement("div",null,e.name)))))),r.default.createElement("li",{"aria-label":(0,i.t)("More lesson plans")},r.default.createElement("a",{tabIndex:6+e.programs.length,onClick:approuter.catalog_page},r.default.createElement("div",{className:"nav-dropdown-content"},r.default.createElement("i",{className:"icon icon-plus"})," ",(0,i.t)("More Lesson Plans"))))):null),approuter.has_scoreboard()&&r.default.createElement("li",null,r.default.createElement("a",{tabIndex:n+6,role:"menuitem",onKeyUp:function(e){13==e.keyCode&&approuter.scoreboard()},onClick:approuter.scoreboard},approuter.is_leaderboard()?(0,i.t)("Leaderboard"):(0,i.t)("Scoreboard")))),t?r.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu"},l,r.default.createElement(r.default.Fragment,null,r.default.createElement("li",null,r.default.createElement("a",{tabIndex:n+7,role:"menuitem",onClick:approuter.signup_page,onKeyUp:e=>"Enter"===e.key&&e.target.click()},(0,i.t)("Save Progress"))),r.default.createElement("li",null,r.default.createElement("a",{tabIndex:n+8,role:"menuitem",onClick:approuter.login_page,onKeyUp:e=>"Enter"===e.key&&e.target.click()},(0,i.t)("Login"))))):r.default.createElement("ul",{className:"nav navbar-nav navbar-right m-r-0 hidden-xs",role:"menubar","aria-label":"Account Menu","aria-haspopup":"true"},!1,l,r.default.createElement("li",{className:"dropdown"},r.default.createElement("a",{href:"#",onClick:e=>this.toggle_active_dropdown(e,"user-settings"),tabIndex:s+n+11+1,role:"menuitem",className:"dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a," ",r.default.createElement("span",{className:"caret"})),"user-settings"==this.state.active_dropdown?r.default.createElement("ul",{className:"dropdown-menu"},r.default.createElement("li",null,r.default.createElement("a",{href:"#",tabIndex:s+n+11+2,role:"menuitem",onClick:this.profileDetails.bind(this)},(0,i.t)("Profile"))),e.can_change_password&&r.default.createElement("li",null,r.default.createElement("a",{href:"#",tabIndex:s+n+11+3,onClick:this.changePassword.bind(this)},(0,i.t)("Change Password"))),r.default.createElement("li",{onClick:approuter.student_billing},r.default.createElement("a",{tabIndex:s+n+11+4},(0,i.t)("Billing"))),r.default.createElement("li",null,r.default.createElement("a",{href:"#",tabIndex:s+n+11+6,role:"menuitem",onClick:()=>approuter.logout()},(0,i.t)("Logout")))):null))))))}OnEsc(e){27==e.keyCode&&this.state.active_dropdown&&this.setState({active_dropdown:null})}OnFocus(e){if(13!=e.keyCode)return;const t=document.getElementById("article");if(t)t.focus(),t.tabIndex=100;else{const e=document.querySelector('[tabIndex="100"]');e&&e.focus()}document.getElementsByClassName("jumpNav")[0].tabIndex=1}badges(){approuter.badges_page()}profileDetails(){approuter.edit_profile()}changePassword(){approuter.edit_password()}}t.default=l},57023:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(67294)),r=o(a(94184)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=n(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(50751));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(n=function(e){return e?a:t})(e)}function o(e){return e&&e.__esModule?e:{default:e}}class l extends s.default.Component{render(){var{profile:e,idkfa:t}=this.props,a=s.default.createElement("div",null);e.is_anonymous||(a=s.default.createElement("div",{className:"htext profile-name"},e.fname));var n=(0,r.default)({hdrlt:!0,compact:this.props.compact,game:"game"==this.props.display,video:"video"==this.props.display,videotyping:"videotyping"==this.props.display,spelling:"spelling"==this.props.display});return s.default.createElement("div",{className:n+" "+(this.props.theme||"")},s.default.createElement("div",{className:"pull-left",style:{whiteSpace:"nowrap"}},s.default.createElement("div",{tabIndex:"1",role:"menuitem","aria-label":approuter.lesson?(0,i.t)("exit lesson"):(0,i.t)("go to dashboard"),className:"menu-btn",onClick:approuter.exit_lesson,onKeyDown:e=>{13==e.keyCode&&approuter.exit_lesson()}},s.default.createElement("div",{className:"nav-icon"},s.default.createElement("span",null),s.default.createElement("span",null),s.default.createElement("span",null))),s.default.createElement("div",{className:"htext lesson-title"},this.props.name)),s.default.createElement("div",{className:"pull-right",tabIndex:-1,style:{pointerEvents:"auto"}},a),s.default.createElement("div",{className:"container"},s.default.createElement("span",{className:"header-options"},t&&s.default.createElement("div",{className:"header-item",onClick:()=>{this.wait_on_idkfa||(this.wait_on_idkfa=!0,t())}},s.default.createElement("span",{className:"edicon-flash"})),this.props.children)))}}t.default=l},65489:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.default.load({google:{families:["Courgette::latin"]}}),s.default.createElement(r.default,{style:"NOT_FOUND_PAGE",header:null,title:"Page not found"},s.default.createElement("i",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#daecee"}}),s.default.createElement("div",{id:"container"},s.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/cloud.png",id:"cloud",alt:""}),s.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/ground.png",id:"ground",alt:""}),s.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/buddy.png",id:"buddy",alt:""}),s.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/rain.png",id:"rain",alt:""}),s.default.createElement("div",{id:"ground_box",style:{height:window.outerHeight-490}}),s.default.createElement("div",{id:"text_cont"},s.default.createElement("p",{className:"head",style:{fontSize:"1.7em",margin:"20px 0 10px"}},"404. Page Not Found"),s.default.createElement("p",{className:"head",style:{marginBottom:18}},"This page does not exist. That's all we know."),s.default.createElement("p",{className:"cont"},"Consider going back to the",s.default.createElement("a",{href:"javascript:history.back()",className:"go_back"}," ","previous page")," ","or ",s.default.createElement("a",{href:"http://www.typingclub.com"},"TypingClub's home page")))))};var s=n(a(67294)),r=n(a(24508)),i=n(a(75933));function n(e){return e&&e.__esModule?e:{default:e}}},45211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stripe_settings=t.CURRENCY=void 0;t.stripe_settings={logo:"https://s3.amazonaws.com/stripe-uploads/acct_0JXUFO1w3ddkg89GMUEXmerchant-icon-1472074894921-Logo.jpg",stripe_account_name:"EdClub, Inc.",stripe_currency:"USD",getStripeKey:function(){return~window.location.host.indexOf("staging1234.com")?"pk_0JXULDYyo7wYVfacIcwe4mGCUENz8":"pk_0JXUTMAQR2Zlnm5PN56Bbel5Vq9Ht"},instruction:"You won't be charged until trial ends."},t.CURRENCY={USD:"$",EUR:"",JPY:"",MXN:"MX$",CNY:"CN"}},78294:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),r=i(a(11248));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends s.default.Component{constructor(){super(...arguments),n(this,"animRef",s.default.createRef())}componentDidMount(){const e={container:this.animRef.current,renderer:"svg",loop:this.props.loop||!1,autoplay:!1};this.props.animData?e.animationData=this.props.animData:e.path=this.props.animPath,this.anim=r.default.loadAnimation(e),this.props.speed&&this.anim.setSpeed(this.props.speed),this.animateDelay=setTimeout((()=>this.anim.play()),this.props.delay||0)}componentWillUnmount(){this.anim.destroy(),clearTimeout(this.animateDelay)}componentWillReceiveProps(e){e.paused?this.anim&&this.anim.pause():e.reverse?(this.anim.setDirection(-1),this.anim.play()):(this.anim.setDirection(1),this.anim.play())}render(){const{uiReplay:e}=this.props;return s.default.createElement("div",{className:e?"anim-with-replay":"",style:this.props.style||{}},s.default.createElement("div",{style:this.props.svgTransform?{transform:this.props.svgTransform}:this.props.svgStyle||null,ref:this.animRef}),this.props.uiReplay&&s.default.createElement("i",{className:"edicon-refresh",onClick:()=>this.anim.goToAndPlay(0)}))}}t.default=o},95842:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a(67294)),r=a(66358),i=n(a(33805));function n(e){return e&&e.__esModule?e:{default:e}}const o=()=>s.default.createElement("svg",{className:"incorrect-svg",viewBox:"0 0 34.15 34.15",style:{height:25,marginBottom:-5}},s.default.createElement("path",{className:"svg-path",d:"M32,25.17a5.25,5.25,0,0,1,0,4,5.41,5.41,0,0,1-1.14,1.7,5.26,5.26,0,0,1-7.41,0l-6.39-6.4-6.4,6.4A5.28,5.28,0,0,1,7,32.42,5.1,5.1,0,0,1,5,32a5,5,0,0,1-1.7-1.13,5.18,5.18,0,0,1-1.14-1.71,5.23,5.23,0,0,1,1.14-5.71l6.39-6.39-6.39-6.4A5.23,5.23,0,0,1,1.73,7,5.23,5.23,0,0,1,3.27,3.27,5.19,5.19,0,0,1,5,2.13a5.23,5.23,0,0,1,5.71,1.14l6.4,6.4,6.39-6.4A5.25,5.25,0,0,1,32,5a5.23,5.23,0,0,1,0,4,5.29,5.29,0,0,1-1.14,1.7l-6.39,6.4,6.39,6.39A5.29,5.29,0,0,1,32,25.17Z"}));class l extends s.default.Component{componentDidMount(){r.gsap.to(this.refs.root,{duration:.5,opacity:1,bottom:0,ease:"power2"})}render(){const{type:e,msg:t}=this.props;return s.default.createElement("div",{ref:"root",className:"bottom-feedback-bar "+e},s.default.createElement("i",{className:"shadow"}),s.default.createElement("div",{style:{position:"relative"}},"correct"==e&&s.default.createElement(i.default,null),"wrong"==e&&s.default.createElement(o,null),t))}}t.default=l},33805:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s};t.default=()=>r.default.createElement("svg",{className:"checkmark-svg",viewBox:"64 90 35 48"},r.default.createElement("polyline",{style:{fill:"none",stroke:"#fff",strokeWidth:9,strokeLinecap:"round",strokeLinejoin:"round"},points:"68.55 112.84 75.86 120.15 94 103.77"}))},34153:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResultsPanel=void 0;var s=y(a(67294)),r=y(a(69606)),i=y(a(11248)),n=a(66358),o=y(a(96026)),l=y(a(75933)),c=a(45112),d=a(50751),u=a(33946),p=y(a(42644)),h=y(a(78294)),f=y(a(38452)),m=y(a(95842)),_=y(a(36727)),g=y(a(47920));function y(e){return e&&e.__esModule?e:{default:e}}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},v.apply(this,arguments)}function b(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e){return new URL(`https://static.typingclub.com/m/fonts/${e}`,window.location).toString()}_.default.vfs=g.default.pdfMake.vfs,_.default.fonts={Raleway:{normal:w("Raleway-Regular.ttf"),bold:w("Raleway-Bold.ttf"),italics:w("Raleway-Italic.ttf"),bolditalics:w("Raleway-Bold.ttf")},GothamNarrow:{normal:"Gotham-Narrow-Regular.ttf",bold:"Gotham-Narrow-Bold.ttf",italics:"Gotham-Narrow-Italics.ttf"},Roboto:{bold:"Roboto-Bold.ttf",normal:"Roboto-Regular.ttf",italics:"Roboto-Italic.ttf"}};class k extends s.default.Component{constructor(){super(...arguments),b(this,"starCount",this.props.starCount||120)}componentDidMount(){const e=this.refs.canvas.childNodes,t=n.gsap.timeline({delay:this.props.delay});for(let a=0;a<e.length;a++){const s=.2*Math.random(),r=.5+.7*Math.random();t.to(e[a],{duration:r/4,scale:1.2+.2*Math.random(),opacity:.25*Math.random()+.75,x:-2,y:-10,ease:"power1.in"},s),t.to(e[a],{duration:r/2+.7*Math.random(),scale:.9,opacity:0,ease:"power1"},s+r/2),t.to(e[a],{duration:r,y:40*-Math.random()-30,x:20*Math.random()*(Math.random()>.5?-1:1),ease:"slow(0.1, 0.1)"},s)}}shouldComponentUpdate(e){return!1}render(){const e="0.000 9.000 11.756 16.180 8.560 2.781 19.021 -6.180 5.290 -7.281 0.000 -20.000 -5.290 -7.281 -19.021 -6.180 -8.560 2.781 -11.756 16.180 0.000 9.000".split(" ").map(parseFloat);return s.default.createElement("svg",{ref:"canvas",viewBox:"-20 -20 720 220",style:this.props.style||{}},(0,o.default)(this.starCount).map((t=>{const a=700*Math.random(),r=200*Math.random(),i=Math.max(.15,1.3*Math.random()-.7);return s.default.createElement("g",{key:t,style:{opacity:0}},s.default.createElement("path",{d:"M "+e.map(((e,t)=>(0==t||t%2?"":"L ")+(e*i+(t%2?r:a)))).join(" "),fill:"#FFF"}))})))}}class x extends s.default.Component{componentDidMount(){(0,r.default)(this.refs.root).fadeIn((()=>this.refs.badgeText.focus())),this.keyHandlerId=approuter.keymanager.register((e=>(~[f.default.enter,f.default.space,f.default.escape].indexOf(e.which)&&this.next(),!0)))}componentWillUnmount(){approuter.keymanager.unregister(this.keyHandlerId)}next(e){(0,r.default)(this.refs.nextBtn).hide(),(0,r.default)(this.refs.badgeBox).removeClass("animated bounceIn"),(0,r.default)(this.refs.badgeBox).addClass("animated bounceOut"),setTimeout((()=>(0,r.default)(this.refs.root).fadeOut()),800),setTimeout((()=>this.props.onNext()),900)}render(){const{badge:e,onNext:t}=this.props;return s.default.createElement("div",{ref:"root",style:{dispaly:"none",position:"fixed",display:"flex",top:0,left:0,right:0,bottom:0}},s.default.createElement("div",{className:"RESPG"},s.default.createElement("div",{className:"badgebg animated bounceIn"},s.default.createElement("div",{ref:"badgeBox",className:"badge_box hoja"},s.default.createElement("img",{style:{width:245,margin:"17px 0 0"},src:"https://static.typingclub.com/m/badges/"+e.graphic_active}))),s.default.createElement("div",{ref:"badgeText",className:"badge_text",tabIndex:100,"aria-label":(0,d.t)("Congratulations! you have earned the following badge: ")+(0,d.t)(e.name)+", "+(0,d.t)(e.description)},s.default.createElement("div",{className:"badge_text_title"},(0,d.t)(e.name)),s.default.createElement("div",{className:"badge_text_txt"},(0,d.t)(e.description)),s.default.createElement("div",{className:"new_badge",style:{top:-430,position:"absolute"}},(0,d.t)("New Badge")),s.default.createElement("input",{ref:"nextBtn",tabIndex:101,type:"button",className:"next_btn",value:(0,d.t)("Continue")+" ",onClick:this.next.bind(this)}))))}}class E extends s.default.Component{constructor(){super(...arguments),b(this,"state",{showDetails:!1,showingBadgeIndex:0,showSaveProgress:!1,progressSaved:!1,showPdf:!1,pdfDataUrl:null}),b(this,"ref_stars",[]),b(this,"lesson",approuter.lesson||{})}componentDidMount(){const{attempt:e}=this.props;if(!e.error){if(n.gsap.to(".spelling-results-panel .animated-bg",{duration:1.5,marginBottom:"-150vw",marginLeft:"-100vw",width:"300vw",height:"300vw",opacity:1,onComplete:()=>{const e=(0,r.default)(".animated-bg").css("background-color");(0,r.default)(".spelling-results-panel").css("background",e),(0,r.default)(".spelling-results-panel .animated-bg").hide(),this.setState({showPdf:!0})}}),n.gsap.to(".spelling-results-panel .canvas",{duration:.45,opacity:1,delay:.5}),!this.lesson.is_test&&e.has_performance_goals){if(this.props.toggleNavbar(!1),!this.props.onQuizTab){const e=()=>approuter.paid_feature((()=>this.admanager.destroySlots()),null,"ResultPage");this.admanager=(0,u.plug_ads)([{id:"adslot_results1",parent:(0,r.default)(this.refs.root)},{id:"adslot_results2",parent:(0,r.default)(this.refs.root)}],e)}r.default.getJSON("https://static.typingclub.com/m/anims/result-star/star.json",{},(t=>{const a=[];for(let s=0;s<e.stars;s++)a.push(i.default.loadAnimation({container:document.getElementById("star-"+s),renderer:"svg",loop:!1,autoplay:!1,animationData:t}));for(let e=0;e<a.length;e++)n.gsap.delayedCall(.25*e,(()=>a[e].playSegments([[0,32]],!0)));if(e.max_score==e.score)for(let e=0;e<a.length;e++)n.gsap.delayedCall(1.9,(()=>a[e].playSegments([[32,80]],!0)))}));var t={val:0},a=e.score;this.countUp=n.gsap.to(t,{duration:e.stars*(this.props.starDelay||.35),delay:.5,val:a,roundProps:"val",onUpdate:()=>this.refs.score.innerHTML=t.val,onComplete:()=>{var t;let a,s=.2;e.score==e.max_score&&(s+=1.1);const r="typing"===(null===(t=e.lesson)||void 0===t?void 0:t.lesson_type);a=this.admanager&&r?()=>{this.props.toggleNavbar(!0),n.gsap.to(this.refs.stars,{duration:1,ease:"power4",y:.4*-this.props.contentHeight,scale:.6}),n.gsap.to(this.ref_stars[2],{duration:1,ease:"power4",marginTop:-33}),n.gsap.to([this.ref_stars[1],this.ref_stars[3]],{duration:1,ease:"power4",margin:"-12px 0 0"}),n.gsap.to([this.ref_stars[0],this.ref_stars[4]],{duration:1,ease:"power4",margin:"40px 0 0"}),n.gsap.to(this.refs.score,{duration:1,ease:"power4",scale:.8,y:r?34:-66}),r&&n.gsap.to(this.refs.yourScore,{duration:.5,margin:0,opacity:0}),n.gsap.fromTo(this.refs.scoreDetails,{opacity:0,y:-this.props.contentHeight-10},{duration:.7,delay:.4,opacity:1,y:-this.props.contentHeight,scale:.9})}:()=>{this.props.toggleNavbar(!0),n.gsap.to(this.refs.stars,{duration:.75,scale:1.3,ease:"power4.in"}),n.gsap.to(this.refs.canvas,{duration:1,ease:"power4",delay:.3,y:.4*-this.props.contentHeight}),n.gsap.to(this.refs.scoreDetails,{duration:.7,delay:.7,opacity:1})},n.gsap.delayedCall(s,(()=>{this.setState({showDetails:!0}),this.tryShowDetails(a)}))}})}else if(this.props.resultContent){let e=2.5;const t=()=>{n.gsap.to(this.refs.canvas,{duration:.7,ease:"power4",y:-this.props.contentHeight/2}),n.gsap.to(this.refs.goodJobLine,{duration:.7,ease:"power4",delay:.2,maxWidth:700}),n.gsap.to(this.refs.scoreDetails,{duration:.5,ease:"power4",delay:.4,opacity:1})};n.gsap.delayedCall(e,(()=>{this.setState({showDetails:!0}),this.tryShowDetails(t)}))}else if(e.print){_.default.createPdf(e.print).getDataUrl((e=>{this.setState({pdfDataUrl:e}),n.gsap.to(".results-print-view",{opacity:1,duration:1,delay:1.5})}))}l.default.load({google:{families:["Montserrat: 400,700"]},custom:{families:["Akrobat-Bold","GothamRounded-Bold"],urls:["https://static.typingclub.com/m/corp2/css/font-akrobat.css","https://static.typingclub.com/m/corp2/css/font-gotham-rounded.css"]},classes:!1}),this.refs.audioResult&&this.refs.audioResult.focus(),(0,r.default)("body").addClass("body-on-results"),this.admanager||(this.keyHandlerId=approuter.keymanager.register((e=>{if(e.ctrlKey){const{attempt:t}=this.props;return"h"==e.key&&approuter.exit_lesson(),"r"!=e.key||t.no_redo||approuter.redo_lesson(),"f"==e.key&&t.next_lesson_url&&approuter.next_lesson(),!0}})))}}componentWillUnmount(){this._unmounted=!0,this.countUp&&this.countUp.kill(),(0,r.default)("body").removeClass("scrollable-body-on-results"),(0,r.default)("body").removeClass("body-on-results"),this.keyHandlerId&&approuter.keymanager.unregister(this.keyHandlerId),n.gsap.globalTimeline.clear()}tryShowDetails(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._unmounted)return;this.afterBadgesCallback=this.afterBadgesCallback||e;const{badges:a}=this.props.attempt;(!a||t>=a.length)&&(this.refs.audioResult.focus(),this.setState({showSaveProgress:!0}),this.afterBadgesCallback(),(0,r.default)("body").addClass("scrollable-body-on-results"))}launchSaveWork(){approuter.show_modal(s.default.createElement(p.default,{show_x:!0,id:"save-progress-modal",width:650},s.default.createElement(c.SignupWithValidEmailView,{profile:approuter.profile,onSuccess:()=>{this.setState({progressSaved:!0}),approuter.hide_modal("save-progress-modal",!0)}})))}render(){const{attempt:e}=this.props;if(e.error)return s.default.createElement("div",{className:"spelling-results-panel"},s.default.createElement("h1",null,"Error encountered while submitting attempt: ",e.error,"."));const t=()=>s.default.createElement("svg",{className:"star-footprint",style:{width:80,height:80},viewBox:"0 0 438.11 421.06"},s.default.createElement("path",{className:"bg",d:"M332.07,297.6l4.74-26.29.25.08a29.81,29.81,0,0,1,8.71-17.58l57.79-56.32a27.9,27.9,0,0,0-22-17l-80-11.62a28.39,28.39,0,0,1-21.35-15.52L244.49,80.92c-10.41-21.08-40.46-21.08-50.86,0L157.85,153.4a28.37,28.37,0,0,1-21.35,15.52l-80,11.62a27.9,27.9,0,0,0-22,17l57.79,56.32a29.87,29.87,0,0,1,8.49,15.88h0l5.87,30.71c0,.21.09.43.13.64l0,.21h0a28,28,0,0,1,0,9.18L93.41,388.7a29.69,29.69,0,0,0,36.44,6.87L205.17,356A29.86,29.86,0,0,1,233,356l75.31,39.6a29.71,29.71,0,0,0,36.45-6.87l-13.43-78.27a28.14,28.14,0,0,1-.34-6.53h0v0A27.51,27.51,0,0,1,332.07,297.6Z"}),s.default.createElement("path",{className:"shadow",d:"M93.41,388.7l13.42-78.27a28,28,0,0,0,0-9.18h0l0-.21c0-.22-.09-.43-.13-.64l-5.87-30.71h0a29.89,29.89,0,0,1,.09,10.55L86.54,364.1a29.57,29.57,0,0,0,14.23,30.73A30.5,30.5,0,0,1,93.41,388.7Z"}),s.default.createElement("path",{className:"shadow",d:"M56.51,180.54l80-11.62a28.37,28.37,0,0,0,21.35-15.52l35.78-72.48c10.4-21.08,40.45-21.08,50.86,0l35.77,72.48a28.39,28.39,0,0,0,21.35,15.52l80,11.62a27.9,27.9,0,0,1,22,17l-36.51,35.59,39.65-38.66c17.72-17.27,7.94-47.36-16.54-50.91L306,131.27a29.84,29.84,0,0,1-22.48-16.33l-37.66-76.3c-10.95-22.19-42.58-22.19-53.53,0l-37.66,76.3a29.84,29.84,0,0,1-22.47,16.33L48,143.51c-24.48,3.55-34.26,33.64-16.54,50.91l3.14,3.07A27.9,27.9,0,0,1,56.51,180.54Z"}),s.default.createElement("path",{className:"shadow",d:"M336.81,271.31l-4.74,26.29a27.51,27.51,0,0,0-1.12,6.25v0h0a28.14,28.14,0,0,0,.34,6.53l13.43,78.27a30.55,30.55,0,0,1-7.37,6.13,29.57,29.57,0,0,0,14.23-30.73l-14.38-83.86a29.54,29.54,0,0,1-.13-8.85Z"}),s.default.createElement("path",{className:"outline",d:"M219.06,22a29.5,29.5,0,0,1,26.76,16.64L283.48,115A29.86,29.86,0,0,0,306,131.27l84.21,12.24c24.48,3.56,34.26,33.64,16.54,50.91l-3.14,3.06-36.51,35.59-21.28,20.74a30.28,30.28,0,0,0-8.58,26.42l14.38,83.87a29.25,29.25,0,0,1-6.87,24.6h0c-.16.2-.34.39-.52.58s-.29.31-.43.46l-.68.69-.47.44s0,.06-.07.07l0,0-.43.4-.87.75-.51.4-.35.28-.28.2-.64.47-.22.15-.39.27-.3.2-.25.16c-.05.05-.11.07-.16.12a29.39,29.39,0,0,1-29.82,1.18L232.94,356a29.92,29.92,0,0,0-27.78,0l-75.31,39.59A29.36,29.36,0,0,1,100,394.33l-.22-.14c-.07-.05-.15-.09-.22-.15l-.35-.23c-.15-.1-.29-.19-.43-.3l-.26-.19a.18.18,0,0,1-.07-.05l-.36-.26-.17-.13-.11-.07-.12-.1-.1-.08-.63-.5-.08-.07-.64-.55-.21-.19c-.16-.13-.32-.29-.48-.44s0,0-.06-.05l-.4-.38h0c-.07-.07-.13-.15-.2-.21l-.5-.51a.71.71,0,0,0-.13-.12,2,2,0,0,0-.14-.16l-.14-.15-.38-.42-.15-.18a29.26,29.26,0,0,1-6.86-24.59l14.38-83.87a30,30,0,0,0-8.58-26.42L34.55,197.48l-3.14-3.06C13.69,177.15,23.47,147.07,48,143.51l84.2-12.24A29.85,29.85,0,0,0,154.63,115l37.66-76.31A29.51,29.51,0,0,1,219.06,22m0-13a42.58,42.58,0,0,0-38.42,23.88L143,109.19a16.86,16.86,0,0,1-12.7,9.22L46.08,130.64a42.85,42.85,0,0,0-23.74,73.09l3.14,3.07,57.79,56.32a16.76,16.76,0,0,1,4.77,9,16.32,16.32,0,0,1,.07,5.95L73.73,361.9a42.45,42.45,0,0,0,9.81,35.26l.21.25.47.53.15.19.1.09,0,0,.51.52,0,0,.61.62.16.16,0,0,.18.18.17.16,0,0,.28.27.35.32.32.29.43.39.71.61.58.48,0,0,.16.17.53.4.2.16.14.09.09.07.29.22.45.32.07.05.39.28.52.37.53.35.41.29.3.17a42.37,42.37,0,0,0,42.86,1.74l75.31-39.59a16.89,16.89,0,0,1,15.68,0l75.32,39.59a42.39,42.39,0,0,0,42.84-1.72l.6-.38.06-.05.36-.24.59-.41.29-.2.05,0,.05,0,.11-.09c.26-.18.51-.36.75-.55l.08-.06c.27-.19.49-.36.66-.5l.79-.63c.43-.36.83-.7,1.22-1.06l.38-.33c.25-.22.49-.44.72-.67l.1-.11.1-.09.05,0,0,0c.37-.35.73-.72,1.09-1.09l.05-.06.05-.05,0,0,.45-.48c.22-.23.52-.55.84-.94a42.44,42.44,0,0,0,9.81-35.28L350,278a17.26,17.26,0,0,1,4.84-14.92l21.28-20.74,36.51-35.59,3.14-3A42.86,42.86,0,0,0,392,130.64l-84.21-12.23a16.86,16.86,0,0,1-12.68-9.22L257.48,32.88A42.59,42.59,0,0,0,219.06,9Z"})),a=["0 5px 0","-20px 5px 0","-33px 10px 0","-20px 5px 0","0 5px 0"];let r;e.badges&&this.state.showingBadgeIndex<e.badges.length&&(r=e.badges[this.state.showingBadgeIndex]);let i="";if(!this.lesson.is_test&&e.has_performance_goals)0==this.state.showingBadgeIndex&&(i=(0,d.t)("Lesson finished. ")),i+=r?(0,d.t)("Computing your score."):(0,d.t)("You have earned {{number_stars}} stars, Your score is {{score}}",{number_stars:e.stars,score:e.score});else{const e=[(0,d.t)("Nice job"),(0,d.t)("Excellent work"),(0,d.t)("Good job"),(0,d.t)("Good work"),(0,d.t)("Well done")];i=e[Math.floor(Math.random()*e.length)]}return s.default.createElement("div",{ref:"root",className:"spelling-results-panel"},s.default.createElement("i",{className:"animated-bg"}),!e.print||e.has_performance_goals||this.props.resultContent?s.default.createElement("div",{ref:"canvas",className:"canvas",style:{width:800}},s.default.createElement("div",{ref:"audioResult",tabIndex:2,style:{outline:"none",height:240,marginBottom:-220,marginTop:-20,color:"transparent"}},i),!this.lesson.is_test&&e.has_performance_goals?s.default.createElement("div",{className:"stars-box",style:{padding:"0 0 50px"}},"Edge"===binfo.browser&&e.score==e.max_score&&s.default.createElement("div",{style:{position:"absolute",height:240,left:0,top:"-8vh",width:"100%"}},s.default.createElement(k,{key:this.state.showStarParticles||0,delay:this.state.showStarParticles?0:3.1,style:{width:740,height:240}})),s.default.createElement("div",{ref:"stars",style:{position:"relative",height:120,paddingTop:40,transform:"scale(1.3)"}},s.default.createElement("div",{style:{pointerEvents:"none",height:150,whiteSpace:"nowrap"}},(0,o.default)(5).map((e=>s.default.createElement("div",{ref:t=>this.ref_stars[e]=t,key:e,style:{margin:a[e],display:"inline-block",verticalAlign:"top",width:80,height:170,position:"relative"}},s.default.createElement(t,null),s.default.createElement("div",{id:"star-"+e,style:{position:"absolute",top:-2,left:-3,marginTop:-28,marginLeft:-26,display:"inline-block",width:140,height:140}})))))),s.default.createElement("p",{ref:"yourScore",style:{height:0,margin:"10px 0 4px",textTransform:"uppercase"}},(0,d.t)("Your Score")),s.default.createElement("div",{ref:"score",onClick:()=>this.setState({showStarParticles:(this.state.showStarParticles||0)+1}),style:{transformOrigin:"bottom",transform:"translateY(20px)",fontFamily:"Akrobat-Bold",fontSize:"5em",lineHeight:1}},"0"),this.state.showDetails&&!r&&e.is_high_score&&s.default.createElement("div",{className:"new-highscore"},s.default.createElement(h.default,{animPath:"https://static.typingclub.com/m/anims/new-highscore.json"}),s.default.createElement("label",null,(0,d.t)("New Highscore")))):s.default.createElement("div",null,s.default.createElement("div",{style:{height:"40vh",width:"40vh",margin:"auto"}},s.default.createElement(h.default,{animPath:"https://static.typingclub.com/m/anims/checkmark.json"})),s.default.createElement("div",{style:{fontWeight:700,fontSize:"1.7em",paddingTop:10,transform:"translateY(-40px)"}},!this.lesson.is_test&&(0,d.t)("Good job").toUpperCase()+"!"),s.default.createElement("hr",{ref:"goodJobLine",style:{margin:"25px auto",maxWidth:0}})),s.default.createElement("div",{ref:"scoreDetails",style:{height:0,opacity:0,textAlign:"center",position:"relative"}},this.state.showDetails&&!r&&this.props.resultContent&&s.default.createElement(this.props.resultContent,{onExplain:this.props.onExplain,attempt:e,with_ads:null!=this.admanager}))):this.state.pdfDataUrl?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"results-print-view"},s.default.createElement("iframe",{style:{visibility:this.state.showPdf?"inherit":"hidden"},src:this.state.pdfDataUrl+"#toolbar=0&view=FitV"})),this.state.showPdf&&s.default.createElement("div",{className:"download-pdf-right-panel"},s.default.createElement("div",{className:"download-pdf-button",onClick:()=>{_.default.createPdf(e.print).download(`${approuter.lesson.name}.pdf`)}},s.default.createElement(S,null),s.default.createElement("div",null,s.default.createElement(j,null)," Download")))):s.default.createElement("div",null),this.state.showDetails&&r&&s.default.createElement(x,{key:this.state.showingBadgeIndex,badge:r,t:this.props.t,onNext:()=>{const e=this.state.showingBadgeIndex+1;this.setState({showingBadgeIndex:e}),this.tryShowDetails(null,e)}}),this.state.showSaveProgress&&approuter.profile.is_anonymous&&approuter.lesson.index>10&&s.default.createElement(m.default,{type:"save-progress"+(this.state.progressSaved?" progress-saved":""),msg:s.default.createElement("div",null,this.state.progressSaved?s.default.createElement("small",{style:{paddingRight:20}},(0,d.t)("Profile created. Your progress is saved.")):s.default.createElement(s.default.Fragment,null,s.default.createElement("small",null,(0,d.t)("You have not yet saved your progress.")),s.default.createElement("button",{className:"btn btn-link",style:{margin:"0 20px"},onClick:e=>this.launchSaveWork()},(0,d.t)("Save my work"))),s.default.createElement("i",{className:"close-message",onClick:()=>this.setState({showSaveProgress:!1})},""))}))}}t.ResultsPanel=E;const S=e=>s.default.createElement("svg",v({width:80,height:80,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s.default.createElement("path",{stroke:"none",d:"M24.252 44.938a2.16 2.16 0 0 0-1.54.65 2.24 2.24 0 0 0-.639 1.568v8.875c0 .589.23 1.153.639 1.57.408.415.962.649 1.54.649a2.16 2.16 0 0 0 1.54-.65 2.24 2.24 0 0 0 .64-1.569v-.736h1.45a5.04 5.04 0 0 0 3.596-1.517 5.227 5.227 0 0 0 1.49-3.662c0-1.373-.536-2.69-1.49-3.662a5.04 5.04 0 0 0-3.596-1.517h-3.63Zm3.63 5.92h-1.45v-1.483h1.45c.193 0 .378.078.515.217a.748.748 0 0 1 0 1.048.722.722 0 0 1-.515.217Zm20.338-3.706c.001-.588.231-1.151.64-1.566a2.16 2.16 0 0 1 1.539-.648h4.353a2.16 2.16 0 0 1 1.54.65c.41.416.64.98.64 1.568a2.24 2.24 0 0 1-.64 1.57 2.16 2.16 0 0 1-1.54.649h-2.179v1.487h2.18a2.16 2.16 0 0 1 1.54.65c.409.416.638.98.638 1.568a2.24 2.24 0 0 1-.638 1.57 2.16 2.16 0 0 1-1.54.65h-2.18l.005.727a2.257 2.257 0 0 1-.635 1.57 2.16 2.16 0 0 1-1.54.653 2.16 2.16 0 0 1-1.542-.647c-.41-.415-.64-.979-.641-1.567v-8.884Zm-10.903-2.215a2.16 2.16 0 0 0-1.54.65 2.24 2.24 0 0 0-.64 1.57v8.874c0 .589.23 1.153.64 1.57.408.415.962.649 1.54.649h2.187a6.478 6.478 0 0 0 4.623-1.95 6.719 6.719 0 0 0 1.914-4.706 6.719 6.719 0 0 0-1.914-4.707 6.478 6.478 0 0 0-4.623-1.95h-2.187Zm2.179 8.876v-4.438h.008a2.16 2.16 0 0 1 1.541.65c.409.416.638.98.638 1.569a2.24 2.24 0 0 1-.638 1.569 2.16 2.16 0 0 1-1.54.65h-.01ZM13.358 13.874c0-2.354.918-4.611 2.553-6.276A8.637 8.637 0 0 1 22.073 5h19.98c.86 0 1.71.173 2.503.508a6.53 6.53 0 0 1 2.121 1.444l17.056 17.369a6.719 6.719 0 0 1 1.918 4.704v7.401a6.55 6.55 0 0 1 3.153 2.435A6.74 6.74 0 0 1 70 42.7v17.763a6.74 6.74 0 0 1-1.196 3.84 6.551 6.551 0 0 1-3.153 2.435v.386a8.958 8.958 0 0 1-2.553 6.276A8.637 8.637 0 0 1 56.935 76H22.073a8.637 8.637 0 0 1-6.162-2.6 8.958 8.958 0 0 1-2.553-6.275v-.386a6.55 6.55 0 0 1-3.157-2.43A6.74 6.74 0 0 1 9 60.468V42.705a6.74 6.74 0 0 1 1.198-3.845 6.55 6.55 0 0 1 3.16-2.434V13.875Zm47.935 17.75H46.041a6.478 6.478 0 0 1-4.622-1.95 6.718 6.718 0 0 1-1.915-4.706V9.437h-17.43a4.318 4.318 0 0 0-3.082 1.3 4.48 4.48 0 0 0-1.277 3.138v22.17h43.578v-4.42ZM17.715 67.121c0 .583.112 1.16.331 1.7.219.538.54 1.028.944 1.44.405.413.886.74 1.415.963a4.29 4.29 0 0 0 1.668.338h34.862a4.29 4.29 0 0 0 1.67-.338 4.354 4.354 0 0 0 1.413-.963c.405-.412.726-.902.945-1.44a4.507 4.507 0 0 0 .33-1.7H17.715Zm26.147-56.765V24.97c0 .588.23 1.152.638 1.569.409.416.963.65 1.541.65h14.35L43.862 10.355ZM15.537 40.482a2.16 2.16 0 0 0-1.541.65 2.24 2.24 0 0 0-.638 1.569v17.763c0 .589.23 1.153.638 1.57.409.415.963.65 1.54.65H63.46a2.16 2.16 0 0 0 1.54-.65 2.24 2.24 0 0 0 .639-1.57V42.701A2.24 2.24 0 0 0 65 41.132a2.16 2.16 0 0 0-1.541-.65H15.537Z"})),j=e=>s.default.createElement("svg",v({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s.default.createElement("path",{d:"M2.333 19.667h17.334M11 13.167V2.333m0 10.834 4.334-4.334M11 13.167 6.667 8.833",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"}))},6678:(e,t,a)=>{a(64967);var s=d(a(50751)),r=c(a(33563)),i=a(65477),n=a(56657),o=c(a(58200));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}function d(e){return e&&e.__esModule?e:{default:e}}(0,d(a(86071)).default)(window),o.registerSignOutHandler((()=>{approuter.events.fire_event("logout"),approuter.team=null,approuter.program=null,approuter.lesson=null,approuter.profile=null})),o.registerStudentLoginHandler((async e=>{approuter.dashboard()})),o.registerOnLogin((async e=>{let t,a;return approuter.profile=null,approuter.program&&(t=approuter.program.id),approuter.lesson&&(a=approuter.lesson.id),approuter.program=null,approuter.game=null,await approuter.refresh_profile(),t&&(await approuter.refresh_program(t),approuter.refresh_game()),a&&(approuter.lesson=approuter.program.lessons.find((e=>e.id===a))),e})),window.start=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document.location.pathname,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await s.default.init(r),o.getFreshSession().then((function(){(0,i.start)(document.getElementById("main"),n.resolveAppRoute,n.url_routes,t?null:t=>t.goto_window_url(e))}))};try{"function"==typeof initSentry&&initSentry(sentryDSN)}catch(e){console.error("initSentry failed: ",e)}},13379:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=a(50751),i=a(10662),n=(s=a(67294))&&s.__esModule?s:{default:s},o=a(45211);class l extends n.default.Component{render(){const e=this.props.payments,t=e.map(((e,t)=>{let a;a=1==e.paid?n.default.createElement("i",{className:"icon icon-check"}):e.failure_code+" - "+e.failure_message,1==e.refunded&&(a=n.default.createElement("strong",null,"Refunded - $",e.refunded_amount/100));let s=o.CURRENCY[e.currency?e.currency:"USD"];return n.default.createElement("tr",{key:t},n.default.createElement("th",{scope:"row"},t+1),n.default.createElement("td",null,s+(e.amount/100).toFixed(2)),n.default.createElement("td",null,"Free Edition"==e.plan?"Premium Edition":e.plan),n.default.createElement("td",null,a),n.default.createElement("td",null,n.default.createElement("div",null,"**********",e.card_last4),n.default.createElement("div",null,"Exp: ",e.card_exp_month,"/",e.card_exp_year)),n.default.createElement("td",null,(0,i.formatDate)(new Date(e.created),"short")),n.default.createElement("td",{style:{wordBreak:"break-word"}},e.stripe_reference))}));return n.default.createElement("div",null,n.default.createElement("h2",{className:"payment-head"},(0,r.t)("Payments")),e.length>0?n.default.createElement("table",{className:"table table-sm"},n.default.createElement("thead",null,n.default.createElement("tr",null,n.default.createElement("th",null,"#"),n.default.createElement("th",null,(0,r.t)("Amount")),n.default.createElement("th",null,(0,r.t)("Description")),n.default.createElement("th",null,(0,r.t)("Status")),n.default.createElement("th",null,(0,r.t)("Card")),n.default.createElement("th",null,(0,r.t)("Date")),n.default.createElement("th",null,(0,r.t)("Reference")))),n.default.createElement("tbody",null,t)):n.default.createElement("div",{className:"well"},(0,r.t)("There are no payment records.")))}}t.default=l},3445:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s},i=a(50751);class n extends r.default.Component{render(){const e=approuter.profile;var t=this.props.active;return r.default.createElement("div",{className:"ed-paper"},r.default.createElement("h4",null,e.fname?e.fname:"Me"),r.default.createElement("ul",{className:"nav nav-pills nav-stacked"},r.default.createElement("li",{onClick:this.profileDetails.bind(this),className:"profile"==t?"active":""},r.default.createElement("a",{href:"#"},(0,i.t)("Profile"))),e.can_change_password&&r.default.createElement("li",{onClick:this.changePassword.bind(this),className:"change_password"==t?"active":""},r.default.createElement("a",{href:"#"},(0,i.t)("Change Password"))),r.default.createElement("li",{onClick:this.billing.bind(this),className:"billing"==t?"active":""},r.default.createElement("a",null,(0,i.t)("Billing")))))}profileDetails(){approuter.edit_profile()}changePassword(){approuter.edit_password()}billing(){approuter.student_billing()}plans(){approuter.student_plans()}deleteAccount(){}}t.default=n},33660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const a={generic_decline:"common::payments||cardErrors||generic_decline",insufficient_funds:"common::payments||cardErrors||insufficient_funds",lost_card:"common::payments||cardErrors||lost_card",stolen_card:"common::payments||cardErrors||stolen_card",expired_card:"common::payments||cardErrors||expired_card",incorrect_cvc:"common::payments||cardErrors||incorrect_cvc",processing_error:"common::payments||cardErrors||processing_error",incorrect_number:"common::payments||cardErrors||incorrect_number"};t.default=a},45112:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchStudentPlansModal=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dialogView";0;const s=approuter.profile;a=s.email?a:a+"-signup",s.email?approuter.show_modal(i.default.createElement(d.default,{id:"upsell-modal",width:450,onClose:()=>t&&t()},i.default.createElement(M,{where:a,profile:s,type:"modal",onSubscribe:e}))):approuter.show_modal(i.default.createElement(d.default,{show_x:!0,id:"billing-signup-modal",width:650,onClose:()=>t&&t()},i.default.createElement(T,{profile:s,onSuccess:function(){approuter.hide_modal("billing-signup-modal",!0),approuter.show_modal(i.default.createElement(d.default,{id:"upsell-modal",width:450,onClose:()=>t&&t()},i.default.createElement(M,{profile:approuter.profile,where:a,type:"modal",onSubscribe:e})))}})))},t.StudentPlansPage=t.SignupWithValidEmailView=void 0;var s=g(a(75564)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(71327)),i=g(a(67294)),n=g(a(72052)),o=g(a(3445)),l=g(a(13379)),c=a(45211),d=g(a(42644)),u=g(a(94184)),p=a(50751),h=a(52058),f=g(a(41609)),m=g(a(33660));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},y.apply(this,arguments)}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const k={greencheck:{width:50,marginRight:15,marginTop:15},i:{color:"white",fontSize:"94px"}},x={iconTitle:{textAlign:"center",margin:"5px 0 5px",fontSize:14}},E=1,S=2,j=4,O=0,C={padding:"10px 0px",width:350,fontSize:18},N={modal:{cl1:" ",cl2:" ",cl3:"  ",cl4:"col-md-10 col-md-offset-1"},body:{cl1:"container content-top",cl2:"row",cl3:"col-md-8",cl4:"col-md-6 col-md-offset-3"}};let P={backgroundColor:"#e44626",color:"white",padding:"0px 13px",marginLeft:"5px",fontWeight:"bold",backgroundImage:"url(https://static.typingclub.com/m//corp2/img/tp_paid/sale_left.png), url(https://static.typingclub.com/m//corp2/img/tp_paid/sale_right.png)",backgroundPosition:"left, right",backgroundRepeat:"no-repeat, no-repeat",backgroundSize:"contain, contain"};class M extends i.default.Component{constructor(e){super(e),w(this,"state",{active_plan:0,is_upgraded:!1,is_changed:!1,is_canceled:!1,is_payment_updated:!1,old_subscription:null,show_cancel:!1,show_change:!1,action:O,selected:0,available_plans:[],exp:null,notice:{}}),this.onToken=this.onToken.bind(this),this.onChangePlanRadio=this.onChangePlanRadio.bind(this)}componentWillMount(){void 0!==this.props.upgraded&&this.setState({is_upgraded:!0}),s.default.getTpPlans().then((e=>{this.setState({available_plans:e.objects}),s.default.getUserSubscription((t=>{t?this.setState({selected:t.plan,active_plan:t.plan,old_subscription:t,exp:t.plan_expiration}):e.objects[1]&&e.objects[1].id&&this.setState({selected:e.objects[1].id})}))}))}checkEmail(){this.props.profile.email||approuter.show_modal(i.default.createElement(d.default,{show_x:!0,id:"billing-signup-modal-p",width:650,onClose:()=>{this.forceUpdate()}},i.default.createElement(T,{profile:this.props.profile,onSuccess:function(){approuter.hide_modal("billing-signup-modal-p",!0),approuter.refresh()}.bind(this)})))}onToken(e){e=e||{},this.state.show_change?this.setState({show_change:!1,action:S}):this.setState({show_change:!1,action:j}),this.createUserSubscription(this.state.selected,e),approuter.profile.is_basic&&(approuter.profile.is_basic=!1),this.props.onSubscribe&&this.props.onSubscribe(this.state.selected)}createUserSubscription(e,t){this.setState({is_loading:!0}),s.default.createUserSubscription({plan:e,token:t,locale:this.props.profile.locale},function(e){var t={subscription:e.subscription_id,did_upgrade:e.upgraded_subscription,is_loading:!1};switch(this.state.action){case j:t.is_upgraded=!0;break;case E:t.is_canceled=!0;break;case S:t.is_changed=!0}this.setState(t)}.bind(this),function(e,t,a){var s;const r=e.responseJSON||{};let i=a;if(null!==(s=r.error)&&void 0!==s&&s.key)if("server_error"===r.error.key)i=(0,p.t)("common::errors||serverError");else{const e=m.default[r.error.key];i=e?(0,p.t)(e):(0,p.t)("common::payments||cardErrors||generic_decline")}else"string"==typeof r.error&&(i=r.error);approuter.profile.is_basic=!0,this.setState(b(b({},this.state),{},{is_loading:!1})),this.showNotice("danger",(0,p.t)("common::payments||updatePaymentMethodErrorTitle",{message:i}))}.bind(this))}render_success(){var e=i.default.createElement("div",null,i.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")),i.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your Premium subscription is now active.")),i.default.createElement("p",null,"Thank you for subscribing to TypingClub Premium Edition. You can now enjoy your favorite typing program with the Premium features & completely ad-free."));return this.render_message(e)}render_cancel(){var e=i.default.createElement("div",null,i.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")),i.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your subscription has been successfully canceled.")),i.default.createElement("p",null,(0,p.t)("We will miss you! You can activate your plan again from the billing section of your portal at anytime.")," ",i.default.createElement("a",{onClick:approuter.student_billing},(0,p.t)("Go to billing section"))));return this.render_message(e)}render_change(){var e=this.findPlanById(this.state.selected).description,t=i.default.createElement("div",null,i.default.createElement("h1",{style:{fontSize:36,color:"#555",marginTop:30}},(0,p.t)("Successful")," "),i.default.createElement("div",{className:"text-success",role:"alert",style:{marginBottom:15}},(0,p.t)("Your plan has changed.")),i.default.createElement("p",null,(0,p.t)("Your plan successfully changed to {{desc}}. You can change or cancel your Premium subscription at anytime.",{desc:e})));return this.render_message(t)}render_message(e,t){return i.default.createElement("div",{className:N[this.props.type].cl1},i.default.createElement("div",{className:N[this.props.type].cl2},i.default.createElement("div",{className:N[this.props.type].cl3},i.default.createElement("div",{className:"body"==this.props.type?"ed-paper":""},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-md-2"},t?"":i.default.createElement("div",{style:k.greencheck},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/checkmark.svg"}))),i.default.createElement("div",{className:"body"==this.props.type?"col-md-10":"col-md-8"},e,"modal"==this.props.type?i.default.createElement("button",{className:"btn btn-primary pull-right",onClick:()=>{window.location.reload()}},"Close"):i.default.createElement("a",{className:"btn btn-primary pull-right",onClick:approuter.dashboard},(0,p.t)("Continue to TypingClub")))))),"modal"!=this.props.type?i.default.createElement("div",{className:"col-md-4"},i.default.createElement(o.default,{active:"billing"})):null))}handleCloseCancel(){this.setState({show_cancel:!1})}cancelSubscriptionAlert(){this.setState({show_cancel:!0})}handleCloseUpgrade(){this.setState({show_change:!1})}onChangeAlert(){0!=this.state.selected?this.setState({show_change:!0}):this.cancelSubscriptionAlert()}handleDelete(){this.setState(b(b({},this.state),{},{is_loading:!0})),s.default.cancelUserSubscription({action:E},(e=>{e.deleted?(this.handleCloseCancel(),this.setState({is_canceled:!0,is_loading:!1})):this.setState(b(b({},this.state),{},{is_loading:!1}))}))}onEmail(e){this.props.profile.email=e,this.forceUpdate()}onChangePlanRadio(e){this.setState({selected:e.currentTarget.value})}onLicenseKey(e){approuter.license_key_app()}findPlanById(e){return this.state.available_plans.find((t=>t.id==e))}clearNotice(){this.setState(b(b({},this.state),{},{notice:{}}))}showNotice(e,t){this.setState(b(b({},this.state),{},{notice:{type:e,text:t}}))}render(){if(!this.state.available_plans.length)return null;let e;if((0,f.default)(this.state.notice)||(e=i.default.createElement("div",{className:"alert alert-"+this.state.notice.type,role:"alert",style:{marginBottom:"20px"}},i.default.createElement("button",{type:"button",className:"close",onClick:this.clearNotice.bind(this)},""),this.state.notice.text)),this.state.is_upgraded)return this.render_success();if(this.state.is_changed)return this.render_change();if(this.state.is_canceled)return this.render_cancel();let t,a=this.state.old_subscription,s=this.props.profile,r="modal"==this.props.type,h=this.state.is_loading,m=!!(this.state.exp&&Date.parse(this.state.exp)<new Date);const _={email:s.email,image:c.stripe_settings.logo,name:c.stripe_settings.stripe_account_name,currency:this.findPlanById(this.state.selected).currency,stripeKey:c.stripe_settings.getStripeKey()};s.email||r?null==a||!a.is_active&&"unpaid"!=a.status&&"past_due"!=a.status?t=i.default.createElement(n.default,y({token:this.onToken,description:c.stripe_settings.instruction,panelLabel:"Free Trial, then",amount:this.state.available_plans.length>0?this.findPlanById(this.state.selected).amount:0},_),i.default.createElement("button",{ref:e=>this.inputElement=e,disabled:0==this.state.selected,className:"btn btn-primary",style:b(b({},C),{},{fontSize:"1em"})},(0,p.t)("Start Your 3-Day Free Trial"))):(a.is_active||"unpaid"==a.status||"past_due"==a.status)&&(t=i.default.createElement("button",{disabled:this.state.selected==a.plan,className:"btn btn-primary",style:C,onClick:this.onChangeAlert.bind(this)},(0,p.t)("Change Plan"))):t=i.default.createElement("button",{onClick:function(){this.checkEmail()}.bind(this),disabled:0==this.state.selected,className:"btn btn-primary",style:C},(0,p.t)("Start Your 3-Day Free Trial"));this.findPlanById(0);return h?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{width:r?420:"100%",height:r?"75%":"100%",position:"absolute",zIndex:1e3,display:h?"block":"none",background:" url('https://static.typingclub.com/m//tp/loading.gif') no-repeat center center",backgroundColor:"rgba(255,255,255,0.5)"}},""),i.default.createElement("div",{className:N[this.props.type].cl1,ref:"modal_root","data-backdrop":"static"},i.default.createElement("div",{className:N[this.props.type].cl2},i.default.createElement("div",{className:N[this.props.type].cl3},"modal"==this.props.type&&i.default.createElement("div",null,i.default.createElement("h2",{style:{marginTop:0}},(0,p.t)("Premium Edition")),i.default.createElement("hr",null)),i.default.createElement("div",{className:"body"==this.props.type?"ed-paper":""},"body"==this.props.type&&i.default.createElement("h2",{style:{margin:"0 0 30px 0"}},"Premium Edition",a&&a.is_active?null:i.default.createElement("button",{className:"btn btn-default pull-right",onClick:this.onLicenseKey.bind(this)},(0,p.t)("Enter License Key"))),i.default.createElement("h4",{style:{margin:"0 0 30px 0",fontSize:16}},0!=this.state.active_plan&&a.is_active&&!m?i.default.createElement("span",null,(0,p.t)("You are currently using the {{plan_name}}",{plan_name:""}),i.default.createElement("strong",{className:"text-primary"}," ",this.findPlanById(parseInt(a.plan)).description,". ")):i.default.createElement("span",null,(0,p.t)("You are currently using the free edition.")+" "),a&&a.is_active?(0,p.t)(" You can change your current plan, or go back to basic right here."):(0,p.t)(" Upgrade your plan to take advantage of TypingClub Premium features. Start your 3-day free trial today, you can cancel anytime from your profile.")),i.default.createElement("div",{style:{marginLeft:50,fontSize:16,fontFamily:"Roboto"}},this.state.available_plans.map(function(e,t){return 0==this.state.active_plan&&0==e.id?null:i.default.createElement("label",{key:e.id,className:"radio",style:{marginTop:20,cursor:"pointer",display:"grid",gridTemplateColumns:"13px auto",gap:"25px"}},i.default.createElement("input",{style:{margin:"0",position:"relative",width:"13px"},type:"radio",name:"plan",checked:this.state.selected==e.id,onChange:this.onChangePlanRadio,value:e.id}),i.default.createElement("div",{className:"text-container"},i.default.createElement("div",null,i.default.createElement("strong",null,0==e.id?(0,p.t)("Free Plan"):e.description),0==this.state.active_plan&&null!=e.formated_regular_price?i.default.createElement("span",null,i.default.createElement("span",{style:P},null!=e.sale_tag?e.sale_tag:(0,p.t)("SALE"))):null),i.default.createElement("div",null,0==this.state.active_plan&&null!=e.formated_regular_price?i.default.createElement("span",{style:{marginRight:"10px"}},i.default.createElement("strike",{style:{fontSize:"0.9em"}},i.default.createElement("strong",null,e.formated_regular_price))):"","Annually"==e.period?i.default.createElement("span",null,i.default.createElement("strong",{className:"text-primary",style:null!=e.formated_regular_price?{color:P.backgroundColor}:null},e.formated_price_per_month)," ",(0,p.t)("per month")," (",(0,p.t)("billed annually")," ",e.formated_price,")"):i.default.createElement("span",null,i.default.createElement("strong",{className:"text-primary",style:null!=e.formated_regular_price?{color:P.backgroundColor}:null},e.formated_price)," ",(0,p.t)("per month"))),0==this.state.active_plan&&null!=e.marketing_message_line1&&i.default.createElement("div",{style:{fontSize:"0.9em"}},e.marketing_message_line1),0==this.state.active_plan&&null!=e.marketing_message_line2&&i.default.createElement("div",{style:{fontSize:"0.9em"}},e.marketing_message_line2)))}.bind(this))),i.default.createElement("div",{className:"clearfix",style:{margin:"30px 0",textAlign:"center"}},e,t,a&&a.is_active?null:i.default.createElement("div",{style:{marginTop:5}},(0,p.t)("Your credit card will not be charged during the trial"))),i.default.createElement("hr",null),!r&&i.default.createElement("h4",{style:{margin:"15px 0 15px 0",fontSize:16}},(0,p.t)("As a Premium subscriber you can enjoy TypingClub ad-free, and gain access to exclusive features including"),":"),i.default.createElement("div",{className:"row billing-sect"},i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top-right":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Use the program 100% ad-free. This will also increase the speed and performance of the program.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/ad.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("Ad Free"))),i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Includes two additional engaging games in the lesson plan. Both games are fun and challenging.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/game.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("More Games"))),i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top-left":!0,"hint--yel":!0}),"aria-label":(0,p.t)("This immersive experience guides you through a series of animated stories, while you are typing them.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/videotyping.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("Story Typing"))),i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top-right":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Get access to more advanced reports that will help identify problem areas, and give more visibility to your typing progress.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/reports.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("More Reports"))),i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Your typing activities are recorded and can be played back at a later time to help assess the fluency of your typing.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/playback.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("Replay Attempts"))),i.default.createElement("div",{style:{padding:"5px 20px",boxSizing:"border-box"},className:(0,u.default)({"col-md-2":!r,"col-md-4":r,"hint--top-left":!0,"hint--yel":!0}),"aria-label":(0,p.t)("Get access to more exciting new themes in your typing interface.")},i.default.createElement("div",{className:"img"},i.default.createElement("img",{src:"https://static.typingclub.com/m/corp2/img/tp_paid/skins.svg"})),i.default.createElement("h5",{style:x.iconTitle},(0,p.t)("More Themes")))),a&&a.payments&&"modal"!=this.props.type&&i.default.createElement("div",null,i.default.createElement("hr",null),i.default.createElement(l.default,{payments:a.payments})))),"modal"!=this.props.type?i.default.createElement("div",{className:"col-md-4"},i.default.createElement(o.default,{active:"billing"})):null),i.default.createElement("div",{style:{display:this.state.show_cancel?"block":"none"}},i.default.createElement(d.default,{id:"cnl_sub",show_x:"false",width:500,onClose:this.handleCloseCancel.bind(this)},i.default.createElement("h3",{style:{marginTop:11,marginBottom:22}},(0,p.t)("Cancel Subscription")),i.default.createElement("p",null,(0,p.t)("You are about to cancel your {{plan}} subscription. Your account will remain on the Premium Edition for the rest of your billing period, but you will not be charged again. Are you sure you want to continue?",{plan:this.findPlanById(this.state.active_plan).description})," "),i.default.createElement("button",{className:"btn btn-default col-md-5 pull-left",onClick:this.handleCloseCancel.bind(this)},(0,p.t)("No, Thanks")),i.default.createElement("button",{className:"btn btn-primary col-md-5 pull-right",style:{marginLeft:10},onClick:this.handleDelete.bind(this)},(0,p.t)("Yes")))),i.default.createElement("div",{style:{display:this.state.show_change?"block":"none"}},i.default.createElement(d.default,{style:{marginTop:11,marginBottom:22},id:"chg_sub",show_x:"false",width:500,onClose:this.handleCloseUpgrade.bind(this)},i.default.createElement("h3",null,(0,p.t)("Change Plan")),i.default.createElement("p",null,(0,p.t)("Would you like to change your subscription to {{plan}}?",{plan:this.findPlanById(this.state.selected).description})),i.default.createElement("button",{className:"btn btn-default col-md-5 pull-left",onClick:this.handleCloseUpgrade.bind(this)},(0,p.t)("No, Thanks")),i.default.createElement("button",{className:"btn btn-primary col-md-5 pull-right",style:{marginLeft:10},onClick:()=>this.onToken()},"Yes")))))}}t.StudentPlansPage=M;class T extends i.default.Component{constructor(){super(...arguments),w(this,"state",{notice:null,oauths:null})}componentDidMount(){s.default.getSchoolAccount("www",(e=>{delete e.oauths.clever,this.setState({oauths:e.oauths})})),this.keyHandlerId=approuter.keymanager.register((e=>!0))}componentWillUnmount(){approuter.keymanager.unregister(this.keyHandlerId)}form_submit(e){e.preventDefault(),this.update_profile()}clearNotice(){this.setState({notice:{}})}showNotice(e,t){this.setState({notice:{type:e,text:t}})}update_profile(){var e=this.props.profile,t=Boolean(e.fname),a=this.refs.email.value;if(!r.validateEmail(a))return this.showNotice("danger",(0,p.t)("Please provide a valid email"));if(t)approuter.update_profile({email:a}).then(this.props.onSuccess).catch(this.handle_error.bind(this));else{var s=this.refs.fname.value,i=this.refs.lname.value,n=this.refs.password.value;if(!s)return this.showNotice("danger",(0,p.t)("Please provide a valid first name"));if(!i)return this.showNotice("danger",(0,p.t)("Please provide a valid last name"));if(!n)return this.showNotice("danger",(0,p.t)("Please provide a password"));approuter.update_profile({fname:s,lname:i,password:n,email:a}).then(this.props.onSuccess).catch(this.handle_error.bind(this))}this.setState({disable_action:!0})}handle_error(e,t){let a=e.responseJSON.student;for(let e in a){this.showNotice("danger",a[e][0]);break}this.setState({disable_action:!1})}handle_oauth(){approuter.apply_env(approuter.current_app),this.props.onSuccess()}render(){var e,t=this.props.profile,a=this.state;if((0,f.default)(a.notice)||(e=i.default.createElement("div",{style:{margin:"auto -20px"},className:"alert alert-"+a.notice.type,role:"alert"},i.default.createElement("button",{type:"button",className:"close",onClick:this.clearNotice.bind(this)},""),a.notice.text)),a.loading)return i.default.createElement("div",{style:{textAlign:"center"}},i.default.createElement("h3",{style:{textAlign:"center",padding:"10px 0 150px"}},"Checking Profile..."),i.default.createElement("div",{className:"boxLoading boxLoading-dark"}));var s=Boolean(t.fname);return i.default.createElement("div",null,i.default.createElement("h2",{style:{marginTop:0}},s?(0,p.t)("Update your profile email"):(0,p.t)("Create a profile to continue")),i.default.createElement("div",{style:{display:"inline-block",verticalAlign:"top",height:200,width:260,marginRight:55,position:"relative"}},a.oauths&&(0,h.listInOauthOptions)(a.oauths,!0,this.handle_oauth.bind(this),this.handle_error.bind(this),(e=>this.setState({loading:e}))),i.default.createElement("h3",{style:{position:"absolute",right:-80,top:"50%",color:"#aaa",background:"white",padding:10}},"OR")),i.default.createElement("form",{className:"form-horizontal",onSubmit:this.form_submit.bind(this),style:{width:250,paddingLeft:50,display:"inline-block",borderLeft:"solid 1px #ddd"}},e,!s&&i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"fname",className:"control-label"},(0,p.t)("First Name")),i.default.createElement("input",{type:"text",ref:"fname",className:"form-control",id:"fname",placeholder:(0,p.t)("First Name")})),!s&&i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"lname",className:"control-label"},(0,p.t)("Last Name")),i.default.createElement("input",{type:"text",ref:"lname",className:"form-control",id:"lname",placeholder:(0,p.t)("Last Name")})),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"email",className:"control-label"},(0,p.t)("Email")),i.default.createElement("input",{type:"text",ref:"email",className:"form-control",id:"email",placeholder:(0,p.t)("email")})),!s&&i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"password"},(0,p.t)("Password")),i.default.createElement("input",{type:"password",ref:"password",className:"form-control",id:"password",placeholder:(0,p.t)("Password")})),i.default.createElement("div",{className:"form-group"},i.default.createElement("button",{type:"submit",disabled:a.disable_action,className:"btn btn-lg btn-primary"},(0,p.t)("Save & Proceed")))))}}t.SignupWithValidEmailView=T},41947:(e,t,a)=>{a(6678)},28891:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=f(a(67294)),r=f(a(10564)),i=p(a(84460)),n=p(a(30381)),o=p(a(88531)),l=p(a(55319)),c=a(66358),d=p(a(75564)),u=a(50751);function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(h=function(e){return e?a:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}const m=e=>{let{today:t,attempts:a,playback_attempt:r,profile:i}=e;return n.default.locale(i.locale),s.default.createElement("div",{className:"typing-attempt-history stagger-show"},a.map(((e,a)=>s.default.createElement("div",{key:a,className:"details-panel"},s.default.createElement("div",{style:{width:"initial"}},s.default.createElement("label",null,(0,u.t)("When")),s.default.createElement("div",{style:{padding:"10px 20px"}},(0,n.default)(e.created).from(t))),s.default.createElement("div",{style:{width:195}},s.default.createElement("label",null,(0,u.t)("Stars")),s.default.createElement("div",{className:"number-value"},null!=e.stars?s.default.createElement("img",{src:"https://static.typingclub.com/m/STARS/"+e.stars+"-stars.png",style:{width:180}}):null)),s.default.createElement("div",{style:{width:"8%",padding:8}},s.default.createElement("label",null,(0,u.t)("Score")),s.default.createElement("div",{className:"number-value"},e.score)),s.default.createElement("div",{style:{width:"9%",padding:8}},s.default.createElement("label",null,(0,u.t)("Speed")),s.default.createElement("div",{className:"number-value"},e.wpm)),s.default.createElement("div",null,s.default.createElement("label",null,(0,u.t)("Accuracy")),s.default.createElement("div",{className:"number-value"},e.accuracy,"%")),s.default.createElement("div",{style:{width:"13%",padding:8}},s.default.createElement("label",null,(0,u.t)("Real Accuracy")),s.default.createElement("div",{className:"number-value"},e.real_accuracy,"%")),s.default.createElement("div",null,s.default.createElement("label",null,(0,u.t)("Duration")),s.default.createElement("div",{className:"number-value"},e.duration.split(" ")[0])),s.default.createElement("div",null,s.default.createElement("label",null,(0,u.t)("Playback")),s.default.createElement("div",null,s.default.createElement("button",{onClick:()=>r(e)},s.default.createElement("i",{className:"icon icon-controller-play"}))))))))};t.default=e=>{const t=e.profile,[a,p]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),_=(0,s.useRef)(null);(0,s.useEffect)((()=>{const t=e.attempt;d.default.get(`/api/v${d.default.version}/attempt/${t.id}/stats/`).then((e=>{t.history=e.lesson_attempts,p(t)}))}),[]),(0,s.useEffect)((()=>{if(a&&(c.gsap.to(".stagger-show",{duration:.8,opacity:1,y:0,stagger:.2}),c.gsap.to(".tpmodes>a",{duration:.8,ease:"power2.in",opacity:0,delay:3}),c.gsap.delayedCall(1,(()=>f(!0))),a.details.lesson_text)){var e=a.lesson.activity,t=new i.default({lesson_id:a.lesson.id,text:a.details.lesson_text,on_error:e.app&&e.app.startsWith("typing.games")?"block":e.on_error,max_secs:e.max_secs,deletable:a.details.deletable,profile_block_on_errors:a.details.profile_block_on_errors,is_logograms:"logographic"==a.lesson.activity.render_engine,t:u.t});new r.default(_.current,g,t,!0),t.replay_history(a.details.history,!0)}}),[a]);const g=(0,r.get_render_props)("instant"),y=(0,n.default)();if(a){const e=e=>{const t=(0,n.default)(e);return y.diff(t,"days")?t.format("MM/DD/Y"):t.format("LT")},t=a.history.map((t=>e(t.created))).reverse();var v={chart:{type:"column",height:250},plotOptions:{column:{pointPadding:0,groupPadding:0}},title:"",xAxis:{categories:t},tooltip:{valueSuffix:(0,u.t)("WPM")},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},credits:{enabled:!1},yAxis:{min:0,title:null},series:[{name:(0,u.t)("Speed (WPM)"),data:a.history.map((e=>e.wpm)).reverse(),showInLegend:!1,maxPointWidth:50}]},b={title:"",xAxis:{categories:t},chart:{height:250},credits:{enabled:!1},tooltip:{valueSuffix:"%"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},yAxis:{min:0,max:100,title:null},series:[{name:(0,u.t)("Accuracy"),data:a.history.map((e=>e.accuracy)).reverse(),showInLegend:!1}]}}const w=e=>(0,l.default)(e.id,t);return s.default.createElement("div",{className:"typing-attempt-details"},s.default.createElement("h3",{className:"stagger-show"},(0,u.t)("Realtime playback").toUpperCase()),s.default.createElement("div",{className:"details-panel stagger-show tpmodes "+g.display_className+" "+g.size},s.default.createElement("div",{className:"typable mono_standard",ref:_}),s.default.createElement("a",{className:"stagger-show",onClick:()=>w(a)},s.default.createElement("i",{className:"icon icon-controller-play"}))),a&&s.default.createElement("div",{id:"attempt-progress-sect"},s.default.createElement("div",{style:{display:"flex"}},s.default.createElement("div",{className:"stagger-show",style:{flex:1,marginRight:10}},s.default.createElement("h3",null,(0,u.t)("Speed WPM").toUpperCase())),s.default.createElement("div",{className:"stagger-show",style:{flex:1,marginLeft:10}},s.default.createElement("h3",null,(0,u.t)("Accuracy").toUpperCase()))),s.default.createElement("div",{style:{display:"flex"}},s.default.createElement("div",{className:"stagger-show details-panel",style:{flex:1,marginRight:10,height:302}},h&&s.default.createElement(o.default,{id:"lesson_progress_chart",className:"chart_box",options:v})),s.default.createElement("div",{className:"stagger-show details-panel",style:{flex:1,marginLeft:10,height:302}},h&&s.default.createElement(o.default,{id:"lesson_accuracy_chart",className:"chart_box",options:b}))),s.default.createElement("h3",{className:"stagger-show"},(0,u.t)("Your previous attempts on this lesson:").toUpperCase()),s.default.createElement(m,{profile:t,t:u.t,attempts:a.history,today:y,playback_attempt:w})))}},51454:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.generate_dynamic_lesson=async function(e,t){var s;const o=e=>{const t=Math.floor(Math.random()*e.length),a=e[t];return e.length>1&&e.splice(t,1),a},l=e.activity.dynamic_settings||e.activity.text5||{type:"progressive",corpus:""},c=l.type||"progressive";let d=null===(s=t.shared)||void 0===s||null===(s=s.corpora)||void 0===s?void 0:s[l.corpus];const u=await new Promise((e=>{r.default.getSubjectStats(e,a.g.profile,t.subject_id)}));if("corpus"===c){if(!d){const e=await fetch("https://static.typingclub.com/m/lpeditor/corpora/famous-quotes-simple.txt");d=await e.text()}const a=d.split("\n").map((e=>({text:e})));for(let e of a){e.v={};const t=e.text.toLowerCase().split("").filter((e=>" "===e?"":e));for(let a of t)e.v[a]=(e.v[a]||0)+1;for(let a in e.v)e.v[a]=e.v[a]/t.length}const s=10*e.activity.goal_wpm;let r="";if(u.length){const e=u.filter((e=>e.subject.id===t.subject_id))[0]||u[0],i={};for(let t=0;t<e.length;t++)i[e[t].chr]=100/(100*e[t].acc+e[t].wpm);Math.sqrt(Object.keys(i).reduce(((e,t)=>e+i[t]*i[t]),0));const n=e=>Object.keys(i).reduce(((t,a)=>t+i[a]*(e[a]||0)),0),o=[];let l=0;for(;l<s||l<5*s&&o.length<a.length/4;){const e=a[Math.floor(Math.random()*a.length)];o.push({text:e.text,score:n(e.v)}),l+=e.text.length}o.sort(((e,t)=>e.score<t.score?1:-1));let c="",d=0;for(;r.length<s&&d<o.length;){const e=o[d].text;d++,c!==e&&(c=e,r+=(r.length?" ":"")+e)}}else for(;r.length<s;)r+=(r.length?" ":"")+o(a).text;return e.activity.text1=r,void(e.activity.dynamic_text_generated=!0)}let p,h=[],f={};if(d){let e={};d.toLowerCase().split(/\s/).filter((e=>e.length>2&&e.length<12)).forEach((t=>{e[t]||(e[t]=0),e[t]+=1})),h=Object.keys(e),h.sort(((e,t)=>h[e]>h[t]?-1:1));for(let e=0;e<h.length;e++){const t=h[e];for(let a=0;a<t.length-1;a++){const s=t[a]+t[a+1];f[s]||(f[s]=new Set),f[s].size<12&&f[s].add(e)}}if(Object.keys(f).forEach((e=>f[e]=[...f[e]])),f.size>100)for(let e in f)f[e].size<4&&delete f[e]}else{const e=await fetch("https://static.typingclub.com/m/lpeditor/corpora/wiki/en-duals.json");d=await e.json(),h=d.lowercase.words,f=d.lowercase.duals;for(let e in f)f[e]=new Set(f[e])}if(u.length)p=u[0].duals;else{p={};const e=Object.keys(f),t=new Set;for(;t.size<=10;)t.add(e[Math.floor(Math.random()*e.length)]);for(let e of t)p[e[1]]||(p[e[1]]=[]),p[e[1]][e[0]]="20|1"}const m=Object.values(f).map((function(e){return e.length})),_=Math.max(...m),g=Math.min(...m),y={};for(let e in f){const t=(_-f[e].length)/(_-g+1)*.2+1;var v=0;p[e[1]]&&p[e[1]][e[0]]&&(v=i(p[e[1]][e[0]])/t),v&&(y[e]=v)}let b=Object.keys(y).sort(((e,t)=>y[e]<y[t]?-1:1)),w=new Set;if(b.length>10)for(b=b.slice(0,10);w.size<4;)w.add(o(b));else w=new Set(Object.keys(f).slice(0,5));const k=["ass","cum","dic","fag","fat","fuc","fuk","jap","jiz","pus","wop"];let x="";for(let e of w){let t=[],a=[...f[e]].map((e=>h[e]));if(a=[...a],a.sort(((e,t)=>n(p,e)<n(p,t)?-1:1)),a=a.splice(0,6),"duals"===c){for(let a=0;a<3;a++)t.push(e);for(let e=0;e<3;e++)t.push(o(a))}else if("words"===c)for(let e=0;e<4;e++)t.push(o(a));else{t.push(e+" "+e);const s=[];for(let e=0;e<3;e++)s.push(o(a));const r=new Set;for(let t of s){const a=t.toLowerCase(),s=a.indexOf(e);if(s>0){let e=a.substr(s-1,3);~k.indexOf(e)||r.add(e)}}if(r.size<2)for(let t of s.reverse()){const a=t.toLowerCase(),s=a.indexOf(e);if(s<a.length-2){let e=a.substr(s,3);~k.indexOf(e)||r.add(e)}}const i=Array.from(r).slice(0,2);i&&i.length<2&&i.push(i[0]);for(let e of i)t.push(e);for(let e of s)t.push(e)}x+=t.join(" ")+"\n"}e.activity.text1=x,e.activity.dynamic_text_generated=!0};var s,r=(s=a(75564))&&s.__esModule?s:{default:s};function i(e){if(!e)return 0;const[t,a]=e.split("|");return parseInt(t)+50*parseFloat(a)}function n(e,t){let a=0,s=0;for(let r=0;r<t.length-1;r++)e[t[r]]&&e[t[r]][t[r+1]]&&(a+=i(e[t[r]][t[r+1]]),s++);return a/s}},55319:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){s.default.get("/api/v"+s.default.version+"/attemptdetailed/"+e+"/",(function(e){t.is_instructor?s.default.get(e.student,(function(t){k(t,e,a)})):k(t,e,a)}))};var s=y(a(75564)),r=g(a(71327)),i=y(a(42644)),n=y(a(84460)),o=g(a(10564)),l=y(a(94184)),c=(y(a(50056)),y(a(67294))),d=y(a(69606)),u=y(a(30381)),p=a(50751),h=y(a(76945)),f=y(a(60513)),m=y(a(13016));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}function y(e){return e&&e.__esModule?e:{default:e}}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},v.apply(this,arguments)}function b(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends c.default.Component{constructor(e){super(e),b(this,"state",{sound:!1,is_playing:!1,played_once:!1,plays:0,speed:0,accuracy:100,noText:!1}),this.render_props=(0,o.get_render_props)(this.props.instant?"instant":"normal")}componentDidMount(){this.place_typable()}componentWillUnmount(){this.core&&(clearTimeout(this.core.play_next_timeout_id),this.core.end_lesson())}place_typable(){var e=this.props.attempt;if(e.details.lesson_text){var t=e.lesson.activity,a="logographic"==e.details.render_engine,s=this.core=new n.default({lesson_id:e.lesson.id,text:e.details.lesson_text,is_logograms:a,on_error:t.app&&t.app.startsWith("typing.games")?"block":e.details.on_error,profile_block_on_errors:e.details.profile_block_on_errors,max_secs:t.max_secs,deletable:e.details.deletable,t:p.t});a&&(this.render_props.logographic=!0),this.typable=new o.default(this.refs.typable,this.render_props,s,!0),this.keepinview=new h.default(this.typable,this.render_props.line_transition,this.props.instant?20:a?2.5:4),this.soundfx=new f.default(this.core,!this.state.sound),s.events.on("stats_update",function(e){e.wpm>250||this.setState({speed:e.wpm,accuracy:e.accuracy})}.bind(this)),s.events.on("progress",function(e){(0,d.default)(this.refs.progress_percent).css({width:e+"%"})}.bind(this)),s.events.on("end",function(){this.setState({is_playing:!1,played_once:!0})}.bind(this)),this.setState({plays:this.state.plays+1}),this.props.instant&&this.core.replay_history(this.props.attempt.details.history,!0)}else this.setState({noText:!0})}set_playbackspeed(e){this.core.playback_speed=e,this.forceUpdate()}set_sound(e){this.setState({sound:e}),this.soundfx.is_mute=!e}play(){if(!(approuter.profile||this.props.profile).is_instructor){if(this.props.profile.is_basic&&!0)return approuter.paid_feature(this.play,null,"AttemptPlayback")}this.setState({is_playing:!0}),this.state.played_once&&((0,d.default)(this.refs.typable).empty(),this.place_typable()),this.core.replay_history(this.props.attempt.details.history)}render(){const e=c.default.createElement("div",{style:{cursor:"pointer",fontSize:"2em",right:15,top:0,position:"absolute",zIndex:100},onClick:()=>approuter.hide_modal("att-playback")},"");if(this.state.noText)return c.default.createElement("div",{style:{position:"relative",padding:30,margin:15,textAlign:"right"}},c.default.createElement("h3",{style:{textAlign:"center"}},"This playback is no longer available."),e);var t=this.props.attempt,a=this.render_props,s=this.core,i=s&&this.core.stats;const n={display:"inline-block",minWidth:85,lineHeight:1.6},{profile:o}=this.props,d={core:s,keyboard_schema:o.keyboard,show_keyboard:!0,show_hand:!0,keyboard_layout:o.keyboard_layout,use_hand:o.use_hand,anchoring:!1};return c.default.createElement("div",{style:{position:"relative",overflow:"hidden"}},c.default.createElement("div",{style:{minHeight:350},className:"PLYBK TPCMN row",ref:"root"},this.props.instant?c.default.createElement("div",{className:"col-sm-8 span8"},c.default.createElement("div",{className:"tpmodes "+a.display_className+" "+a.size,style:{transform:"scale(.85)"}},c.default.createElement("div",{className:"typable mono_standard",ref:"typable"}))):c.default.createElement("div",{className:"col-sm-8 span8",style:{position:"relative"}},!this.state.is_playing&&c.default.createElement("div",{style:{background:"radial-gradient(ellipse at center, rgba(0,0,0,0) 0%,rgba(0,0,0,0.10) 100%)",color:"#464646",position:"absolute",textAlign:"center",left:0,right:0,fontSize:180,lineHeight:"305px",zIndex:2,textShadow:"0 0 12px #888",cursor:"pointer",marginLeft:-5},onClick:this.play.bind(this)},c.default.createElement("i",{className:"icon icon-controller-play icon-play"})," "),c.default.createElement("div",{className:"tpmodes "+a.display_className+" "+a.size,style:{height:330,transform:"scale(.85)"}},c.default.createElement("div",{className:"typable mono_standard",ref:"typable"})),c.default.createElement("div",{id:"progress-bar",style:{margin:"-28px 50px -5px 40px"}},c.default.createElement("div",{ref:"progress_percent",id:"progress-percent"},c.default.createElement("div",{ref:"progress_dot",id:"progress-dot",style:{display:"block"}}))),c.default.createElement("div",{style:{position:"relative",margin:"35px 0 -15px",height:280}},this.state.plays&&c.default.createElement(m.default,v({key:this.state.plays},d,{style:{transform:"scale(0.6)",position:"absolute",top:-80,left:-100}})),i&&c.default.createElement("div",{ref:"row",style:{position:"absolute",top:0,right:20,padding:10,background:"rgba(255,255,255,0.85)"}},(0,p.t)("Speed"),c.default.createElement("div",{style:{fontSize:"2em",marginBottom:10}},Math.round(this.state.speed||0),c.default.createElement("sup",null,c.default.createElement("small",null,(0,p.t)("WPM")))),(0,p.t)("Accuracy"),c.default.createElement("div",{style:{fontSize:"2em"}},this.state.accuracy||100,"%")))),c.default.createElement("div",{className:"col-sm-4 span4 hidden-xs",style:{background:"#f2f2f2",fontSize:"1.1em",height:610,padding:"0 40px 0 25px"}},c.default.createElement("div",{style:{minHeight:260}},c.default.createElement("h2",{style:{maxHeight:140,marginTop:30,overflow:"hidden"}},t.lesson.name),!this.props.instant&&c.default.createElement("div",{style:{paddingTop:10,whiteSpace:"nowrap"}},c.default.createElement("label",null,(0,p.t)("Playback Speed")),c.default.createElement("br",null),c.default.createElement("a",{onClick:()=>this.set_playbackspeed(1),className:(0,l.default)({btn:!0,"btn-primary":!s||1==s.playback_speed})},"1X"),c.default.createElement("a",{onClick:()=>this.set_playbackspeed(2),className:(0,l.default)({btn:!0,"btn-primary":s&&2==s.playback_speed})},"2X"),c.default.createElement("a",{onClick:()=>this.set_playbackspeed(4),className:(0,l.default)({btn:!0,"btn-primary":s&&4==s.playback_speed})},"4X"),c.default.createElement("a",{onClick:()=>this.set_playbackspeed(10),className:(0,l.default)({btn:!0,"btn-primary":s&&10==s.playback_speed})},"10X"),c.default.createElement("a",{onClick:()=>this.set_playbackspeed(1e3),className:(0,l.default)({btn:!0,"btn-primary":s&&1e3==s.playback_speed})},"Max"),c.default.createElement("br",null),c.default.createElement("br",null),c.default.createElement("label",null,(0,p.t)("Playback Sound")),c.default.createElement("br",null),c.default.createElement("a",{onClick:()=>this.set_sound(!0),className:(0,l.default)({btn:!0,"btn-primary":this.state.sound})},(0,p.t)("On")),c.default.createElement("a",{onClick:()=>this.set_sound(!1),className:(0,l.default)({btn:!0,"btn-primary":!this.state.sound})},(0,p.t)("Off")))),c.default.createElement("hr",{style:{borderColor:"#aaa"}}),c.default.createElement("div",null,c.default.createElement("label",{style:n},(0,p.t)("Speed"),":")," ",t.wpm," ",(0,p.t)("WPM")),c.default.createElement("div",null,c.default.createElement("label",{style:n},(0,p.t)("Duration"),":")," ",u.default.utc(1e3*t.duration).format("HH:mm:ss")),c.default.createElement("div",null,c.default.createElement("label",{style:n},(0,p.t)("Accuracy"),":")," ",t.accuracy,"%"),c.default.createElement("div",null,c.default.createElement("label",{style:n},(0,p.t)("Points"),":")," ",r.intcomma(t.score)),c.default.createElement("div",null,c.default.createElement("label",{style:n},(0,p.t)("Stars"),":")," ",c.default.createElement("img",{src:"https://static.typingclub.com/m/STARS/"+t.stars+"s5.png"}))),e))}}function k(e,t,a){approuter.show_modal(c.default.createElement(i.default,{id:"att-playback",width:1e3,padding:0,show_x:!1,onClose:()=>approuter.events.fire_event("unload")},c.default.createElement(w,{attempt:t,profile:e,instant:a})))}},23291:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(69606))&&s.__esModule?s:{default:s};function i(e,t,a,s,r){var i=t.get_typable();this.progress=parseInt(100*this.char_index/parseFloat(i.text_length)),this.id=a,this.index=s,this.char_dict=e,this.chr=e.chr,this.display_chr=r,this.dirty=!1,this.facts=t.facts,this.stats={valid:!1,dur:0,real_valid:!0},this.get_token=function(){return t},this.get_typable=function(){return i}}i.prototype.next=function(){var e=this.get_token();return this.id+1==e.length?e.next()?e.next().chars[0]:null:e.chars[this.id+1]},i.prototype.prev=function(){var e=this.get_token();if(0==this.id){var t=e.prev();return!!t&&t.chars[t.length-1]}return e.chars[this.id-1]},i.prototype.setPosition=function(e,t,a,s){this.left=t,this.top=e,this.width=s,this.token_left=a},i.prototype.focus=function(e){const t={1465:15,1473:35,1612:1,1614:1,1615:1,1616:1,1617:1};var a,s=this.get_typable(),r=s.render_props,i=s.facts;const n={width:this.width-i.char_margin_left-i.char_margin_right};"vertical_cursor"==r.cursor.className?(a=this.top+i.char_margin_top-7,r.is_cursive&&(a+=2),n.height=i.chr_h_with_lh+16):a=this.top+i.char_margin_top,n.marginTop=a+(r.logographic?i.chr_h+4:0);var o=this.get_token();if(r.is_rtl){const e=o.left,t=o.dom.offsetWidth,a=this.left-e;if(n.marginRight=i.offsetWidth-(this.left-a+t-a)+i.char_margin_right,this.width>0){let e=!1;const t=o.dom.children[1].children[this.index],a=i.offsetWidth-t.offsetLeft-t.offsetWidth;if(Math.abs(a-n.marginRight)>2)e=!0;else if(this.index>0){o.dom.children[1].children[this.index-1].offsetLeft<=t.offsetLeft&&(e=!0)}e&&(n.marginRight=a+t.offsetWidth)}}else{let e=this.left;if(r.logographic){const t=o.dom.children[this.index+1].children[this.id+1];t&&(e=t.offsetLeft)}n.marginLeft=e+i.char_margin_left}if(r.is_cursive&&r.char_assist){const e=o.dom.children[1].lastElementChild;e.className="_cassist";const a=e.children;let s=0;for(;s<a.length&&!a[s].classList.contains("_clr");)s++;for(a[s].classList.contains("_dfcs")||(a[s].className+=" _dfcs");s>0&&!a[s].offsetWidth;)s--;if(s<a.length-1&&a[s].offsetWidth&&!a[s+1].offsetWidth){a[s].offsetWidth;for(a[s++].className+=" _diacritic_base";s<a.length&&!a[s].offsetWidth;){const e=a[s].innerText;a[s].className+=" _diacritic _m"+(t[e.charCodeAt(0)]||2);const r=document.createElement("SPAN");r.innerText=e,a[s].innerText="",a[s].appendChild(r),s++}}e.className="_cassist _hide_rest",r.is_rtl?e.style.marginRight=n.marginRight+"px":e.style.marginLeft=n.marginLeft+"px"}e.css(n)},i.prototype.keydown=function(e){this.get_typable();this.char_dict.valid||this.overlay_fade(e)},i.prototype.overlay_fade=function(e){var t=this.get_token(),a=t.meta_node,s=document.createElement("span");s.className="_errchr token_unit",s.innerHTML=e;t.get_typable().cursor[0];if(this.get_typable().render_props.is_rtl){const e=t.dom.children[1].children[this.index];s.style.right=t.dom.offsetWidth-e.offsetLeft-e.offsetWidth+t.dom.offsetLeft+"px"}else s.style.left=this.token_left+"px";a.appendChild(s),(0,r.default)(s).delay(0).fadeOut(1e3),setTimeout((function(){(0,r.default)(s).remove()}),1e3)};t.default=i},98368:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(711)),r=i(a(69606));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){this.tokens=[],this.index=t,this.dom=(0,r.default)("<span />").addClass("line")[0],this.is_focused=!1,this.get_typable=function(){return e},e.lines.push(this)}n.prototype.add_token=function(e){this.tokens.push(e),e.line=this},n.prototype.mount=function(){for(var e=0,t=this.tokens.length;e<t;e++)this.dom.appendChild(this.tokens[e].dom);this.dom.appendChild(document.createElement("SPAN")),this.get_typable().arena.append(this.dom)},n.prototype.focus=function(){var e=this.get_typable();this.is_focused=!0,(0,r.default)(this.dom).addClass("active").removeClass("done").prevAll().addClass("done"),e.focused_line&&e.focused_line.blur(),e.focused_line=this},n.prototype.blur=function(){this.is_focused=!1,this.is_done=(0,s.default)(this.tokens.map((function(e){return e.is_done()}))),(0,r.default)(this.dom).removeClass("active")};t.default=n},76945:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(69606)),r=i(a(47642));function i(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e,t,a){this.line_transition=t,this.typable=e,this.events=new r.default(["cursor_move"]),this.typable.events.on("cursor_move",this.on_cursor_move.bind(this)),this.elm=(0,s.default)("<div />").css({height:0,overflow:"hidden"}).addClass("inview"),e.arena.replaceWith(this.elm),this.elm.append(e.arena),this.set_linecount(a),this.scroll(this.typable.cur_token.line.index),this.on_scroll_end=this.on_scroll_end.bind(this)}on_cursor_move(e){const t=e.position;this._last_position&&this._last_position.top==t.top&&this._last_position.left==t.left||(this._last_position=t,this.scroll(this.typable.cur_token.line.index,e.is_rerender))}on_scroll_end(){const e=this.typable.cursor;let t=e.offset();this.events.fire_event("cursor_move",{position:{top:t.top,left:t.left+e.width()/2}})}set_linecount(e){switch(this.lines=e,this.line_transition){case"scroll-no-bounce":this.typable.arena.parent().css({height:"100%"});break;case"scroll":const e=this.typable.facts.line_h_allin*this.lines;this.typable.arena.parent().stop().animate({height:e},1e3,"bounceout")}}scroll(e,t){var a=this.typable;let s;switch(this.lines){case 1:case 2:s=e;break;case 3:s=e-1;break;default:s=e-Math.round(this.lines/2)}var r=-Math.max(0,s)*a.facts.line_h_allin;t?(a.arena.stop().css({marginTop:r}),this.on_scroll_end()):setTimeout(function(){a.arena.stop().animate({marginTop:r},500,"",this.on_scroll_end)}.bind(this),200)}}},43720:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get_keyboards=function(e){n.default.getJSON("https://static.typingclub.com/m/engine/keyboards/keyboards.json",(t=>{for(var s={},r=0;r<t.length;r++){const e=t[r];if(s[e.code]=e,a.g.cordova){const t=[];for(var i=0;i<e.keyboards.length;i++)e.keyboards[i].browserOnly||t.push(e.keyboards[i]);e.keyboards=t}}e(t,s)}))},t.show_keyboard_assist=function(e){approuter.show_modal(r.default.createElement(s.default,{id:"keyboard-assist",width:550,padding:25,className:"keyboard-assist-modal"},r.default.createElement(u,e)))};var s=l(a(42644)),r=l(a(67294)),i=a(50751),n=l(a(69606)),o=l(a(76869));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=e=>{let{schema:t,with_keys:a,selected:s,onClick:i}=e;var n;const o=e=>"object"==typeof e?e&&e[0]&&(e[0].o||t.terminators[e[0]["->"]])||"":e;var l=t.keymap[" "],c=t.keymap.shift;const d={quote:o(l[2][10]),double_quote:o(c[2][10]),open_square:o(l[1][10]),close_square:o(l[1][11]),open_curly:o(c[1][10]),close_curly:o(c[1][11]),backslash:o(l[1][12]),pipe:o(c[1][12]),enter:t.labels&&t.labels.enter||"enter"};return n="iso"==t.layout?r.default.createElement("g",null,r.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),r.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),r.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),r.default.createElement("path",{className:"backslash",d:"M634.8,141.4c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3v-35.2c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V141.4z"}),r.default.createElement("path",{className:"path-enter active",d:"M668.9,141.4c0,1.6-1.3,3-3,3h-25.3c-1.7,0-3-1.4-3-3v-36.1c0-2.6-2.1-4.7-4.7-4.7h-5.6c-1.7,0-3-1.3-3-3V62.3c0-1.7,1.3-3,3-3h38.5c1.7,0,3.1,1.4,3.1,3V141.4z"}),r.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 138.7126)"},d.quote),r.default.createElement("text",{transform:"matrix(1 0 0 1 565.6211 120.3762)"},d.double_quote),r.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},d.open_square),r.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.877)"},d.open_curly),r.default.createElement("text",{transform:"matrix(1 0 0 1 598.7656 94.426)"},d.close_square),r.default.createElement("text",{transform:"matrix(1 0 0 1 598.3442 74.7849)"},d.close_curly),r.default.createElement("text",{transform:"matrix(1 0 0 1 610.4075 140.6807)"},d.backslash),r.default.createElement("text",{transform:"matrix(1 0 0 1 610.5442 118.677)"},d.pipe),r.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 631.6479 72.5581)"},d.enter)):r.default.createElement("g",null,r.default.createElement("path",{className:"quote",d:"M587.4,141.5c0,1.6-1.4,3-3,3h-36.5c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h36.5c1.6,0,3,1.3,3,3V141.5z"}),r.default.createElement("path",{className:"open-bracket",d:"M576.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),r.default.createElement("path",{className:"close-bracket",d:"M621.7,97.6c0,1.6-1.3,3-3,3h-36.5c-1.6,0-3-1.4-3-3V62.3c0-1.6,1.4-3,3-3h36.5c1.7,0,3,1.4,3,3V97.6z"}),r.default.createElement("path",{className:"backslash",d:"M668.8,97.6c0,1.6-1.3,3-3,3h-38.6c-1.6,0-3-1.4-3-3V62.4c0-1.6,1.4-3,3-3h38.6c1.7,0,3,1.4,3,3V97.6z"}),r.default.createElement("path",{className:"path-enter",d:"M668.8,141.5c0,1.6-1.3,3-3,3h-72.9c-1.7,0-3-1.4-3-3v-35.4c0-1.7,1.3-3,3-3h72.9c1.7,0,3,1.3,3,3V141.5z"}),r.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 138.7127)"},d.quote),r.default.createElement("text",{transform:"matrix(1 0 0 1 565.621 120.3763)"},d.double_quote),r.default.createElement("text",{transform:"matrix(1 0 0 1 553.3923 94.426)"},d.open_square),r.default.createElement("text",{transform:"matrix(1 0 0 1 552.9709 74.8769)"},d.open_curly),r.default.createElement("text",{transform:"matrix(1 0 0 1 598.7657 94.426)"},d.close_square),r.default.createElement("text",{transform:"matrix(1 0 0 1 598.3443 74.7849)"},d.close_curly),r.default.createElement("text",{transform:"matrix(1 0 0 1 644.3574 96.8807)"},d.backslash),r.default.createElement("text",{transform:"matrix(1 0 0 1 644.4941 74.8769)"},d.pipe),r.default.createElement("text",{className:"text-enter",transform:"matrix(1 0 0 1 636.3144 137.7128)"},d.enter)),r.default.createElement("svg",{className:"sample-layout"+(s?" selected":"")+(a?" with-keys":""),viewBox:"515 50 180 105",onClick:i},n)};class u extends r.default.Component{constructor(){super(...arguments),c(this,"prev_pages",[]),c(this,"state",{page:0,selected_schema_slug:this.props.keyboard,selected_schema_name:this.props.schema_name,selected_lang:this.props.schema_name.split(",")[0],layout_choices:this.props.layout_choices,enter_shape:null})}go_next(){const{page:e,enter_shape:t,layout_choices:a}=this.state;if(1==e)this.set_language_keyboard(this.state.selected_lang);else if(this.prev_pages.push(e),0==e)this.setState({page:1});else if(2==e){const e=a.filter((e=>e.schema.layout.startsWith(t)));1==e.length?this.set_schema(e[0],!0):this.setState({page:3})}else this.setState({page:4})}set_enter_shape(e){this.state.enter_shape=e,this.go_next()}set_schema(e){this.setState({page:4,selected_schema_name:e.name,selected_schema_slug:e.slug})}set_language_keyboard(e){const t=this.props.keyboards.filter((t=>t.code==e))[0].keyboards;this.setState({layout_choices:t});const a=[];for(let e of t)e.schema||a.push(new Promise((function(t,a){n.default.ajax({url:`https://static.typingclub.com/m/engine/keyboards/schema/${e.slug}.json`,dataType:"json",success:a=>{e.schema=a,t()},error:a})})));Promise.all(a).then((()=>{var e,a;this.prev_pages.push(this.state.page);for(let s of t)!s.schema.layout||s.schema.layout.startsWith("ansi")?a=s.schema:"iso"==s.schema.layout&&(e=s.schema);e&&a?this.setState({page:2,iso_kb:e,ansi_kb:a}):1==t.length?this.set_schema(t[0]):this.setState({page:3})}))}componentWillUpdate(e,t){4==t.page?(this.vkeyboard.style.display="block",t.selected_schema_slug==this.state.selected_schema_slug&&this.kb||(this.kb=new o.default(this.vkeyboard,t.selected_schema_slug,!0,!1))):this.vkeyboard.style.display="none"}componentDidUpdate(){if(1==this.state.page){(0,n.default)(".languages").scrollTop(1).scrollTop(0);const e=(0,n.default)(".languages .selectable.selected")[0];e&&e.scrollIntoView()}}componentWillUnmount(){this.kb&&this.kb.release()}render(){const{keyboards:e,update_keyboard_schema:t}=this.props,{page:a,selected_schema_slug:s,selected_lang:n,layout_choices:o,enter_shape:l}=this.state;var c;if(0==a&&(c=r.default.createElement("div",null,r.default.createElement("span",{className:"inline-settings-label"},(0,i.t)("Layouts")),r.default.createElement("div",{className:"layouts",style:{marginTop:12}},o.map((e=>r.default.createElement("span",{key:e.slug,className:"selectable "+(s==e.slug?"selected":""),onClick:()=>{t(e.slug),this.setState({selected_schema_slug:e.slug})}},r.default.createElement("span",{className:"edicon-layout-keyboard-icon"}),e.name)))))),1==a&&(c=r.default.createElement("div",null,r.default.createElement("span",{className:"inline-settings-label"},(0,i.t)("Language")),r.default.createElement("div",{className:"languages"},e.map((e=>r.default.createElement("span",{key:e.code,style:{pointerEvents:"initial"},className:"selectable "+(n==e.code?"selected":""),onClick:()=>{this.state.selected_lang=e.code,this.go_next()}},e.name," ",r.default.createElement("br",null),r.default.createElement("small",null,e.nativeName))))))),2==a&&(c=r.default.createElement("div",null,r.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,i.t)("What does the <b>enter key</b> on your keyboard look like?")}}),r.default.createElement("div",{style:{paddingTop:20,textAlign:"center"}},r.default.createElement(d,{selected:"ansi"==l,onClick:()=>this.set_enter_shape("ansi"),schema:this.state.ansi_kb}),r.default.createElement("hr",{className:"divider",style:{height:130}}),r.default.createElement(d,{selected:"iso"==l,onClick:()=>this.set_enter_shape("iso"),iso:!0,schema:this.state.iso_kb})))),3==a){var u=o;l&&(u=o.filter((e=>e.schema.layout.startsWith(l)))),c=r.default.createElement("div",null,r.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,i.t)("Which of the following options match the <b>keys around</b> the <b>enter key</b> on your keyboard?")}}),r.default.createElement("div",{style:{paddingTop:20,textAlign:u.length>2?"left":"center"}},u.map(((e,t)=>r.default.createElement("span",{style:{display:"inline-block",verticalAlign:"top",width:181},key:t},t%3?r.default.createElement("hr",{className:"divider"}):null,r.default.createElement(d,{selected:e.slug==s,onClick:()=>{this.prev_pages.push(a),this.set_schema(e)},schema:e.schema,with_keys:!0}),r.default.createElement("div",{style:{marginBottom:10,textAlign:"center",padding:"0 10px"}},e.name))))))}return 4==a&&(c=r.default.createElement("div",null,r.default.createElement("span",null,(0,i.t)("Based on the information you provided, your keyboard is {{name}}",{name:""}),r.default.createElement("span",{className:"highlighted"},this.state.selected_schema_name),"."))),r.default.createElement("div",null,r.default.createElement("div",{style:{fontWeight:500,margin:-25,padding:"15px 25px",borderBottom:"solid 1px #ddd"}},(0,i.t)("Identify Keyboard Layout")),r.default.createElement("div",{className:"settings-panel",style:{padding:"50px 0"}},c,r.default.createElement("div",{className:"keyboard-identified",ref:e=>this.vkeyboard=e})),r.default.createElement("div",{style:{margin:-25,padding:"15px 20px",fontSize:17,borderTop:"solid 1px #ddd"}},this.prev_pages.length?r.default.createElement("button",{className:"btn btn-sm btn-link",onClick:()=>this.setState({page:this.prev_pages.pop()})},r.default.createElement("span",{className:"icon icon-chevron-left"}),(0,i.t)(" Back")):null,r.default.createElement("div",{className:"pull-right"},a>0&&a<4?r.default.createElement("button",{className:"btn btn-primary",onClick:()=>this.go_next()},(0,i.t)("Next")):r.default.createElement("button",{className:"btn "+(0==a?"btn-default":"btn-primary"),onClick:()=>{4==a&&this.props.update_keyboard_schema(s),approuter.hide_modal("keyboard-assist")}},(0,i.t)("Done")),r.default.createElement("span",{className:"hspacer"}),0==a&&r.default.createElement("button",{className:"btn btn-primary",onClick:()=>this.go_next()},(0,i.t)("Help me identify my layout")))))}}},13016:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(a(76869)),r=c(a(67294)),i=c(a(69606)),n=a(50751),o=a(43720),l=c(a(42644));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u="ignore_possible_keyboard_mismatch";class p extends r.default.Component{constructor(e){super(e),this.ele=null}show(){this.ele.animateCss("flipInX",(()=>this.ele.show()))}hide(){this.ele.animateCss("fadeOut",(()=>this.ele.hide()))}componentDidMount(){this.show()}componentDidUpdate(){this.props.hidden&&this.ele.is(":visible")?this.hide():this.props.hidden||this.ele.is(":visible")||this.show()}render(){const{width:e,indicatorTop:t}=this.props,a={marginTop:Math.min(20,window.innerHeight-200),width:e,minHeight:t+30};return r.default.createElement("div",{ref:e=>this.ele=(0,i.default)(e),style:a,className:"keyboard-popup",tabIndex:-1,"aria-hidden":!0},r.default.createElement("div",null,this.props.children,r.default.createElement("i",{className:"right-indicator",style:{top:t}})))}}class h extends r.default.Component{constructor(){super(...arguments),d(this,"state",{hidden:!1})}hide(){this.setState({hidden:!0})}render(){return r.default.createElement(p,{width:306,indicatorTop:40,hidden:this.state.hidden},r.default.createElement("h4",{style:{marginTop:0}},(0,n.t)("Incorrect Keyboard Detected")),(0,n.t)("It looks like you have the wrong keyboard layout selected. We suggest you review your keyboard layout and make sure its compatible with this lesson."),r.default.createElement("div",{style:{marginTop:15}},r.default.createElement("button",{className:"btn btn-primary",onClick:()=>{(0,o.get_keyboards)(((e,t)=>{const{keyboard_schema:a,update_keyboard_schema:s}=this.props;let r=approuter.profile;const i=t[r.keyboard.split(",")[0]].keyboards,n=(i.filter((e=>r.keyboard==e.slug))[0]||{name:r.keyboard}).name;(0,o.show_keyboard_assist)({keyboard_schema:a,keyboards:e,lang_keyboard_map:t,layout_choices:i,update_keyboard_schema:s,schema_name:n})})),this.hide()}},(0,n.t)("Update Keyboard Layout")),r.default.createElement("button",{className:"btn btn-link",onClick:()=>{localStorage.setItem(u,!0),this.hide()}},"Dismiss")))}}class f extends r.default.Component{constructor(e){super(e),this.ele=null,this.ignore=this.props.core.ignore_case,this.state={active:!1,hidden:!1}}hide(){this.setState({hidden:!0})}componentDidMount(){this.ignore||this.props.core.events.on("capslock_detected",(e=>{e?this.ignore||this.setState({hidden:!1,active:!0}):this.state.active&&this.hide()}))}render(){const e=(0,n.t)("We detected that you have CapsLock key ON. Press the CapsLock key again to turn it off.");return this.state.active?r.default.createElement(p,{width:241,indicatorTop:85,hidden:this.state.hidden},r.default.createElement("h4",{style:{marginTop:0}},(0,n.t)("CapsLock ON")),e,r.default.createElement("button",{className:"btn btn-link",style:{display:"block",marginTop:10,marginLeft:-10},"aria-label":e,onClick:()=>{localStorage.setItem(u,!0),this.hide(),this.ignore=!0}},"Dismiss")):null}}class m extends r.default.Component{constructor(e){super(e),d(this,"state",{possible_keyboard_mismatch:!1,showPopups:!1});const{keyboard_layout:t,core:a,is_junior:s,use_minimal:r}=e;this.minimal_keyboard_ui=r&&/^[a-z| ]*$/.test(a.text),this.keyboard_layout=!s&&this.minimal_keyboard_ui?0:t,this.theme=this.minimal_keyboard_ui&&!s?"bone":null}async componentDidMount(){const{onLoaded:e,keyboard_schema:t,show_keyboard:a,show_hand:r,use_hand:i,anchoring:n}=this.props;var o=new s.default(this.refs.kb,t,a,r,this.keyboard_layout,i,null,this.theme,this.props.one_char_per_key);core.events.on("keydown",(function(e){(e.new_char_dict||!e.is_valid||e.deadkey)&&o.handle_keydown_event(e,core.cur_char.chr,core.dead_key_active,core.chars[core.cur_char_index+1],core.chars[core.cur_char_index+2])})),core.events.on("abort",(e=>e.punching&&this.show_warn_keyboard_punching())),core.events.on("end",(()=>{this.setState({showPopups:!1}),o.release()})),o.events.on("layout_updated",function(e){if(!core.use_hand&&n){var t=o.get_anchor_chars(),a=o.detect_anchoring_hand(core.text);if(a){let e;e="right"==a?t[0]:t[1],core.anchor(a,e)}else core.clear_anchor()}else core.clear_anchor()}.bind(this)),o.events.on("possible_keyboard_mismatch",(()=>{localStorage.getItem(u)||this.setState({possible_keyboard_mismatch:!0})})),await o.loading,e?e(o,this.refs.kb):this.refs.kb.style.opacity=1;let l=r;o.highlight(core.cur_char.chr,core.dead_key_active,core.chars[core.cur_char_index+1]),l&&("left"==l?o.$left_hand&&o.$left_hand.hide():o.$right_hand&&o.$right_hand.hide()),this.setState({showPopups:!0}),this.keyboard=o}componentWillUnmount(){this.keyboard&&this.keyboard.release()}show_warn_keyboard_punching(){var e;function t(){approuter.hide_modal("keyboard_punching"),approuter.refresh(),e&&clearTimeout(e)}approuter.show_modal(r.default.createElement(l.default,{id:"keyboard_punching",width:"100vw",padding:0,show_x:!1,close_outside:!1,esc_close:!1,style:{boxShadow:"0 0 200px #444"}},r.default.createElement("div",{style:{background:"rgba(0,0,0,.9)",fontSize:25,textAlign:"center",padding:60}},r.default.createElement("div",null,(0,n.t)("Please focus on your accuracy and try again.")),r.default.createElement("div",{className:"btn btn-default btn-lg",style:{marginTop:10},onClick:t},(0,n.t)("Restart Lesson"))))),e=setTimeout(t,4e3)}render(){const{className:e,style:t,keyboard_schema:a,show_keyboard:s,show_hand:i,use_hand:n,is_junior:o}=this.props;return r.default.createElement("div",{className:"keyboard-plugin",style:{width:"100%"}},this.state.showPopups&&r.default.createElement(r.default.Fragment,null,r.default.createElement(f,{core:core}),this.state.possible_keyboard_mismatch&&r.default.createElement(h,{keyboard_schema:a,update_keyboard_schema:e=>{approuter.update_profile({keyboard:e}).then((()=>this.props.refreshUI(e)))}})),r.default.createElement("div",{ref:"kb",className:(e||"")+(o?" junior-kb":this.minimal_keyboard_ui?" bone":""),style:Object.assign({opacity:0},t),tabIndex:-1,"aria-hidden":!0}))}}t.default=m},60513:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(s,n,o):s[n]=e[n]}s.default=e,a&&a.set(e,s)}(a(71327));var s,r=(s=a(24040))&&s.__esModule?s:{default:s};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(i=function(e){return e?a:t})(e)}function n(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n(this,"play_keystroke",(e=>{if(!e.chr)return;if(this.is_mute)return;const t=!this.no_error&&!(e.is_valid||e.deadkey);this.audio_player.play(t?"error":"typewriter",!0)})),this.core=e,this.is_mute=t,this.no_error=a,s)this.audio_player=s;else{const t=this.audio_player=new r.default;t.load("typewriter").then((()=>{e.events.on("keydown",this.play_keystroke)})).catch((()=>console.log("failed to load audio"))),t.load("error").catch((()=>this.is_mute=!0))}}}},51546:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=o(a(23291)),r=o(a(69606)),i=a(71327),n=a(50751);function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a,s,r){this.id=a,this.signs=e,this.color=s||"",this.facts=t.facts,this.render_props=t.render_props,this.focused=!1,this.get_typable=function(){return t},this.create_char_objs(),this.initial_dom_setup()}function c(e,t){if(!t||5==t)return null;const a={a:["a","","","",""],o:["o","","","",""],e:["e","","","",""],i:["i","","","",""],u:["u","","","",""]},s=e.map((function(e){return e.chr}));let r=-1;for(let i in e){if("aoe".indexOf(s[i])>=0)return s[i]=a[s[i]][t],s.join("");"ui".indexOf(s[i])>=0&&(r=i)}return r>=0&&(s[r]=a[s[r]][t]),s.join("")}l.prototype.focus=function(){this.focused=!0,(0,r.default)(this.dom).addClass("_fcs"),this.line&&this.line!=this.get_typable().focused_line&&this.line.focus(),this.meta_node.innerHTML=""},l.prototype.blur=function(){this.focused=!1,(0,r.default)(this.dom).removeClass("_fcs"),this.render_props.annotate_speed&&this.speed_feedback()},l.prototype.is_done=function(){for(var e=this.chars,t=0,a=e.length;t<a;t++)if(!e[t].char_dict.dirty)return!1;return!0},l.prototype.next=function(){return this.get_typable().tokens[this.id+1]},l.prototype.prev=function(){return this.id?this.get_typable().tokens[this.id-1]:null},l.prototype.create_char_objs=function(){for(var e=this.chars=[],t=this.signs,a=0,r=this.signs.length;a<r;a++){var i=t[a].t,n=t[a].tone,o=null;n&&"1234".indexOf(n)>=0&&(o=c(t[a].t,n));for(var l=0,d=i.length;l<d;l++){var u=new s.default(i[l],this,l,a,o&&o[l]);e.push(u),this.get_typable().chars.push(u)}}},l.prototype.initial_dom_setup=function(){var e=this.meta_node=document.createElement("SPAN");e.className="_toknmeta";var t=document.createElement("SPAN"),a=document.createElement("SPAN");t.appendChild(a),t.appendChild(e),this.dom=t,this.render()};var d={"&":"&amp;",">":"&gt;","<":"&lt;","\n":'<span class="_enter">&nbsp;</span><br />'," ":"&nbsp;<i> </i>","\t":'<span class="_tab">&nbsp;&nbsp;&nbsp;&nbsp;</span>'};function u(e){return e in d?d[e]:e}l.prototype.render=function(){var e=this.render_props.logographic,t=this.render_props.is_cursive&&this.render_props.char_assist,a=this.chars,s=this.signs,i=document.createElement("SPAN");i.appendChild(this.meta_node);var n=i;t&&((n=document.createElement("SPAN")).className="_chars",i.appendChild(n));const o=(e,t)=>{var a=document.createElement("SPAN");return 1==e.length?a.appendChild(document.createTextNode(e)):a.innerHTML=e,a.className="token_unit "+this.color+" "+t,a};for(var l=0,c=!1,d=null,p=null,h=!0,f=0,m=s.length;f<m;f++){for(var _=s[f],g=!0,y=!1,v="",b=[],w=null,k=0,x=_.t.length;k<x;k++){var E,S=a[l++],j=S.char_dict;"\n"==j.chr&&(c=!0),j.dirty||(g=!1),j.valid||(y=!0);for(var O=j.valid,C=j.real_valid,N=l;N<m&&!a[N].width&&a[N].char_dict.dirty;)O=O&&a[N].char_dict.valid,C=C&&a[N].char_dict.real_valid,N++;E=O&&!C?"_ervld":j.dirty?O?"_vld":"_err":"_clr";var P=S.display_chr||S.chr;!(e||w&&"_clr"!==w)?"_clr"!==w?(v=u(P),w=E):v+=u(P):(v&&(b.push(o(v,w)),v=""),w=E,v+=u(P))}if(v&&b.push(o(v,w)),e){(d=document.createElement("SPAN")).className="lgram"+(g?y?" _err_gram":" _vld_gram":h?" _fcs_gram":""),h=g,(p=document.createElement("DIV")).innerHTML=_.g,d.appendChild(p);for(let e of b)d.appendChild(e);n.appendChild(d)}else for(let e of b)n.appendChild(e)}if(t){var M=(0,r.default)(n).clone()[0];M.className="_cassist",n.appendChild(M)}c&&e&&i.appendChild(document.createElement("BR")),i.className="token"+(this.focused?" _fcs":"")+(e?" _logo":""),(0,r.default)(this.dom).replaceWith(i),this.dom=i},l.prototype.set_char_positions=function(e,t,a,s){var r,i=this.top=this.dom.offsetTop-e,n=this.left=this.dom.offsetLeft-t;this.first_word_in_line=0==n;for(var o=this.chars,l=0,c=0,d=0,u=o.length;d<u;d++){var p=o[d],h=s<0?a[p.chr]:a[s+d];r=n+l,p.setPosition(i,r-(0==h?c:0),l,h),l+=h,0==h?0:(0,c=h)}},l.prototype.speed_feedback=function(){for(var e=0,t=0,a=(this.get_typable(),0),s=this.chars.length;a<s;a++){var o=this.chars[a];o.chr.match("[., ]")||o.char_dict.dur&&(o.char_dict.valid&&e++,t+=o.char_dict.dur)}if(e>3){var l=(0,i.calc_wpm)(e,t),c=(0,r.default)("<span />").addClass("meta-word").html(l+" <sup>"+(0,n.t)("wpm")+"</sup> "),d=(0,r.default)('<img src="https://static.typingclub.com/m/engine/img/star.png" width="10px" />');const a=()=>d.clone();e>4&&(30<=l&&l<40?c.append((0,r.default)("<b />").html((0,n.t)("Good"))):40<=l&&l<50?c.append((0,r.default)("<b />").html((0,n.t)("Nice!"))):50<=l&&l<60?c.append((0,r.default)("<b />").html((0,n.t)("Great!"))):60<=l&&l<70?c.append((0,r.default)("<b />").html((0,n.t)("Great!")).append(a())):70<=l&&l<80?c.append((0,r.default)("<b />").html((0,n.t)("WOW")).append(a())):80<=l&&l<100&&c.append((0,r.default)("<b />").html((0,n.t)("WOW!")).append(a(),a())),l>=100&&c.append((0,r.default)("<b />").html((0,n.t)("WOW!")).append(a(),a(),a()))),(0,r.default)(this.meta_node).prepend(c.fadeIn("slow"))}},l.prototype.green_check=function(){(0,r.default)(this.meta_node).prepend((0,r.default)('<div style="text-align:center;color:#a9d000;"><i style="position:absolute;" class="icon icon-check gcheck"></i></div>'))};t.default=l},10564:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.get_render_props=function(e,t){const a={annotate_speed:!0,display_className:"normal",display_row_range:[3,5],line_transition:"scroll",token_split_regex:/\n| |\t/,cursor:{className:"normal_cursor"},anchor_hand:{"right-anchor":"right","left-anchor":"left"}[e]||null,size:"med"};switch(e){case"abjad":return Object.assign(a,{cursor:{className:"vertical_cursor"},is_rtl:!0,is_cursive:!0,char_assist:!0});case"story":return Object.assign(a,{annotate_speed:!1,line_transition:"scroll-no-bounce",cursor:{className:"story_cursor"}});case"instant":return Object.assign(a,{display_className:"normal hide-bottom-line hide-cursor",line_transition:"scroll-no-bounce",size:"small"});case"placement":return Object.assign(a,{display_className:"normal hide-bottom-line",line_transition:"scroll-no-bounce",size:"small"});case"code":return Object.assign(a,{display_className:"code",token_split_regex:/\n| |\t|\./,size:"small",display_row_range:[3,15]});case"logographic":return Object.assign(a,{logographic:!0,display_row_range:[2,4]});default:return a}};var s=d(a(51546)),r=d(a(98368)),i=(d(a(67294)),d(a(47642))),n=d(a(69606)),o=a(71327),l=d(a(5171)),c=d(a(75933));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.arena=(0,n.default)(e),this.core=a,this.render_props=t,this.replay_mode=s,this.lines=[],this.tokens=[],this.chars=[],this.events=new i.default(["cursor_move"]),this.token_opts={show_extras:!0},this.tokenize(),this.clean_rerender(),this.check_for_font_change_interval=100,this.check_for_font_change(),this.core.events.on("keydown",this.keydown.bind(this)),this.render_props.farsiFont&&c.default.load({custom:{families:["Abjad"],urls:["https://static.typingclub.com/m/corp2/css/font-abjad.css"]},classes:!1}),p(this.core.chars.map((e=>e.chr)))&&(this.render_props.is_cursive=!0)}function p(e){let t=0;for(let a of e)a>=""&&a<=""&&t++;return t/e.length>.1}u.prototype.clean_rerender=function(e){this.gather_arena_facts(),this.initial_dom_setup(),this.linify(),this.create_cursor(),this.cache_char_positions(),this.cur_token||this.focus_token(this.tokens[0]),this.cur_char().focus(this.cursor),this.announce_cursor_position({is_rerender:!0})},u.prototype.announce_cursor_position=function(e){e=e||{};let t=this.cursor.offset();this.events.fire_event("cursor_move",Object.assign(e,{position:{top:t.top,left:t.left}}))},u.prototype.keydown=function(e){if(!e.deadkey){var t=this.chars[e.old_char_dict.index];if("<-"!=e.chr&&t.keydown(e.chr),(e.new_char_dict||e.end_lesson)&&t.get_token().render(),e.new_char_dict){var a=this.chars[e.new_char_dict.index];a.get_token().render(),a.get_token()!=t.get_token()&&this.focus_token(a.get_token()),a.focus(this.cursor),this.announce_cursor_position()}}},u.prototype.focus_token=function(e){e!=this.cur_token&&(this.cur_token&&this.cur_token.blur(),this.cur_token=e,e.focus())},u.prototype.linify=function(){if(this.arena.removeClass("linified"),this.lines=[],this.tokens.length){var e,t=[],a=[];for(let r of this.tokens){var s=r.dom.childNodes[1].offsetTop;null==e&&(e=s),s!=e&&(e=s,t.push(a),a=[]),a.push(r)}a.length>0&&t.push(a);var i=0;for(let e of t){var o=new r.default(this,i++);for(let t of e)o.add_token(t)}for(let e of this.lines)e.mount();(0,n.default)(this._tokens_nd).remove(),this.arena.addClass("linified")}},u.prototype.cache_char_positions=function(){for(var e=this.tokens,t=this.render_props.is_cursive,a=t?0:-1,s=0,r=e.length;s<r;s++)e[s].set_char_positions(this.facts.offsetTop,this.facts.offsetLeft,this.facts.per_char_facts,a),t&&(a+=e[s].chars.length)},u.prototype.initial_dom_setup=function(){var e=document.createElement("SPAN");e.className="line";for(var t=this.tokens,a=0,s=t.length;a<s;a++)e.appendChild(t[a].dom),e.appendChild(document.createTextNode(" "));this.replay_mode?this.arena.addClass("replay_mode"):this.arena.addClass("play_mode"),this.render_props.koreanLocale&&this.arena.addClass("korean"),this.core.ignore_case&&this.arena.css("text-transform",this.render_props.keyboard_lowercase?"lowercase":"uppercase"),this.arena.html(""),this.arena.append(e),this._tokens_nd=e},u.prototype.get_per_char_facts=function(){var e=this.render_props.is_cursive,t=e?[]:{},a=(0,n.default)("<div/>");a.css("position","absolute");var s=this.core.text.split("");if(!s.length)return t;for(let r in s){let i=s[r];if(!e&&t[i])continue;let o=(0,n.default)("<span/>");o.addClass("token_unit __no-lineheight");const l={"\t":"&nbsp;&nbsp;&nbsp;&nbsp;"," ":"&nbsp;","\n":"&nbsp;"}[i];o.html(l||i),a.append(o),t[e?r:i]=o}this.arena.prepend(a);let r=t[e?0:s[0]];function i(e){return(0,o.px2int)(r.css(e))}var l=i("padding-left")+i("padding-right")+i("border-left-width")+i("border-right-width")+i("margin-right")+i("margin-left");const c=o.isSafari?-1:0;for(const e in t)t[e]=t[e].width()+l+c;return(0,n.default)(a).remove(),t},u.prototype.gather_arena_facts=function(){var e=this.arena;this.facts||(this.facts={});var t=this.facts;t.per_char_facts=this.get_per_char_facts();let a="A"+this.chars.slice(0,10).map((e=>e.chr)).join("");this.render_props.logographic&&(a=escape(a));var s=(0,n.default)("<span />").html(a).addClass("token_unit"),r=(0,n.default)("<span />").addClass("line").append(s);function i(e){return(0,o.px2int)(s.css(e))}function l(e){return(0,o.px2int)(r.css(e))}e.prepend(r);const c=r.height();var d=i("padding-top")+i("padding-bottom")+i("border-top-width")+i("border-bottom-width");t.chr_h_with_lh=c+d,t.chr_h_allin=c*(this.render_props.logographic?2.2:1)+d+i("margin-top")+i("margin-bottom"),t.line_h_allin=t.chr_h_allin+l("margin-top")+l("margin-bottom")+l("padding-top")+l("padding-bottom"),t.char_margin_top=i("margin-top"),t.char_margin_bottom=i("margin-bottom"),t.char_margin_left=i("margin-left"),t.char_margin_right=i("margin-right"),t.offsetTop=e[0]?e[0].offsetTop:0,t.offsetLeft=e[0]?e[0].offsetLeft:0,t.offsetWidth=e[0]?e[0].offsetWidth:0,s.addClass("__no-lineheight token_unit"),t.chr_h=s.height(),r.remove()},u.prototype.tokenize=function(){var e=this.tokens,t=[],a=!1,r=0,i=this.render_props.token_split_regex;if(this.render_props.logographic){let a=0;for(let i of this.core.tokens){let o=[];for(let e of i.signs){t=[];for(let s in e.t){var n=this.core.chars[a++];t.push(n)}o.push({g:e.g,t:t,tone:e.tone})}e.push(new s.default(o,this,r++,d,this.token_opts))}return}const o=this.render_props.format?function(e,t){const a=l.default.highlight(t,e).value,s=(new DOMParser).parseFromString(`<i>${a}</i>`,"text/xml").firstElementChild,r=[];return function e(t,a){if(t.nodeType==t.TEXT_NODE){let e=t.nodeValue;r.length>0&&(" "==e[0]||"\n"==e[0])&&(r[r.length-1].text+=e[0],e=e.substr(1)),e.length>0&&r.push({color:a,text:e})}else t.nodeType==t.ELEMENT_NODE&&t.childNodes.forEach((s=>e(s,a+(t.className?" "+t.className:""))))}(s,"hljs"),r}(this.core.text,this.render_props.format):[{text:this.core.text,color:""}];var c=0,d="";for(var u of o){for(var p=0;p<u.text.length;p++){n=this.core.chars[c];a&&(e.push(new s.default(t,this,r++,d,this.token_opts)),a=!1,t=[]),d=u.color,t.push({g:n.chr,t:[n]}),a=null!=n.chr.match(i)||t.length>20,c++}a=!0}t&&e.push(new s.default(t,this,r++,d,this.token_opts))},u.prototype.cur_char=function(){return this.chars[this.core.cur_char_index]},u.prototype.did_font_change=function(){var e=parseInt((0,n.default)(this.tokens[0].dom).height());return e!=this.facts.chr_h&&(this.font_change_report_count=this.font_change_report_count||0,this.font_change_report_count++),e!=this.facts.chr_h},u.prototype.check_for_font_change=function(){this.did_font_change()&&this.update_font_change(),this.check_for_font_change_interval+=600,this.check_for_font_change_interval<3e3&&(0,o.setTimeout)(this.check_for_font_change.bind(this),this.check_for_font_change_interval)},u.prototype.update_font_change=function(){this.gather_arena_facts(),this.cache_char_positions(),this.cursor.css({height:this.facts.chr_h_with_lh})},u.prototype.change_font=function(e){e?this.render_props.is_cursive?this.render_props.farsiFont?this.arena.css("font-family","YekanBold"):this.arena.css("font-weight","bold"):this.arena.css("font-family",e):e=""},u.prototype.create_cursor=function(){var e=this.cursor=(0,n.default)("<span>").addClass("cursor");this.render_props&&this.render_props.cursor&&this.render_props.cursor&&this.cursor.addClass(this.render_props.cursor.className),e.css({width:22,height:this.facts.chr_h_with_lh}),this.arena.prepend((0,n.default)("<div/>").append(e))};t.default=u},84460:(e,t,a)=>{a(85827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(a(47642)),r=h(a(69606)),i=h(a(1469)),n=h(a(63137)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(71327)),l=o,c=h(a(38452)),d=a(50751),u=h(a(26943));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}const f=!(navigator.platform&&navigator.platform.startsWith("Linux armv")),m={de_CH:"<>1+2\"3#*45[%6]&7|/\\8{(9})0='?^qQwWeErRtTzZuUiIoOpP!$aAsSdDfFg@GhHjJkKlLyYxXcCvVbBnNmM,;.:-_",de_DE:"<>1+2\"3#*45[%6]&7|/\\8{(9})0='?^qQwWeErRtTzZuUiIoOpP!$aAsSdDfFg@GhHjJkKlLyYxXcCvVbBnNmM,;.:-_"};function _(e){var t;window.core=this;const a=(null===(t=approuter)||void 0===t||null===(t=t.program)||void 0===t?void 0:t.locale)||"",r=a.split("_")[0];const i="kanji"==(((window.approuter||{}).lesson||{}).activity||{}).format;this.korean_locale="ko"===r,this.no_input_mode=l.isIOS&&(e.is_logograms||!function(e){const t=m[a];if(t){const a=new Set([...t," ","\n","\t"]);for(let t=0;t<e.length;t++)if(!a.has(e[t]))return!0}else for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>127)return!0;return!1}(e.text))||e.handle_pinyin||i,this.is_logograms=e.is_logograms,e.is_logograms?(this.tokens=e.text,this.create_char_profiles(this.tokens.map((e=>e.signs.reduce(((e,t)=>e.concat(t.t)),[]).join(""))),this.tokens.map((e=>e.signs.reduce(((e,t)=>e.concat(t.g)),[]).join(""))))):this.create_char_profiles(e.text.split(/(?= )/g)),e.handle_pinyin?this.special_input_punctuation_map=l.pinyin_input_punctuation_map():i&&(this.special_input_punctuation_map=(0,n.default)(l.jp_input_punctuation_map())),this.handle_special_punctuation=e.handle_pinyin||i,this.text=this.chars.map((e=>e.chr)).join("");let o=!1;window.approuter&&window.approuter.profile&&(o=approuter.profile.is_blind),this.lesson_id=e.lesson_id,this.on_error=o?"block":e.on_error,this.profile_block_on_errors=e.profile_block_on_errors,this.latest_error_count=0,this.deletable=null==e.deletable||e.deletable,this.start_on_correct=e.start_on_correct||!1,this.max_secs=e.max_secs,this.is_test=e.is_test,this.ignore_case=e.ignore_case||!1,this.no_auto_end_lesson=e.no_auto_end_lesson||!1,this.no_beater=e.no_beater||!1,this.log=[],this.per_char_performance_profile=[],this.text&&(this.cur_char=this.chars[0]),this.cur_char_index=0,this.cur_word_index=0,this.reset_stats(),this.prev_capslock_detected=!1,this.has_started=!1,this.has_ended=!1,this.pause_start=0,this.paused=!1,this.last_pause_duration=0,this.pause_count=0,this.capturing=!1,this.use_hand=e.use_hand,this.anchor_key=null,this.anchor_side=null,this.is_anchoring=!1,this.playback_speed=1,this.events=new s.default(["start","pause","unpause","stats_update","end","progress","backspace_prevented","keydown","attached","detached","word_changed","anchor_start","anchor_stop","abort","anchor_updated","anchor_abort","capslock_detected"]),this.stats={duration:0,valids:0,errors:0,total_chars:0},this.no_input_mode||this.init_keyboard_focus(),this.bound_keypress_handler=this._keypress_handler.bind(this),this.bound_input_handler=this._input_handler.bind(this),this.bound_input_handler_keydown=this._input_handler_keydown.bind(this),this.bound_input_handler_keyup=this._input_handler_keyup.bind(this)}_.prototype.start=function(){this.events.fire_event("start",{}),this.reset_stats(),this.has_started=!0,this.last_pause_duration=0,this.no_auto_end_lesson||this.no_beater||this.start_beater()},_.prototype.end_lesson=function(e){this.detach_capture(),this.end_time=new Date,this.has_ended=!0,this.stop_beater();var t=[];for(var a of this.log)a.chr?t.push([a.chr,a.delay]):t.push(a);this.last_keydown&&t.push(["",new Date-this.last_keydown-(this.last_pause_duration||0)]);var s=0;for(var r of this.chars)r.dirty&&(s=r.index);var i={per_chr:this.chars.slice(0,s+1),history:t,lesson_text:this.text.slice(0,s+1),is_partial:e?1:0,deletable:this.deletable,on_error:this.on_error,profile_block_on_errors:this.profile_block_on_errors,use_hand:this.use_hand};this.is_logograms&&(i.render_engine="logographic",i.lesson_text=this.tokens),this.report_performance_profile(),this.$ios_keyboard&&(this.$ios_keyboard.remove(),this.$ios_keyboard=null),this.events.fire_event("end",i)},_.prototype.clear_anchor=function(){this.anchor_side=null,this.anchor_key=null,this.events.fire_event("anchor_abort",{})},_.prototype.force_input_capture_mode=function(){this.no_input_mode&&(this.capturing?(this.detach_capture(),this.no_input_mode=!1,this.init_keyboard_focus(),this.attach_capture()):(this.no_input_mode=!1,this.init_keyboard_focus()))},_.prototype.anchor=function(e,t){this.anchor_side=e,this.anchor_key=t,(0,o.setTimeout)(function(){this.events.fire_event("anchor_updated",{side:this.anchor_side,key:this.anchor_key}),this.events.fire_event("anchor_stop",{})}.bind(this))},_.prototype.calc_progress=function(){var e=this.text.length,t=parseInt(1e3*this.cur_char_index/e)/10;t!=this.progress&&(this.progress=t,this.events.fire_event("progress",this.progress))},_.prototype.profile_keydown_start=function(){this.keydown_t1=new Date},_.prototype.profile_keydown_end=function(){var e=new Date-this.keydown_t1;this.per_char_performance_profile.push(e)},_.prototype.report_performance_profile=function(){try{if(!window.localStorage)return;if(localStorage.getItem("performance-logged"))return;localStorage.setItem("performance-logged",1)}catch(e){return}var e=100,t=0,a=0,s=0;for(var r of this.per_char_performance_profile)a+=r,e=Math.min(e,r),t=Math.max(t,r),s+=1;parseInt(.5+a/s)},_.prototype.is_valid=function(e){let t=this.cur_char;if(!t)return!1;let a=!1;if(a=this.ignore_case?t.chr.toUpperCase()==e.toUpperCase():t.chr==e,!a)if(this.handle_special_punctuation)a=t.chr==this.special_input_punctuation_map[e];else{const s={"":"","":"","":"'","":'"',1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""};a=t.chr==s[e]}return a},_.prototype.record_keydown_time=function(e,t){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.profile_keydown_start();var s=this.cur_char,r=!1;let i;if("<-"==e){if(0==this.cur_char_index)return!1;if(!this.deletable)return a&&this.events.fire_event("backspace_prevented")}else i=this.is_valid(e),i&&(e=s.chr),i||"block"!=this.on_error&&this.latest_error_count!=this.profile_block_on_errors-1||(r=!0);if(!this.has_started||s&&0==s.index){if(!i&&this.start_on_correct)return;this.start()}if(this.paused&&this.unpause(),null==t){t=0;var n=new Date;this.last_keydown&&(t=n-this.last_keydown-this.last_pause_duration),this.last_keydown=n}this.last_pause_duration=0,this.stats.duration+=t,this.log.push({chr:e,delay:t,is_valid:i});var o=this.cur_char,l=!1;let c=!1;return s.dur+=t,"<-"==e?(s.dirty=!1,s=this.goto_prev_char(),this.set_cur_char_status(!1,!0),s.dirty=!1,i=!0,c=!0,this.latest_error_count>0&&this.latest_error_count--):r||!i&&"block"==this.on_error?i||(s.real_valid=!1):(this.set_cur_char_status(i),0==this.goto_next_char()&&(l=!0),i?this.latest_error_count=0:this.latest_error_count++),a&&this.events.fire_event("keydown",{old_char_dict:o,new_char_dict:l||r?null:this.cur_char,end_lesson:l,deadkey:!1,is_backspace:c,chr:e,delay:t,is_valid:i}),this.calc_progress(),l&&!this.no_auto_end_lesson&&this.end_lesson(),this.profile_keydown_end(),!0},_.prototype.set_cur_char_status=function(e,t){var a=this.cur_char,s=this.stats;t?(a.dirty=!1,s.total_chars--,a.valid?s.valids--:s.errors--):(a.real_valid=a.real_valid&&e,a.dirty=!0,s.total_chars++,e?s.valids++:s.errors++),a.valid=e},_.prototype.start_beater=function(){this.beater_timeout_id&&this.stop_beater(),this.beater_timeout_id=(0,o.setInterval)(this.beat.bind(this),1e3)},_.prototype.stop_beater=function(){clearInterval(this.beater_timeout_id),this.beater_timeout_id=null},_.prototype.is_keyboard_punching=function(){for(var e=this.log,t=0,a=0,s=e.length-1;s>=0;s--){var r=e[s];if(r.delay&&(t+=r.delay,0==r.is_valid&&a++),t>2e3)break}a>15&&(this.pause(),this.detach_capture(),this.events.fire_event("abort",{punching:!0}))},_.prototype.beat=function(){if(!this.paused&&this.has_started&&!this.end_time&&this.cur_char){var e=this.cur_char,t=this.stats,a=t.duration;this.last_keydown&&(a+=new Date-this.last_keydown),t.wpm=l.calc_wpm(t.valids,a),t.accuracy=l.calc_accuracy(t.valids,t.total_chars),t.progress=e.index/this.chars.length,t.chars_left=this.chars.length-e.index,this.events.fire_event("stats_update",this.stats)}if(this.max_secs&&!this.paused&&this.stats.duration+(new Date-(this.last_keydown||new Date))>=1e3*this.max_secs)return this.end_lesson();this.is_test&&this.max_secs||!this.last_keydown||this.end_time||this.paused||!(new Date-this.last_keydown>1e4)||this.pause(),this.is_keyboard_punching()},_.prototype.pause=function(){!this.paused&&this.has_started&&(this.pause_start=new Date,this.paused=!0,this.pause_count++,this.stop_beater(),this.events.fire_event("pause",this.pause_count))},_.prototype.unpause=function(){this.last_pause_duration=new Date-this.pause_start,this.pause_start=null,this.paused=!1,this.start_beater(),this.events.fire_event("unpause",this.pause_count)},_.prototype.toggle_pause=function(){this.paused?this.unpause():this.pause()},_.prototype.create_char_profiles=function(e,t){this.words={},this.chars=[];var a,s=0,r=0;for(let i of e){const e=[];for(let t of i)a={index:s,valid:!1,dur:0,real_valid:!0,chr:t,word_index:r},this.chars.push(a)," "!=t&&e.push(a),s++;e.length>0&&(this.words[r]={char_list:e,logo_word:t&&t[r]||null},r++)}},_.prototype.is_done=function(){return this.cur_char_index>=this.text.length-1},_.prototype.jump_focus=function(e){if("number"==typeof e)var t=e;else t=e.index;this.cur_char_index=t,this.cur_char=this.chars[this.cur_char_index],this.log.push({action:"focus",i:this.cur_char_index})},_.prototype.skip_current_word=function(e){var t=this.cur_word_index+1;if(null==this.words[t]){if(this.has_started)return void this.end_lesson();this.events.fire_event("abort",{all_words_long:!0})}this.cur_word_index=t,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})},_.prototype.goto_prev_char=function(){return this.cur_char_index>=0&&this.cur_char_index--,this.cur_char=this.chars[this.cur_char_index],this.cur_char.word_index!=this.cur_word_index&&(this.cur_word_index=this.cur_char.word_index,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})),this.cur_char},_.prototype.goto_next_char=function(){return this.cur_char_index<this.text.length-1&&(this.cur_char_index++,this.cur_char=this.chars[this.cur_char_index],this.cur_char.word_index!=this.cur_word_index&&(this.cur_word_index=this.cur_char.word_index,this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index})),this.cur_char)},_.prototype.reset_stats=function(){this.stats={duration:this.is_test&&this.stats?this.stats.duration:0,valids:0,errors:0,total_chars:0}},_.prototype.attach_capture=function(){this.capturing||(this._keydown_handler=function(e){this.keydown_evt(e)}.bind(this),(0,r.default)(document).keydown(this._keydown_handler),this.no_input_mode?((0,o.setTimeout)((()=>document.activeElement&&document.activeElement.blur())),(0,r.default)(document).keypress(this.bound_keypress_handler),this.handle_special_punctuation||(this.$ios_keyboard=(0,r.default)("<div />",{class:"edicon-keyboard",click:function(){this.detach_capture(),this.no_input_mode=!1,this.user_selected_input_mode=!0,this.init_keyboard_focus(),this.attach_capture()}.bind(this)}).css({borderTopLeftRadius:6,borderTopRightRadius:6,position:"fixed",padding:15,boxShadow:"0 -1px 10px rgba(0,0,0,0.6)",width:80,textAlign:"center",background:"#444",color:"white",zIndex:1001,fontSize:22,marginLeft:-40,left:"50%",bottom:-5}),(0,r.default)("body").append(this.$ios_keyboard))):(this.$focus_input.on("input",this.bound_input_handler),this.$focus_input.keydown(this.bound_input_handler_keydown),this.$focus_input.keyup(this.bound_input_handler_keyup)),this.capturing=!0,this.events.fire_event("attached"),0==this.cur_char_index&&this.events.fire_event("word_changed",{next_word:this.words[this.cur_word_index],index:this.cur_word_index}),this.prev_key=null)},_.prototype.detach_capture=function(e){this.capturing&&((0,r.default)(document).unbind("keydown",this._keydown_handler),this.no_input_mode?((0,r.default)(document).unbind("keypress",this.bound_keypress_handler),this.$ios_keyboard&&this.$ios_keyboard.remove(),this.$ios_keyboard=null):(this.$focus_input.unbind("input",this.bound_input_handler),this.$focus_input.unbind("keydown",this.bound_input_handler_keydown),this.$focus_input.unbind("keyup",this.bound_input_handler_keyup)),this.capturing=!1,this.events.fire_event("detached"),e&&this.remove_focus_input())},_.prototype.remove_focus_input=function(){this.$focus_input&&this.$focus_input.remove()},_.prototype.init_keyboard_focus=function(){var e=this.$focus_input=(0,r.default)("<input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' autofocus />");e.attr("aria-hidden",!0),e.css({outline:"none",color:"white",border:"white",position:"fixed",fontSize:"1px",left:"50%",top:"-21px"}),window.approuter&&approuter.events.on("unload",this.remove_focus_input.bind(this)),this.dead_key_active=!1,this.keyDown=-1,this.lastComposedInput="",this.lastInputTime=null,(0,r.default)("body").prepend(e);var t=function(){const t=document.getElementById("adl-ad-report-modal");if(t){if("block"===t.style.display&&this.capturing)return this.detach_capture(),void(this.detached_by_report_ad=!0);"none"===t.style.display&&this.detached_by_report_ad&&(this.detached_by_report_ad=!1,this.attach_capture())}this.capturing&&(!e.is(":focus")||e.val().length>1||!this.lastComposedInput)&&(!l.isIOS||e.is(":focus")||this.$ios_focus_div&&this.$ios_focus_div[0].parentNode?e[0].focus():this.$ios_focus_div=l.show_ios_focus_popup((0,d.t)("Touch here to start"),e),e.val(""))}.bind(this);this.events.on("attached",function(){l.isIOS&&!this.user_selected_input_mode&&(this.$ios_focus_div=l.show_ios_focus_popup((0,d.t)("Touch here to start"),e)),e[0].focus()}.bind(this)),this.events.on("detached",function(){e[0].blur(),this.$ios_focus_div&&this.$ios_focus_div.remove()}.bind(this)),(0,o.setInterval)(t,500)},_.prototype.idkfa=function(e,t){e=e||500;var a=this.cur_char_index,s=t+a||this.text.length,r={keydown_msecs:0,keydown_count:0},i=new Date,n=function(t){if(t!=s)r.keydown_count++,this.record_keydown_time(this.chars[t].chr,e),(0,o.setTimeout)((function(){n(t+1)}));else{r.keydown_msecs=new Date-i;var a=r.keydown_msecs/r.keydown_count;console.log("%c"+a.toFixed(2)+"ms/key","background: #257107; color: white; font-size:22px;")}}.bind(this);n(a)},_.prototype.replay_history=function(e,t){var a=function(s,r){if(r=r||e[s])if(this.beat(),(0,i.default)(r)){if(r[0]&&this.record_keydown_time(r[0],r[1],!1),!t){let t=s+1,r=e[t];if(!r)return void this.end_lesson();this.play_next_timeout_id=(0,o.setTimeout)((()=>a(t)),r[1]/this.playback_speed)}}else"focus"==r.action&&this.jump_focus(r.i),t||a(s+1);else this.end_lesson()}.bind(this);if(t){for(let t of e)a(0,t);this.end_lesson()}else a(0);this.stop_beater()},_.prototype.keydown_evt=function(e){var t=e||window.event,a=t.keyCode||t.which,s=e.ctrlKey||e.metaKey;switch(this.korean_locale&&229===a&&"Backspace"===e.originalEvent.code&&(a=c.default.backspace),this.$focus_input&&this.$focus_input.focus(),a){case c.default.backspace:e.preventDefault(),this.record_keydown_time("<-");break;case c.default.enter:e.preventDefault(),this.record_keydown_time("\n");break;case c.default.tab:e.preventDefault(),this.record_keydown_time("\t");break;case c.default.p:s&&(e.preventDefault(),this.toggle_pause());break;case c.default.space:this.no_input_mode&&l.isIOS&&(e.preventDefault(),this.record_keydown_time(" "))}},_.prototype._keypress_handler=function(e){this.record_keydown_time(e.key||String.fromCharCode(e.keyCode))},_.prototype._input_handler=function(e){if(this.korean_locale){var t=this.$focus_input.val();if(this.$focus_input.val(""),this.prev_key===this.keyDown)return;if(["Backspace","Tab","Enter"].indexOf(this.keyDown)>=0)return;const e=u.default.disassemble(t);this.record_keydown_time(e[e.length-1])}else{if(this.keyDown<0&&(this.dead_key_active=!0,this.events.fire_event("keydown",{deadkey:!0,key_code:229,delay:0,is_valid:!0})),[8,13,9].indexOf(this.keyDown)>=0&&(this.keyDown=-1),l.isSafari){if("insertCompositionText"==e.originalEvent.inputType)return this.lastComposedInput=this.$focus_input.val(""),void this.events.fire_event("keydown",{deadkey:!0,key_code:229,delay:0,is_valid:!0});"insertText"==e.originalEvent.inputType&&this.keyDown<0&&(this.keyDown=0)}if(l.isFirefox&&!e.originalEvent.isComposing&&this.keyDown<0&&(this.keyDown=0),this.keyDown>=0){t=this.$focus_input.val();const e="";if(this.cur_char.chr==e&&t.length>0){const a="";if(0==a.indexOf(t)){if(t!=a)return;t=e}}var a=new Date;this.lastInputTime||(this.lastInputTime=a);this.lastInputTime;if(this.lastInputTime=a,t.length>0){var s=t[t.length-1],r=null;const e=e=>!(e.length<2)&&(""==e[0]||(""==e||(""==e||(""==e||""==e))));var i;e(t)&&(s=t[0],r=t[1],i=t[2],this.dead_key_active=!1);const a=this.is_valid(s);if(a||!this.dead_key_active||this.lastComposedInput){if(!f||this.prev_key!=s){if(!this.record_keydown_time(s))return;if(a&&r&&(s=r,!this.record_keydown_time(s,0)))return;if(a&&i&&(s=i,!this.record_keydown_time(s,0)))return;this.prev_key=s}this.$focus_input.val(""),this.lastComposedInput=""}else this.dead_key_active?(this.lastComposedInput=t,this.events.fire_event("keydown",{deadkey:!0,chr:t,delay:0,is_valid:!0})):this.lastComposedInput="";""===t&&a||(this.keyDown=-1)}else this.lastComposedInput=""}}},_.prototype._input_handler_keydown=function(e){if(this.korean_locale)return this.prev_key=this.keyDown,void(this.keyDown=e.originalEvent.code);if(this.anchor_key&&!e.metaKey&&!e.ctrlKey){if((e.key||String.fromCharCode(e.keyCode)).toLowerCase()==this.anchor_key)return this.is_anchoring||(this.is_anchoring=!0,this.events.fire_event("anchor_start",{})),void e.preventDefault();if(!this.is_anchoring)return void e.preventDefault()}this.dead_key_active=229==e.keyCode||"Dead"==e.key||"Unidentified"==e.key,l.isSafari&&this.dead_key_active?this.keyDown=-1:(this.keyDown=e.keyCode,(this.use_hand&&(16==e.keyCode||18==e.keyCode)||this.dead_key_active)&&this.events.fire_event("keydown",{deadkey:!0,key_code:e.keyCode,delay:0,is_valid:!0}))},_.prototype._input_handler_keyup=function(e){if(this.prev_key=null,this.korean_locale)return void(this.keyDown=-1);if(this.anchor_key&&(e.key||String.fromCharCode(e.keyCode)).toLowerCase()==this.anchor_key)return this.is_anchoring=!1,this.events.fire_event("anchor_stop",{}),void e.preventDefault();const t=e=>{this.prev_capslock_detected!=e&&(this.prev_capslock_detected=e,this.events.fire_event("capslock_detected",e))};if(!this.ignore_case){const a=e.key||String.fromCharCode(e.keyCode)||"";1==a.length?a.toLowerCase()==a.toUpperCase()||e.shiftKey||t(a.toUpperCase()==a):"capslock"==a.toLowerCase()&&t(!1)}};t.default=_},76869:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=m(a(47642)),r=m(a(63137)),i=m(a(1469)),n=m(a(69606)),o=m(a(47414)),l=m(a(48583)),c=m(a(19851)),d=a(66358),u=a(50751),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var s={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,a&&a.set(e,s),s}(a(71327)),h=m(a(75933));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}const _=window.cordova?"":"edc-";function g(e){return new Promise((function(t){e.one("load",(function(){t(e)})).one("error",(function(){t(null)}))}))}function y(e,t,a){function s(){e.removeEventListener(t,r)}function r(e){s(),a(e)}return e.addEventListener(t,r),s}function v(e,t,a,r,i,o,c,d,u){this.elm=(0,n.default)(e),this.keys=[],this.char_to_key_mapping={},this.show_hand=r,this.show_keyboard=a,this.shift_key_pressed=!1,this.alt_key_pressed=!1,this.keyboard_layout_file_id=i||0,this.state="none",this.use_hand=o,this.callback_when_loaded=c,this.events=new s.default(["highlight_finger","layout_updated","possible_keyboard_mismatch"]),this.theme=d,this.one_char_per_key=u,this.is_svg_loaded=!1,this.is_unloading=!1,(0,l.default)(t,"missing schema name"),this.load_schema(t),this.gotham_rounded_loaded=!1,this.keyboard_layout_file_id%100==7&&a&&(this.load_gotham_rounded(),this.gotham_rounded_loaded=!0)}function b(e){var t=e.match(/\{\{.\}\}/);if(t)return t[0].replace("{{","").replace("}}","")}function w(e,t,a,s,r){if(this.modifier_char_map=a,this.build_char_to_modifier_map(),this.schema_lang=e,this.layout_data=t,this.is_special_key=r,s){var i=s.find("#"+t.key_id);i.length&&(this.svg_keybox=i[0])}}function k(e,t){if(!e)return!1;if(e.classList)return e.classList.contains(t);return!!((0,n.default)(e).attr("class")||"").match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function x(e,t){e.classList?e.classList.add(t):k(e,t)||(0,n.default)(e).attr("class",(0,n.default)(e).attr("class")+" "+t)}function E(e,t){if(e.classList)e.classList.remove(t);else if(k(e,t)){var a=new RegExp("(\\s|^)"+t+"(\\s|$)");(0,n.default)(e).attr("class",(0,n.default)(e).attr("class").replace(a," "))}}function S(e){return e.toUpperCase()!=e?1:"_"==e?6:",.".indexOf(e)>-1?4:";:/".indexOf(e)>-1?2:"\\*".indexOf(e)>-1?-2:0}function j(e,t,a,s,r){e.textContent;t+=(s-e.getBoundingClientRect().width)/2,e.setAttribute("dx",t),a+=S(r)-S(e.textContent),e.setAttribute("dy",a)}function O(e,t,a){e.textContent;let s=t-e.getBoundingClientRect().width;e.setAttribute("dx",s)}v.prototype.release=function(){this.is_unloading=!0,this.pointer&&this.pointer.hide()},v.prototype.show_both=function(){return this.show_keyboard&&this.show_hand},v.prototype.show_both_standalone=function(){return this.show_keyboard&&this.show_hand&&this.keyboard_options().is_standalone_hands},v.prototype.show_hands_only=function(){return!this.show_keyboard&&this.show_hand},v.prototype.show_keyboard_only=function(){return this.show_keyboard&&!this.show_hand},v.prototype.show_neither=function(){return!this.show_keyboard&&!this.show_hand},v.prototype.load_schema=function(e){if((0,l.default)(-1!=e.search(","),`Invalid keyboard schema name "${e}". Should be <language-code>,<keyboard-schema>`),this.schema_name=e,"zh,pinyin"==e)this.special_input_punctuation_map=p.pinyin_input_punctuation_map();else{"kanji"==(((window.approuter||{}).lesson||{}).activity||{}).format&&(this.special_input_punctuation_map=p.jp_input_punctuation_map())}[this.schema_lang,this.schema_key]=e.split(",");const t=new Promise((function(t,a){n.default.ajax({url:`/m/engine/keyboards/schema/${e}.json`,dataType:"json",success:t,error:a})}));this.loading=t.then(this.init_kb_and_hands.bind(this)),this.key_not_found=0},v.prototype.init_kb_and_hands=function(e,t){let a;return this.elm.empty(),this.schema=e,this.layout=C,this.cur_active_modifier_key=null,this.cur_second_active_modifier_key=null,this.cur_active_key=null,this.show_keyboard&&this.keyboard_options().is_standalone_hands?a=Promise.all([this.init_keyboard(),this.init_standalone_hands(t)]):this.show_keyboard?a=this.init_keyboard():this.show_hand?(this.init_keys(),a=this.init_standalone_hands(t)):(this.init_keys(),a=Promise.resolve()),a.then(function(){if(this.cur_char)this.highlight(this.cur_char);else if("bone"==this.theme){let e=core.cur_char.chr;const t=v.special_key_to_char_map[e]||e;this.focus_row_for_char(t)}this.show_keyboard&&this.show_hand&&d.gsap.to(this.$hands,{delay:.5,duration:.4,opacity:.8})}.bind(this)),a},v.prototype.init_keyboard=function(){const e=this.init_dom_setup().then(function(e){return this.is_svg_loaded=!0,this.svg_class=this.$object_elm[0].getElementsByTagName("svg")[0].getAttribute("class"),this.set_theme(this.theme),this.$kb_svg=(0,n.default)(this.$object_elm[0]),this.$hands_svg=this.$hands[0].getSVGDocument(),this.init_keys(),this.render(),e}.bind(this));return this.callback_when_loaded?e.then(this.callback_when_loaded):e},v.prototype.load_gotham_rounded=function(){this.gotham_rounded_loaded||h.default.load({custom:{families:["GothamRounded-Bold"],urls:["https://static.typingclub.com/m/corp2/css/font-gotham-rounded.css"]},classes:!1})},v.prototype.set_theme=function(e){const t=window.approuter&&approuter.profile&&approuter.profile.is_blind?" is-blind":"";if(this.theme=e,!this.$hands||!this.$hands[0]||!this.$hands[0].getSVGDocument())return;const a=this.$hands[0].getSVGDocument().getElementsByTagName("svg")[0],s=this.$object_elm[0].getElementsByTagName("svg")[0];this.keyboard_layout_file_id%100==7?(this.load_gotham_rounded(),a.setAttribute("class","kb-colorful")):e?a.setAttribute("class","theme-"+e):a.setAttribute("class",""),e||t?s.setAttribute("class",this.svg_class+(e?" theme-"+e:"")+t):s.setAttribute("class",this.svg_class)},v.prototype.height=function(){return this.show_keyboard&&this.show_hand&&this.keyboard_options().is_standalone_hands?505:this.show_keyboard&&this.show_hand?320:this.show_keyboard||this.show_hand?200:10},v.prototype.apply_settings=function(e,t,a,s,r,i){this.show_keyboard=e,this.show_hand=t,this.keyboard_layout_file_id=s,this.use_hand=r,this.theme=i,a!=this.schema_name?this.load_schema(a):this.init_kb_and_hands(this.schema,!0)},v.prototype.get_key_for_char=function(e){var t;if(v.special_key_to_char_map[e]){var a=v.special_key_to_char_map[e];t=this.char_to_key_mapping[a]}else t=this.char_to_key_mapping[e];return t},v.prototype.get_fill_color_for_char=function(e){const t=this.get_key_for_char(e);if(t)return window.getComputedStyle(t.svg_keybox).fill},v.prototype.handle_keydown_event=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e.deadkey?e.key_code&&this.set_mod_keys(e.key_code):(this.reset_state_and_mods(),this.attempted_key(e.chr)),this.highlight(t,a,s,r)},v.prototype.attempted_key=function(e,t){var a=this.get_key_for_char(e);a&&(this.highlighted_chr&&this.highlighted_chr[0]==e||t?a.animate_correct():a.animate_incorrect())},v.prototype.keyboard_options=function(){return function(e){switch(e){case 11:case 12:case 13:case 14:return{is_whimsical:!0,is_standalone_hands:!0,has_pointer:!0,width:680,className:"keyboard-junior"};default:return{is_whimsical:!1,is_standalone_hands:!1,has_pointer:!1,width:685}}}(this.keyboard_layout_file_id)},v.prototype.init_dom_setup=function(){const e=[];p.isIOS&&7===this.keyboard_layout_file_id&&(this.keyboard_layout_file_id=0);const t=this.keyboard_layout_file_id+(this.iso_layout()?100:this.jis_layout()?200:this.ansi_hp_layout()?300:0);this.$object_elm=(0,n.default)("<div/>").attr("tabindex","-1"),this.$object_elm.attr("id","vkeyboardkeys"),e.push(new Promise(((e,a)=>{n.default.ajax({url:`/m/engine/img/keyboard-layout/${C.svg_files[t]}`,dataType:"html",success:t=>{this.$object_elm[0].innerHTML=t,e()},error:a})}))),this.elm.append(this.$object_elm);const a=this.use_hand?this.use_hand:"both";this.$hands=(0,n.default)("<object />").attr("type","image/svg+xml").attr("tabindex","-1"),e.push(g(this.$hands)),this.$hands.attr("data",`/m/engine/img/hand/hand-${a}.svg`),this.$hands.css({position:"absolute",pointerEvents:"none",height:363,top:-10,left:0,opacity:0,transform:"translateX(55px) scale(1.55)"}),this.elm.append(this.$hands),("bone"==this.theme||this.keyboard_options().has_pointer)&&(this.pointer=new c.default("bone"==this.theme?"glowing":null),e.push(this.pointer.attach(this.elm)));var s=this.keyboard_options().width;return this.elm.css({width:s,position:"relative"}),this.$object_elm.css("width",s),Promise.all(e)},v.prototype.focus_hand=function(e,t){var a=this.$hands_svg;if(!a)return;var s=Array.from(a.querySelectorAll(".st0"));let r=[!1,!1];const i=[null,null];for(let a of s)"neutral-left"==a.id&&(i[0]=a),"neutral-right"==a.id&&(i[1]=a),a.id==e||a.id==t?(a.style.display="block",r[a.id==e?0:1]=!0):a.style.display="none";for(let e=0;e<2;e++)!r[e]&&i[e]&&(i[e].style.display="block")},v.prototype.fire_highlight_finger_event=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=this.get_key_for_char(e);if(!a)return;var s=e.startsWith("dk");let r;r=this.use_hand?{state:this.state,modifier:"no-hand"}:a.char_modifier_map[e]||{state:this.state,modifier:" "};var i=this.iso_layout()&&a.layout_data.iso_hint||a.layout_data.hint;if(i){var n=b(i);if(n){var l=this.qchar_to_char_mapping[n];";"==l&&(l=(0,u.t)("semicolon")),i=(0,u.t)(i,{[n]:l})}else i=(0,u.t)(i)}var c=(0,u.t)(o.default.trans_chr_to_text(e));if(1==c.length&&c.toUpperCase()!=c.toLowerCase()&&c.toUpperCase()==c&&(c=(0,u.t)("capital {{character}}",{character:c})),s){c=e.replace("dk","");var d=(0,u.t)("First")}else if(t)d="Next";else d=(0,u.t)("To type {{key}}",{key:c});if(" "!=r.modifier){var p=1==a.layout_data.hand?(0,u.t)("right"):(0,u.t)("left"),h=(0,u.t)("hold the {{right_or_left}} {{key}} and",{key:(0,u.t)(o.default.trans_chr_to_text(r.modifier)),right_or_left:p});i=`${d}, ${h} ${i}`}else i=`${d}, ${i}`;this.events.fire_event("highlight_finger",{chr:e,hint:i})},v.prototype.highlight_finger=function(e){if(!this.is_svg_loaded)return setTimeout(function(){this.highlight_finger(e)}.bind(this),100);var t,a,s=this.get_key_for_char(e);if(s){var r;r=this.use_hand?{state:this.state,modifier:"no-hand"}:s.char_modifier_map[e]||{state:this.state,modifier:" "};const i=this.iso_layout()&&s.layout_data.iso_key_id||this.ansi_hp_layout()&&s.layout_data.ansi_hp_key_id||this.jis_layout()&&s.layout_data.jis_key_id||s.layout_data.key_id;t=1==s.layout_data.hand?i:this.pc_os()&&r.modifier.endsWith("opt")?"shift+opt"==r.modifier?"shift-left":"neutral-left":C.modifier[r.modifier].left,a=2==s.layout_data.hand?i:C.modifier[r.modifier].right}else console.warn("Missing key for ("+e+")"),t="neutral-left",a="neutral-right";this.focus_hand(t,a),this.hands_visible||(this.hands_visible=!0,this.$hands.show().fadeIn(1e3))},v.prototype.render=function(e){if((!e||this.schema.keymap[e.modifier])&&(!e||this.current_render_modifier!=e.modifier||this.state!=e.state||this.schema_name!=this.rendered_schema_name)){e||(e={state:this.state,modifier:" "}),this.rendered_schema_name=this.schema_name,this.current_render_modifier=e;for(var t=0,a=this.keys.length;t<a;t++){var s=this.keys[t];const a=this.keyboard_layout_file_id%100==7;s.render(this.$kb_svg,e,s==this.cur_active_key,!1,this.schema.magnify_keys,a)}}},v.finger_modifier_map={1:{shift:"shift-right",opt:"option-right"},2:{shift:"shift-left",opt:"option-left"}},v.special_key_to_char_map={"\n":"enter"," ":"space","\t":"tab"},v.prototype.highlight=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null!==(t=approuter.program)&&void 0!==t&&t.is_junior&&(e=e.toLowerCase()),this.is_unloading)return;if(this.show_keyboard&&!this.is_svg_loaded)return setTimeout(function(){this.highlight(e,a,s,r)}.bind(this),100);let i=null;if(!this.one_char_per_key&&s){let t=e+s.chr;""!=e&&""!=t&&""!=t&&""!=t||(i=t),r&&(t+=r.chr,""==t&&(i=t))}if(i?(e=this.char_to_key_mapping[i]?i:e,a=!1):this.special_input_punctuation_map&&(e=this.special_input_punctuation_map[e]||e),this.cur_char=e,this.show_keyboard?(this.highlight_keyboard(e),this.show_hand&&this.keyboard_options().is_standalone_hands?this.highlight_standalone_hands(e):this.show_hand&&this.highlight_finger(this.highlighted_chr)):this.show_hand&&this.highlight_standalone_hands(e),this.highlighted_chr&&(this.fire_highlight_finger_event(this.highlighted_chr,a),"bone"==this.theme)){const t=v.special_key_to_char_map[e]||e;this.focus_row_for_char(t)}},v.SHIFT_KEY_CODE=16,v.ALT_KEY_CODE=18,v.prototype.reset_state_and_mods=function(){this.state="none",this.shift_key_pressed=!1,this.alt_key_pressed=!1},v.prototype.set_mod_keys=function(e){e==v.SHIFT_KEY_CODE&&(this.shift_key_pressed=!this.shift_key_pressed),e==v.ALT_KEY_CODE&&(this.alt_key_pressed=!this.alt_key_pressed)},v.prototype.colour_keyboard=function(e,t,a){const s=(0,r.default)(v.special_key_to_char_map);for(let r of this.keys){let i=r.modifier_char_map[" "];"object"==typeof i&&(i=i[0].o),i in s&&(i=s[i]),i==t?r.colour("orange"):e[i]?r.colour(e[i],a&&(()=>a(i))):r.colour("white")}},v.prototype.highlight_keyboard=function(e){this.highlighted_chr=e,this.cur_active_modifier_key&&(this.cur_active_modifier_key.remove_highlight("active"),this.cur_active_modifier_key=null),this.cur_second_active_modifier_key&&(this.cur_second_active_modifier_key.remove_highlight("active"),this.cur_second_active_modifier_key=null),this.cur_active_key&&(this.cur_active_key.remove_highlight("active"),this.cur_active_key.remove_highlight("deadkey"));var t=this.get_key_for_char(e);if(!t)return this.key_not_found++,3==this.key_not_found&&this.events.fire_event("possible_keyboard_mismatch"),void console.warn("Did not find a key for",e);var a=t.char_modifier_map[e];if(!a)switch(e){case" ":case"\n":case"\t":a={state:"none",modifier:" "};break;default:return}let s=!1,r=null;if(a.state!=this.state)if(r=this.state,"none"==a.state)r="none";else if("none"==this.state){if(r=a.state,this.highlighted_chr="dk"+this.schema.terminators[r],!(t=this.state_to_key_mapping[r]))throw"No key mapping for state "+r+". chr="+e+". kb="+this.schema.name+","+this.schema.layout;a=t.char_modifier_map[this.highlighted_chr],s=!0}else r="none";let i=!1;if(" "!=a.modifier){var n,o;const e=a.modifier.split("+").reverse(),s=1==t.layout_data.hand?"left":"right";for(let a of e)if(this.use_hand){if("shift"==a&&!this.shift_key_pressed){i=!0,this.highlighted_chr="shift-"+s,t=this.char_to_key_mapping[this.highlighted_chr];break}if("opt"==a&&!this.alt_key_pressed){i=!0,this.highlighted_chr="option-"+s,t=this.char_to_key_mapping[this.highlighted_chr];break}}else{let e="opt"==a&&this.pc_os()?1:t.layout_data.hand;(n=v.finger_modifier_map[e][a])||console.warn("Missing modifier key:",a,t),(o=this.char_to_key_mapping[n]).highlight("active"),this.cur_active_modifier_key?this.cur_second_active_modifier_key=o:this.cur_active_modifier_key=o}}r&&!i&&(this.state=r),this.cur_active_key&&this.cur_active_key.render(this.$kb_svg,a,!1,!0,this.schema.magnify_keys),this.cur_active_key=t,this.render(a);const l=this.keyboard_options().has_pointer;let c=null;l&&(c="space"==t.layout_data.key_id?"monkey_spacebar2":"enter"==t.layout_data.key_id?"monkey_enter":"monkey_halo2"),(l||"bone"==this.theme)&&this.pointer.focus(t.svg_keybox,this.$object_elm,c),t.highlight("active"),s&&t.highlight("deadkey")},v.prototype.get_finger_for_char=function(e){var t=this.get_key_for_char(e);if(!t)return null;const a="left"==this.use_hand?"l":"right"==this.use_hand?"r":"";return t.layout_data[a+"fin"]},v.prototype.highlight_standalone_hands=function(e){var t=this.get_finger_for_char(e);if(!t)return this.key_not_found++,3==this.key_not_found&&this.events.fire_event("possible_keyboard_mismatch"),void console.warn("Can't find finger for",e);(0,n.default)("#hand .visible").hide().removeClass("visible"),(0,n.default)("#hand #f"+t).show().addClass("visible")},v.prototype.init_standalone_hands=function(e){const t=[],a=380;var s=(0,n.default)("<div />").attr("id","hand").css({width:a,height:200,position:"absolute",overflow:"hidden",left:"50%",marginTop:-5,marginLeft:-190}).hide();const r={position:"absolute",width:a},i=(0,n.default)("<img/>").attr("id","handimg").css(r);t.push(g(i));i.attr("src",`/m/engine/img/hand/k_hands${(()=>{let e=approuter.program.locale.split("_")[0];return"en"===e?"_en":"es"===e?"_es":""})()}.svg`),s.append(i);for(var o=1;o<=10;o++){const e=(0,n.default)("<img/>").attr("id",`f${o}`).addClass("finger").css(r).hide();t.push(g(e)),e.attr("src",`/m/engine/img/hand/k_${o}.svg`),s.append(e)}return this.use_hand&&s.css({width:190,marginLeft:-80}),"right"==this.use_hand&&s.children().css({marginLeft:-190}),this.elm.append(s),e?s.show():s.delay(1500).fadeIn("slow"),Promise.all(t)},v.prototype.init_keys=function(){this.keys=[];var e,t=this.schema,a={0:{},1:{},2:{},3:{}};for(var s in t.keymap){e=t.keymap[s];for(var r=0;r<e.length;r++)for(var n=a[r],o=e[r],l=0,c=o.length;l<c;l++)n[l]||(n[l]={}),n[l][s]=o[l],(0,i.default)(o[l])&&o[l].length>0&&"->"in o[l][0]&&(n[l].state||(n[l].state=[]),n[l].state.push(o[l][0]["->"]),n[l][s][0].o="dk"+t.terminators[o[l][0]["->"]])}this.state_to_key_mapping={};const d=(e,t,a)=>{var s=e.char_modifier_map[a],r=t.char_modifier_map[a];if(s.state!=r.state){if("none"==s.state)return!1;if("none"==r.state)return!0}const i={" ":0,shift:1,opt:2,"shift+opt":3};return i[r.modifier]<i[s.modifier]};for(var u=0,p=C.rows.length;u<p;u++)for(var h=-1,f=(l=0,(r=C.rows[u]).length);l<f;l++){var m=r[l];if("iso-key"==m.key_id&&"jis"==t.layout&&(m=r[l+1]),m.special_key){const e={" ":m.key_id};if("space"==m.key_id){e[" "]=[{o:"space",s:"none"}],e.shift="";for(let a in t.terminators)e[" "].push({o:t.terminators[a],s:a})}var g=new w(this.schema_lang,m,e,this.$kb_svg,!0);this.keys.push(g)}else if(m.qchar){h++;if(a[u][h]&&(g=new w(this.schema_lang,m,a[u][h],this.$kb_svg)),g&&(this.keys.push(g),g.modifier_char_map.state)){var y=g.modifier_char_map.state;for(var v in y){const e=y[v];if(e in this.state_to_key_mapping){const t="dk"+this.schema.terminators[e];if(!d(this.state_to_key_mapping[e],g,t))continue}this.state_to_key_mapping[y[v]]=g}}}else console.warn("Layout issue: Must either have qchar or special_key",m)}this.char_to_key_mapping={};var b={};this.qchar_to_char_mapping={};for(l=0,c=this.keys.length;l<c;l++){g=this.keys[l];for(var k in g.char_modifier_map)if(!(k in this.char_to_key_mapping)||d(this.char_to_key_mapping[k],g,k)){this.char_to_key_mapping[k]=g;var x=g.char_modifier_map[k];" "==x.modifier&"none"==x.state&&(this.qchar_to_char_mapping[g.layout_data.qchar]=k)}g.layout_data.qchar?(b[g.layout_data.qchar.toLowerCase()]=g,b[g.layout_data.qchar.toUpperCase()]=g,g.layout_data.qchartop&&(b[g.layout_data.qchartop]=g)):b[g.layout_data.key_id]=g}if(this.$kb_svg){this.pc_os()&&(this.$kb_svg.find("#text-option-left")[0].textContent="alt",this.$kb_svg.find("#text-option-right")[0].textContent="alt gr");var E=this.$kb_svg.find("text");for(l=0,c=E.length;l<c;l++){var S=E[l];if(!(g=b[k=S.textContent])&&(k=S.id.replace("text-",""),g=this.char_to_key_mapping[k],this.schema.labels&&this.schema.labels[k])){const e=S.getBoundingClientRect().width,t=S.textContent;S.textContent=this.schema.labels[k],~["shift-right","backspace","enter"].indexOf(k)&&O(S,e,t)}S.setAttribute("class",S.getAttribute("class")+` ${_}st2`),g&&g.set_svg_text(S)}}this.events.fire_event("layout_updated",{})},v.prototype.get_anchor_chars=function(){return[this.qchar_to_char_mapping.f,this.qchar_to_char_mapping.j]},v.prototype.detect_anchoring_hand=function(e){const t=new Set;for(let a of e){if(" "==a)continue;const e=this.char_to_key_mapping[a];e&&t.add(e.layout_data.hand)}if(1==t.size)for(let e of t)return{1:"left",2:"right"}[e]},w.prototype.build_char_to_modifier_map=function(){function e(e,t,a,s){if(t in e){const a=e[t].modifier;if("shift"==a&&"opt"==s||a.length<s.length)return}e[t]={state:a,modifier:s}}var t=this.char_modifier_map={},a=this.modifier_char_map;for(var s in a){var r=a[s];if(null==r);else if("string"==typeof r)e(t,r,"none",s);else for(var i=0,n=r.length;i<n;i++){var o=r[i];o.o&&e(t,o.o,o.s,s)}}},w.prototype.set_svg_text=function(e){var t=e.textContent;this.layout_data.qchartop&&this.layout_data.qchartop==t?(this.svg_text_top=e,this.svg_text_top_width=this.svg_text_top.getBoundingClientRect().width):(this.svg_text=e,this.svg_text_width=this.svg_text.getBoundingClientRect().width)},w.prototype.colour=function(e,t){if(this.svg_keybox&&(this.svg_keybox.style.fill=e,"white"!=e)){const e=(0,n.default)(this.svg_keybox);x(this.svg_keybox,"clickable"),t&&e.on("click",t)}this.svg_text&&Object.assign(this.svg_text.style,{fill:"black","pointer-events":"none"}),this.svg_text_top&&Object.assign(this.svg_text_top.style,{fill:"black","pointer-events":"none"})},w.prototype.highlight=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.svg_keybox&&(this.svg_keybox&&x(this.svg_keybox,e),this.svg_text&&x(this.svg_text,e),this.svg_text_top&&x(this.svg_text_top,e))},w.prototype.highlight_animated=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;function a(a){if(!a)return;let s;x(a,e);const r=setTimeout((function(){E(a,e),s&&s()}),t);s=y(a,"animationstart",(function(){clearTimeout(r),y(a,"animationend",(function(){E(a,e)}))}))}this.svg_keybox&&(a(this.svg_keybox),a(this.svg_text),a(this.svg_text_top))},w.prototype.remove_highlight=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"active";this.svg_keybox&&(this.svg_keybox&&E(this.svg_keybox,e),this.svg_text&&E(this.svg_text,e),this.svg_text_top&&E(this.svg_text_top,e))},w.prototype.get_modifier_char=function(e){var t=this.modifier_char_map[e.modifier];if((0,i.default)(t)){for(var a=t,s=0,r=a.length;s<r;s++)if(e.state==a[s].s&&a[s].o)return a[s].o.startsWith("dk")?a[s].o.substr(2):a[s].o;if("none"!=e.state)for(s=0,r=a.length;s<r;s++)if("none"==a[s].s&&a[s].o)return a[s].o.startsWith("dk")?a[s].o.substr(2):a[s].o;return"#"}return t},w.prototype.render=function(e,t,a,s,r,i){if(!this.svg_text||this.is_special_key)return;if(!s&&!a&&this.current_render_modifier&&this.current_render_modifier.modifier==t.modifier&&this.current_render_modifier.state==t.state)return;this.current_render_modifier=t;const n=t.modifier.indexOf("opt")>-1,o=t.modifier.indexOf("shift")>-1,l=this.svg_text.classList.contains("focus-row");this.svg_text.textContent=this.get_modifier_char({modifier:" ",state:t.state}),this.svg_text_top&&(this.svg_text_top.textContent=n?this.get_modifier_char(t):this.get_modifier_char({modifier:"shift",state:t.state}));let c=0,d=0,u=0,p=0;if("ko"===this.schema_lang&&this.svg_text_top){const e=e=>{var t=e.charCodeAt(0);return t>96&&t<123},a=this.get_modifier_char({modifier:"opt",state:t.state}),s=this.get_modifier_char({modifier:"shift",state:t.state});if(e(a)){let e=a.toUpperCase();s!==this.get_modifier_char({modifier:" ",state:t.state})?(this.svg_text_top.style.whiteSpace="pre",e+="  "+s,u=0):u=-10,this.svg_text_top.textContent=e,c=12}else this.svg_text_top.textContent=s;p=2,this.svg_text_top.setAttribute("class",`${_}st1 ${_}st2`),this.svg_text.setAttribute("class",`${_}st1 ${_}st2`)}else r||n||!i&&this.svg_text_top&&this.svg_text_top.textContent&&!(()=>{if(this.svg_text.textContent.toUpperCase()===this.svg_text_top.textContent)return!0;return{i:""}[this.svg_text.textContent]===this.svg_text_top.textContent})()?r||n?n||o?(this.svg_text_top&&this.svg_text_top.setAttribute("class",`${_}st1 ${_}st2 b`),this.svg_text.setAttribute("class",`${_}st1 ${_}st2`),p=16,u=5,c=-10,d=-22):(this.svg_text_top&&this.svg_text_top.setAttribute("class",`${_}st1 ${_}st2`),this.svg_text.setAttribute("class",`${_}st1 ${_}st2 b`),p=-1,u=-12,c=6,d=-3):(this.svg_text_top&&this.svg_text_top.setAttribute("class",`${_}st1 ${_}st2`),this.svg_text.setAttribute("class",`${_}st1 ${_}st2`)):(this.svg_text_top&&this.svg_text_top.setAttribute("class",`${_}st1`),this.svg_text.setAttribute("class",`${_}st1 ${_}st2 b`),c+=1,d-=6,o&&(this.svg_text.textContent=this.get_modifier_char({modifier:"shift",state:t.state})));".,".indexOf(this.svg_text.textContent)>-1&&this.svg_text.setAttribute("class",`${_}st1 ${_}st2 b2`),this.svg_text_top&&".,".indexOf(this.svg_text_top.textContent)>-1&&this.svg_text_top.setAttribute("class",`${_}st1 ${_}st2 b2`),j(this.svg_text,c,d,this.svg_text_width,this.layout_data.qchar),this.svg_text_top&&"none"!=this.svg_text_top.style.display&&j(this.svg_text_top,u,p,this.svg_text_top_width,this.layout_data.qchartop),l&&(this.svg_text_top&&this.svg_text_top.classList.add("focus-row"),this.svg_text.classList.add("focus-row"))},w.prototype.animate_correct=function(){this.highlight_animated("correct",250)},w.prototype.animate_incorrect=function(){this.highlight_animated("incorrect",260)},v.prototype.iso_layout=function(){return"iso"==this.schema.layout},v.prototype.jis_layout=function(){return"jis"==this.schema.layout},v.prototype.ansi_hp_layout=function(){return"ansi-hp"==this.schema.layout},v.prototype.pc_os=function(){return"pc"==this.schema.os},v.prototype.focus_row_for_char=function(e){const t=this.char_to_key_mapping[e];if(!t||"space"==e)return;const a=t.layout_data.key_id;var s=[];for(let e of this.layout.rows){let t=!1;for(let s of e)if(s.key_id==a){t=!0;break}if(t){s=e.map((e=>e.key_id));break}}for(let e of this.keys)s.indexOf(e.layout_data.key_id)>=0?e.svg_text&&x(e.svg_text,"focus-row"):e.svg_text&&E(e.svg_text,"focus-row")};const C={svg_files:{0:"keyboard-ansi.svg",1:"wobbly-ansi.svg",2:"classic-ansi.svg",3:"modern-ansi.svg",4:"glass-ansi.svg?",5:"cartoon-ansi.svg",6:"marble-ansi.svg",7:"colorful-ansi.svg",10:"stats-ansi.svg",11:"kinder-ansi.svg",12:"kinder-ansi-lower.svg",13:"kinder-ansi-es.svg",14:"kinder-ansi-lower-es.svg",100:"keyboard-iso.svg",101:"wobbly-iso.svg",102:"classic-iso.svg",103:"modern-iso.svg",104:"glass-iso.svg",105:"cartoon-iso.svg",106:"marble-iso.svg",107:"colorful-ansi.svg",110:"keyboard-iso.svg",200:"keyboard-jis.svg",201:"keyboard-jis.svg",202:"keyboard-jis.svg",203:"keyboard-jis.svg",204:"keyboard-jis.svg",205:"keyboard-jis.svg",206:"keyboard-jis.svg",207:"colorful-ansi.svg",210:"keyboard-jis.svg",300:"keyboard-ansi-hp.svg",301:"keyboard-ansi-hp.svg",302:"keyboard-ansi-hp.svg",303:"keyboard-ansi-hp.svg",304:"keyboard-ansi-hp.svg",305:"keyboard-ansi-hp.svg",306:"keyboard-ansi-hp.svg",307:"colorful-ansi.svg",310:"stats-ansi.svg"},modifier:{" ":{left:"neutral-left",right:"neutral-right"},shift:{left:"shift-left",right:"shift-right"},opt:{left:"option-left",right:"option-right"},"shift+opt":{left:"shift-option-left",right:"shift-option-right"},"no-hand":{left:"no-hand",right:"no-hand"}},rows:[[{key_id:"tilda",qchar:"`",qchartop:"~",code:192,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up two keys from {{a}} and one to the left.",iso_key_id:"shift-left",iso_hint:"move your left pinky down one key from {{a}} and one to the left.",ansi_hp_key_id:"no-hand",ansi_hp_hint:"move your left pinky down two keys from {{;}} and to the right."},{key_id:"key-1",qchar:"1",qchartop:"!",code:49,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up two keys from {{a}}."},{key_id:"key-2",qchar:"2",qchartop:"@",code:50,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger up two keys from {{s}}."},{key_id:"key-3",qchar:"3",qchartop:"#",code:51,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger up two keys from {{d}}."},{key_id:"key-4",qchar:"4",qchartop:"$",code:52,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger up to two keys from the {f}."},{key_id:"key-5",qchar:"5",qchartop:"%",code:53,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger up to two keys from the {f}."},{key_id:"key-6",qchar:"6",qchartop:"^",code:54,fin:7,lfin:3,rfin:9,hand:2,hint:"move your left index finger up to two keys from {{f}} and one to the right."},{key_id:"key-7",qchar:"7",qchartop:"&",code:55,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger up to two keys from {{j}} and two to the left."},{key_id:"key-8",qchar:"8",qchartop:"*",code:56,fin:8,lfin:4,rfin:10,hand:2,hint:"move your right middle finger up two keys from {{k}} and to the left."},{key_id:"key-9",qchar:"9",qchartop:"(",code:57,fin:9,lfin:4,rfin:10,hand:2,hint:"move your right ring finger up two keys from {{l}} and to the left."},{key_id:"key-0",qchar:"0",qchartop:")",code:48,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and to the left."},{key_id:"minus",qchar:"-",qchartop:"_",code:189,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}}."},{key_id:"equal",qchar:"=",qchartop:"+",code:187,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and to the right."},{key_id:"iso-key",iso_key_id:"tilda",ansi_hp_key_id:"tilda",qchar:"",qchartop:"",lfin:1,rfin:7,fin:1,hand:1,hint:"move your left pinky up two keys from {{a}} and one to the left."},{key_id:"jis-key",jis_key_id:"equal",qchar:"",qchartop:"",lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky up two keys from {{;}} and two keys to the right."}],[{key_id:"tab",special_key:!0,qchar:"\t",code:9,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up one key from {{a}} and one key to the left."},{key_id:"q",qchar:"q",qchartop:"Q",code:81,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky up one key from {{a}}."},{key_id:"w",qchar:"w",qchartop:"W",code:87,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger up one key from {{s}}."},{key_id:"e",qchar:"e",qchartop:"E",code:69,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger up one key from {{d}}."},{key_id:"r",qchar:"r",qchartop:"R",code:82,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger up one key from {{f}}."},{key_id:"t",qchar:"t",qchartop:"T",code:84,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger up one key from {{f}} and to the right."},{key_id:"y",qchar:"y",qchartop:"Y",code:89,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger up one key from {{j}} and to the left."},{key_id:"u",qchar:"u",qchartop:"U",code:85,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger up one key from {{j}}."},{key_id:"i",qchar:"i",qchartop:"I",code:73,fin:8,lfin:4,rfin:10,hand:2,hint:"move your right middle finger up one key from {{k}}."},{key_id:"o",qchar:"o",qchartop:"O",code:79,fin:9,lfin:4,rfin:10,hand:2,hint:"move your right ring finger up one key from {{l}}."},{key_id:"p",qchar:"p",qchartop:"P",code:80,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}}."},{key_id:"open-bracket",qchar:"[",qchartop:"{",code:219,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and to the right."},{key_id:"close-bracket",qchar:"]",qchartop:"}",code:221,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and two to the right."},{key_id:"backslash",qchar:"\\",qchartop:"|",code:220,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky up one key from {{;}} and three keys to the right.",iso_key_id:"enter",iso_hint:"move your right pinky two keys to the right."}],[{key_id:"capslock",special_key:!0,code:0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"a",qchar:"a",qchartop:"A",code:65,fin:1,lfin:1,rfin:7,hand:1,hint:"press down with your left pinky."},{key_id:"s",qchar:"s",qchartop:"S",code:83,fin:2,lfin:1,rfin:7,hand:1,hint:"press down with your left ring finger."},{key_id:"d",qchar:"d",qchartop:"D",code:68,fin:3,lfin:1,rfin:7,hand:1,hint:"press down with your left middle finger."},{key_id:"f",qchar:"f",qchartop:"F",code:70,fin:4,lfin:1,rfin:7,hand:1,bump:!0,hint:"press down with your left index finger."},{key_id:"g",qchar:"g",qchartop:"G",code:71,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger one key to the right."},{key_id:"h",qchar:"h",qchartop:"H",code:72,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger one key to the left."},{key_id:"j",qchar:"j",qchartop:"J",code:74,fin:7,lfin:4,rfin:10,hand:2,bump:!0,hint:"press down with your right index finger."},{key_id:"k",qchar:"k",qchartop:"K",code:75,fin:8,lfin:4,rfin:10,hand:2,hint:"press down with your right middle finger."},{key_id:"l",qchar:"l",qchartop:"L",code:76,fin:9,lfin:4,rfin:10,hand:2,hint:"press down with your right ring finger."},{key_id:"semicolon",qchar:";",qchartop:":",code:186,fin:10,lfin:4,rfin:10,hand:2,hint:"press down with your right pinky."},{key_id:"quote",qchar:"'",qchartop:'"',code:222,fin:10,lfin:4,rfin:10,hand:2,hint:"move your right pinky one key to the right."},{key_id:"enter",special_key:!0,code:13,fin:10,lfin:4,rfin:10,hand:2,qchar:"\n",hint:"move your right pinky two keys to the right.",iso_key_id:"backslash",iso_hint:"move your right pinky three keys to the right."}],[{key_id:"shift-left",special_key:!0,code:16,fin:1,lfin:1,rfin:7,hand:1},{key_id:"z",qchar:"z",qchartop:"Z",code:90,fin:1,lfin:1,rfin:7,hand:1,hint:"move your left pinky down one key from {{a}} and to the right."},{key_id:"x",qchar:"x",qchartop:"X",code:88,fin:2,lfin:1,rfin:7,hand:1,hint:"move your left ring finger down one key from {{s}} and to the right."},{key_id:"c",qchar:"c",qchartop:"C",code:67,fin:3,lfin:1,rfin:7,hand:1,hint:"move your left middle finger down one key from {{d}} and to the right."},{key_id:"v",qchar:"v",qchartop:"V",code:86,fin:4,lfin:1,rfin:7,hand:1,hint:"move your left index finger down one key from {{f}} and to the right."},{key_id:"b",qchar:"b",qchartop:"B",code:66,fin:4,lfin:2,rfin:8,hand:1,hint:"move your left index finger down one key from {{f}} and two keys to the right."},{key_id:"n",qchar:"n",qchartop:"N",code:78,fin:7,lfin:3,rfin:9,hand:2,hint:"move your right index finger down one key from {{j}} and to the left."},{key_id:"m",qchar:"m",qchartop:"M",code:77,fin:7,lfin:4,rfin:10,hand:2,hint:"move your right index finger down one key from {{j}} and to the right."},{key_id:"comma",qchar:",",qchartop:"<",code:188,lfin:4,rfin:10,fin:8,hand:2,hint:"move your right middle finger down one key from {{k}} and to the right."},{key_id:"dot",qchar:".",qchartop:">",code:190,lfin:4,rfin:10,fin:9,hand:2,hint:"move your right ring finger down one key from {{l}} and to the to the right."},{key_id:"slash",qchar:"/",qchartop:"?",code:191,lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky down one key from {{;}} and to the right."},{key_id:"shift-right",special_key:!0,code:16,lfin:4,rfin:10,fin:10,hand:2},{key_id:"jis-key2",jis_key_id:"shift-right",qchar:"",qchartop:"",lfin:4,rfin:10,fin:10,hand:2,hint:"move your right pinky down one key from {{;}} and two keys to the right."}],[{key_id:"control",special_key:!0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"option-left",special_key:!0,fin:1,lfin:1,rfin:7,hand:1},{key_id:"space",special_key:!0,code:32,fin:5,lfin:5,rfin:6,hand:2,qchar:" ",hint:"use either thumb."},{key_id:"option-right",special_key:!0,fin:10,lfin:4,rfin:10,hand:2}]]};t.default=v},3056:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s},i=a(66358),n=a(50751);class o extends r.default.Component{constructor(e){super(e),this.explanation=this.explain_results()}componentDidMount(){const{goal_wpm:e,min_accuracy:t,min_wpm:a}=this.props.attempt.requirements,{accuracy:s,real_accuracy:r,duration:n}=this.props.attempt,o=.4,l=1.4,c={val:0},d={val:0};i.gsap.to(c,{duration:1,delay:o,val:s,roundProps:"val",onUpdate:()=>{this.refs.accuracyText.innerHTML=c.val}}),i.gsap.to(d,{duration:1,delay:l,val:this.props.attempt.wpm,roundProps:"val",onUpdate:()=>{this.refs.wpmText.innerHTML=d.val}});const u=`${Math.floor(n/60)}:${n%60<10?0:""}${n%60}`.split("").slice(0,4);var p=0;var h;if(i.gsap.to(this.refs.rollingTimer.children,{duration:.3,delay:.9,y:40,stagger:{each:.1,onComplete:function(e){this.targets()[0].innerText=u[p++],i.gsap.fromTo(this.targets()[0],{y:-40},{y:0,duration:.3})}}}),h=100==t&&100==s?1:s<t?s/t*.5:.5+(s-t)/(100-t)*.5,i.gsap.to(this.refs.accuracyBar,{duration:1,delay:o,ease:"none",strokeDashoffset:100*(1-h)+"%"}),s>=t){const e=.5/h*1;i.gsap.to(this.refs.accuracyBar,{duration:1/8,delay:o+e,stroke:"#ffc22a"})}const f=Math.min(2*e,this.props.attempt.wpm),m=f/(2*e);if(i.gsap.to(this.refs.speedBar,{duration:1,delay:l,ease:"none",strokeDashoffset:100*(1-m)+"%"}),f>e){const t=e/f*1,a=(f-e)/(2*e);i.gsap.to(this.refs.aboveSpeedDashes,{delay:l+t,duration:1-t,ease:"none",strokeDashoffset:84*-a+"%"}),i.gsap.to(this.refs.aboveSpeedLine,{delay:l+t,duration:1-t,ease:"none",rotation:360*a,transformOrigin:"-60.54px 0"}),i.gsap.to(this.refs.aboveSpeedBar,{delay:l+t,duration:1-t,ease:"none",strokeDashoffset:84*(1-a)+"%"})}i.gsap.fromTo([this.refs.accuracyLabel,this.refs.speedLabel,this.refs.durationLabel],{scale:0,rotationZ:-15},{delay:o,duration:.5,rotationZ:0,scale:1}),this.props.onExplain(this.explanation)}componentWillUnmount(){i.gsap.globalTimeline.clear()}explain_results(){const{attempt:e}=this.props,t=approuter.team.settings.min_stars||1;var a;if((approuter.lesson||{}).is_test)a=(0,n.t)("Thank you for taking the test."),e.is_failed&&(a=(0,n.t)("You did not pass the test.")+(e.no_redo?"":" "+(0,n.t)("Try again")+"."));else{const r=[(0,n.t)("Nice job"),(0,n.t)("Excellent work"),(0,n.t)("Good job"),(0,n.t)("Good work"),(0,n.t)("Well done")];var s=r[Math.floor(Math.random()*r.length)];let i="";t>1&&e.stars<t&&e.score&&(i=" "+(0,n.t)("To move on, you need to get {{min_stars}} stars.",{min_stars:t}));a=((e,t)=>5==e.stars?s+"! "+(0,n.t)("Time to move on to the next lesson."):e.accuracy<t.min_accuracy?(0,n.t)("This lesson has a minimum accuracy of {{min_acc}}%. Try to get 100% accuracy on the next try. You'll build speed later.",{min_acc:t.min_accuracy}):e.wpm>=t.goal_wpm?e.accuracy<100?(0,n.t)("{{good_work}} on your speed!",{good_work:s})+"<br/>"+(0,n.t)("Now focus on getting 100% accuracy."):(0,n.t)("{{good_work}} on your speed and accuracy!",{good_work:s})+" "+(e.real_accuracy<100?(0,n.t)("For a perfect score you also need 100% real accuracy."):(0,n.t)("Time to move on to the next lesson.")):e.wpm<t.min_wpm?(e.accuracy>95?(0,n.t)("{{good_work}} on your accuracy",{good_work:s}):(0,n.t)("Your accuracy is good"))+" "+(0,n.t)("but you need to work on your speed.")+" "+(0,n.t)("To pass this lesson, you need to type {{x}}WPM faster.",{x:t.min_wpm-e.wpm}):e.accuracy<100?(0,n.t)("Focus on accuracy first, then build speed. You don't want to make any mistakes."):e.real_accuracy<80?(0,n.t)("{{good_work}} on your speed and accuracy!",{good_work:s})+" "+(0,n.t)("You can improve your real accuracy by not making mistakes in the first place."):(0,n.t)("Great work on accuracy. Now it's time to build up your speed.")+" "+(0,n.t)("Type {{x}}WPM faster to earn more stars.",{x:t.goal_wpm-e.wpm}))(e,e.requirements)+i}return a}render(){const{with_ads:e}=this.props,{goal_wpm:t,min_accuracy:a,min_wpm:s}=this.props.attempt.requirements,{wpm:i,accuracy:o,real_accuracy:l,duration:c}=this.props.attempt;return r.default.createElement("div",{className:"performance-results",style:{position:"relative",width:770,margin:"0 -50px",display:"inline-block"}},r.default.createElement("div",{className:"st0 st7 st24",style:{position:"absolute",top:108,left:119,width:150,textAlign:"center"}},r.default.createElement("span",{ref:"accuracyText"},0),r.default.createElement("small",{style:{marginLeft:3}},"%")),r.default.createElement("div",{ref:"wpmText",className:"st0 st7 st17",style:{position:"absolute",top:108,left:522,width:100,textAlign:"center"}},0),r.default.createElement("div",{className:"st9 st1 st10",style:{position:"absolute",top:146,left:687}},r.default.createElement("span",{style:{margin:"0 2px"}},t),r.default.createElement("span",{style:{whiteSpace:"nowrap",fontSize:"65%",margin:"0 2px"}},(0,n.t)("wpm"))),r.default.createElement("div",{className:"st9 st1 st10 st12",style:{position:"absolute",top:165,left:687}},(0,n.t)("Requirement:")," ",s," ",(0,n.t)("wpm")),r.default.createElement("div",{className:"st9 st1 st10",style:{position:"absolute",top:146,left:37,width:50,textAlign:"right"}},a,r.default.createElement("small",{style:{marginLeft:1}},"%")),r.default.createElement("div",{ref:"rollingTimer",className:"st0 st7 st8",style:{position:"absolute",direction:"ltr",top:119,left:356,width:60,lineHeight:".95em",height:".9em",fontSize:34,overflow:"hidden"}},r.default.createElement("span",null,"0"),r.default.createElement("span",null,":"),r.default.createElement("span",null,"0"),r.default.createElement("span",null,"0")),r.default.createElement("div",null,r.default.createElement("div",{ref:"accuracyLabel",className:"performance-label",style:{top:e?260:30,left:73}},(0,n.t)("accuracy")),r.default.createElement("div",{ref:"durationLabel",className:"performance-label",style:{top:e?206:30,left:266}},(0,n.t)("duration")),r.default.createElement("div",{ref:"speedLabel",className:"performance-label",style:{top:e?260:30,left:456}},(0,n.t)("speed"))),r.default.createElement("div",{tabIndex:3,style:{color:"transparent",height:240,margin:"30px 90px -270px"}},"your accuracy was "+o+"%, with real accuracy of "+l+"% and speed of "+i+" wpm in "+c+" seconds."),r.default.createElement("div",{tabIndex:4,style:{color:"transparent",height:320,marginBottom:-320}},"Requirements for this lesson are: accuracy of "+a+" percent, min speed of "+s+" wpm and goal speed of"+t+" wpm"),r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 681 268",style:{height:300,direction:"ltr"}},r.default.createElement("g",{transform:"translate(-826.329 -818.271)"},r.default.createElement("g",{transform:"translate(-0.081 16)"},r.default.createElement("circle",{className:"st4",cx:"1167.8",cy:"924.9",r:"46.6"}),r.default.createElement("circle",{className:"st5",cx:"1167.8",cy:"924.9",r:"40"}),r.default.createElement("circle",{className:"st6",cx:"1167.8",cy:"924.9",r:"53.2"})),r.default.createElement("text",{transform:"matrix(1 0 0 1 901 972)",className:"st9 st1 st12",textAnchor:"end"},(0,n.t)("minimum accuracy")),r.default.createElement("g",{transform:"translate(-2 16)"},r.default.createElement("text",{transform:"matrix(1 0 0 1 1170 942)",className:"st9 st1 st12",textAnchor:"middle"},(0,n.t)("min")," : ",(0,n.t)("seconds")))),r.default.createElement("circle",{id:"Ellipse_118_12_",className:"st13",cx:"511.3",cy:"146.5",r:"69.7"}),r.default.createElement("circle",{id:"Ellipse_118_1_",className:"st16",cx:"511.3",cy:"146.5",r:"69.7"}),r.default.createElement("text",{transform:"matrix(1 0 0 1 510 178)",className:"st18 st7 st19",textAnchor:"middle"},(0,n.t)("wpm")),r.default.createElement("line",{id:"Line_128_6_",className:"st20",x1:"572",y1:"146.1",x2:"599.1",y2:"146.1"}),r.default.createElement("line",{id:"Line_128_1_",className:"st21",x1:"423.5",y1:"146.1",x2:"450.6",y2:"146.1"}),r.default.createElement("circle",{className:"st13",cx:"170",cy:"147",r:"69.7"}),r.default.createElement("path",{className:"st22",d:"M239.7,146.2v0.8c0,38.5-31.2,69.7-69.7,69.7s-69.7-32-69.7-70.5"}),r.default.createElement("line",{className:"st28",x1:"230.6",y1:"146.3",x2:"257.5",y2:"146.3"}),r.default.createElement("line",{className:"st28",x1:"82.5",y1:"146.3",x2:"109.3",y2:"146.3"}),r.default.createElement("text",{transform:"matrix(1.2 0 0 1.2 170 177)",className:"st0 st7 st29",textAnchor:"middle"},(0,n.t)("real accuracy")),r.default.createElement("text",{transform:"matrix(1.4 0 0 1.4 168.3583 196)",className:"st0 st7 st30",textAnchor:"middle"},l,"%"),r.default.createElement("circle",{className:"l",ref:"accuracyBar",cx:"170.21",cy:"147",r:"83",style:{stroke:"#0eb168",strokeDasharray:"100%",strokeDashoffset:"100%"}}),r.default.createElement("circle",{className:"l",ref:"speedBar",cx:"511.21",cy:"147",r:"83",transform:"rotate(180,511,147)",style:{strokeDasharray:"100%",strokeDashoffset:"100%"}}),r.default.createElement("circle",{className:"j",cx:"511.46",cy:"146.5",r:"69.6",transform:"rotate(180,511,147)",style:{strokeDasharray:"84%",strokeDashoffset:84*(1-s/(2*t))+"%"}}),r.default.createElement("circle",{className:"i",ref:"aboveSpeedBar",cx:"511.46",cy:"146.5",r:"69.6",style:{strokeDasharray:"84%",strokeDashoffset:"84%"}}),r.default.createElement("path",{className:"st13",ref:"aboveSpeedDashes",style:{strokeDasharray:"84%",strokeDashoffset:"0%"},d:"M581,146.5c0,38.5-31.2,69.7-69.7,69.7s-69.7-31.2-69.7-69.7"}),r.default.createElement("line",{className:"o",ref:"aboveSpeedLine",x1:"572",y1:"146.28",x2:"599",y2:"146.28"})))}}t.default=o},26314:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(a(67294)),r=i(a(69606));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends s.default.Component{constructor(){super(...arguments),n(this,"state",{})}componentDidMount(){var e=(0,r.default)(this.refs.card);e.css({opacity:0,top:200,marginLeft:-1*this.props.width/2,width:this.props.width,transform:"scale(.8)"}),setTimeout((()=>e.css({opacity:1,transform:"scale(1)"})))}render(){return s.default.createElement("div",{className:"ed-card",ref:"card"},this.props.children)}}t.default=o},42644:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(67294))&&s.__esModule?s:{default:s};function i(e,t,a){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class n extends r.default.Component{constructor(){super(...arguments),i(this,"close",(()=>{this.props.close_outside&&approuter.hide_modal(this.props.id)}))}componentDidMount(){setTimeout((()=>this.modal_div&&this.modal_div.focus()),10)}render(){const e=Object.assign({},this.props.style,{width:this.props.width,padding:null==this.props.padding?30:this.props.padding});return this.props.height&&(e.height=this.props.height),r.default.createElement("div",{onClick:this.close,className:"edmodal"+(this.props.scrollable?" scrollable":"")},r.default.createElement("div",{ref:e=>{this.modal_div=e},role:"dialog",tabIndex:"0","aria-label":"dialog",style:e,onClick:e=>e.stopPropagation(),className:`edmodal-box ${this.props.className||""}`},1==this.props.show_x?r.default.createElement("div",{onClick:this.close.bind(this),className:"edmodal-x"},""):"",this.props.children))}}n.defaultProps={show_x:!0,close_outside:!0,esc_close:!0};t.default=n},19851:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,r=(s=a(69606))&&s.__esModule?s:{default:s},i=a(66358);t.default=class{constructor(e){this.styles={glowing:{className:"active-key-pointer",width:40,top_offset:0,left_offset:0},monkey_enter:{image:"monkey",width:150,top_offset:68,left_offset:74},monkey_halo2:{image:"monk&circ",width:114,top_offset:68,left_offset:55},monkey_spacebar2:{image:"monk&circ-space",width:401,top_offset:89,left_offset:204}},this.default_style=e||"monkey_halo2",this.last_target=null,this.last_target_bounds=null,this.tm=null,this.graphic_image=null}attach(e){var t;return this.styles[this.default_style].className?(t=(0,r.default)("<span/>")).attr("class",this.styles[this.default_style].className):((t=(0,r.default)("<img/>")).hide(),t.css({position:"absolute"})),(0,r.default)(e).append(t),this.element=t,new Promise((function(e){e(t)}))}hide(){this.element.hide()}focus(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.tm&&(this.tm.seek(0).kill(),this.tm=null),!e)return void this.hide();a||(a=this.default_style),this.active_style=a,this.active_target=e,this.active_svg=t;const s=this.styles[a],n=this.element;if(s.image&&s.image!=this.graphic_image){this.graphic_image=s.image;const e=`https://static.typingclub.com/m//engine/img/keyboard-highlight/${s.image}.svg`;this.element.attr("src",e),this.element.css({opacity:0})}var o;if(this.graphic_image=s.image,function(e){e.css("z-index",5)}(n),n.show(),e==this.last_target)o=this.last_target_bounds;else{(0,r.default)(e).removeClass("correct"),this.last_target=e;const t=e.ownerSVGElement,a=t.viewBox.baseVal.width,s=t.parentElement.offsetWidth/a,i=e.getBBox();o=this.last_target_bounds={x:i.x*s,y:i.y*s,width:i.width*s}}setTimeout((()=>{n.css({opacity:1,marginTop:-s.top_offset,marginLeft:-s.left_offset,width:s.width,top:o.y,left:o.x+o.width/2}),s.image&&(this.tm=i.gsap.to(n,{duration:.1,y:-2,scale:1.06,yoyo:!0,repeat:1}))}),100)}}},64967:(e,t,a)=>{"use strict";a.r(t)},30844:(e,t,a)=>{var s={"./es":55655};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id=30844},25893:()=>{},18102:e=>{"use strict";e.exports=JSON.parse('{"currencies":[{"symbol":"AU$","name":"Australian Dollar","code":"AUD"},{"symbol":"","name":"British Pound Sterling","code":"GBP"},{"symbol":"","name":"Bulgarian Lev","code":"BGN"},{"symbol":"CA$","name":"Canadian Dollar","code":"CAD"},{"symbol":"","name":"Yuan","code":"CNY"},{"symbol":"K","name":"Czech Koruna","code":"CZK"},{"symbol":"","name":"Euro","code":"EUR"},{"symbol":"Ft","name":"Hungarian Forint","code":"HUF"},{"symbol":"","name":"Israeli New Shekel","code":"ILS"},{"symbol":"","name":"Iranian Rial","code":"IRR"},{"symbol":"kr","name":"Icelandic Krna","code":"ISK"},{"symbol":"","name":"Japanese Yen","code":"JPY"},{"symbol":"Mex$","name":"Mexican Peso","code":"MXN"},{"symbol":"z","name":"Polish Zoty","code":"PLN"},{"symbol":"L","name":"Romanian Leu","code":"RON"},{"symbol":"","name":"Russian Ruble","code":"RUB"},{"symbol":".","name":"Saudi Riyal","code":"SAR"},{"symbol":"kr","name":"Swedish Kronal","code":"SEK"},{"symbol":"","name":"Thai Baht","code":"THB"},{"symbol":"","name":"Turkish Lira","code":"TRT"},{"symbol":"$","name":"US Dollar","code":"USD"}],"countries":{"419":["MXN","LATAM","LATAM"],"AU":["AUD","Australia","Australia"],"BG":["BGN","","Bulgaria"],"BR":["BRL","Brasil","Brazil"],"CA":["CAD","Canada","Canada"],"CN":["CNY","","China"],"CH":["EUR","Schweiz","Switzerland"],"CZ":["CZK","esko","Czechia"],"DE":["EUR","Deutschland","Germany"],"ES":["EUR","Espaa","Spain"],"FI":["EUR","Suopma","Finland"],"FR":["EUR","France","France"],"GB":["GBP","Great Britain","Great Britain"],"GR":["EUR","","Greece"],"HU":["HUF","Magyarorszg","Hungary"],"IL":["ILS","","Israel"],"IR":["IRR","","Iran"],"IS":["ISK","sland","Iceland"],"IT":["EUR","Italia","Italy"],"JP":["JPY","","Japan"],"MX":["MXN","Mxico","Mexico"],"NL":["EUR","Nederland","Netherlands"],"PL":["PLN","Polska","Poland"],"PT":["EUR","Portugal","Portugal"],"RO":["RON","Romnia","Romania"],"RU":["RUB","","Russia"],"SA":["SAR","  ","Saudi Arabia"],"SE":["SEK","Sverige","Sweden"],"SI":["EUR","Slovenija","Slovenia"],"SK":["EUR","Slovensko","Slovakia"],"TH":["THB","","Thailand"],"TR":["TRT","Trkiye","Turkey"],"TW":["USD","","Taiwan"],"US":["USD","United States","United States"],"AZ":["USD","Azerbaijan","Azrbaycan"],"BY":["USD","","Belarus"],"IE":["USD","ire","Ireland"],"IN":["USD","India","Bhrat"],"FO":["USD","Froyar","Faroe Islands"],"AM":["USD","","Armenia"],"CK":["USD","Kki \'irani","Cook Islands"],"MK":["USD"," ","North Macedonia"],"MM":["USD","","Myanmar"],"NP":["USD","","Nepal"],"NO":["USD","Norge","Norway"],"AF":["USD","","Afghanistan"]},"languages":{"af":["Afrikaans","Afrikaans"],"bg":["","Bulgarian"],"ca":["Catal","Catalan"],"cs":["etina","Czech"],"cy":["Cymraeg","Welsh"],"da":["Dansk","Danish"],"de":["Deutsch","German"],"el":["","Greek"],"en":["English","English"],"es":["Espaol","Spanish"],"et":["Eesti keel","Estonian"],"eu":["Euskara","Basque"],"fi":["Suomi","Finnish"],"fr":["Franais","French"],"hr":["Hrvatski","Croatian"],"hu":["Magyar","Hungarian"],"id":["Bahasa Indonesia","Indonesian"],"is":["slenska","Icelandic"],"it":["Italiano","Italian"],"la":["Latina","Latin"],"lt":["Lietuvi kalba","Lithuanian"],"lv":["Latvieu","Latvian"],"mn":["","Mongolian"],"nb":["Norsk bokml","Norwegian (Bokml)"],"nl":["Nederlands","Dutch"],"nn":["Norsk nynorsk","Norwegian (Nynorsk)"],"pl":["Polski","Polish"],"pt":["Portugus","Portuguese"],"ro":["Romn","Romanian"],"ru":["","Russian"],"se":["Davvismegiella","Northern Sami"],"sk":["Slovenina","Slovak"],"sl":["Slovenina","Slovenian"],"sr":[" / Srpski","Serbian"],"sv":["Svenska","Swedish"],"tr":["Trke","Turkish"],"uk":["","Ukrainian"],"vi":["Ting Vit","Vietnamese"],"ar":["","Arabic"],"fa":["","Persian"],"he":["","Hebrew"],"ja":["","Japanese"],"km":["","Khmer"],"th":["","Thai"],"hi":["","Hindi"],"ko":["","Korean"],"zh":["","Chinese"],"az":["Azerbaijani","Azrbaycan dili"],"be":[" ","Belarusian"],"ga":["Gaoidhealg","Irish"],"gu":["","Gujarati"],"fo":["froyskt","Faroese"],"haw":["lelo Hawaii","Hawaiian"],"hy":["","Armenian"],"iu":["","Inuktitut"],"mi":["Te Reo Mori","Mori"],"mk":[" ","Macedonian"],"my":["","Burmese"],"ne":[" ","Nepali"],"no":["Norsk","Norwegian"],"ps":["","Pushto"],"chr":[" ","Cherokee"]},"primaryDialects":{"af":"af_ZA","ar":"ar_SA","bg":"bg_BG","ca":"ca_AD","cs":"cs_CZ","cy":"cy_GB","da":"da_DK","de":"de_DE","el":"el_GR","en":"en_US","es":"es_ES","et":"et_EE","eu":"eu","fa":"fa_IR","fi":"fi_FI","fr":"fr_FR","he":"he_IL","hi":"hi_IN","hr":"hr_HR","hu":"hu_HU","id":"id_ID","is":"is_IS","it":"it_IT","ja":"ja_JP","km":"km_KH","ko":"ko_KR","la":"la","lt":"lt_LT","lv":"lv_LV","mn":"mn_MN","nb":"nb_NO","nl":"nl_NL","nn":"nn_NO","pl":"pl_PL","pt":"pt_PT","ro":"ro_RO","ru":"ru_RU","se":"se_FI","sk":"sk_SK","sl":"sl_SI","sr":"sr_RS","sv":"sv_SE","th":"th_TH","tr":"tr_TR","uk":"uk_UA","vi":"vi_VN","zh":"zh_CN","az":"az_AZ","be":"be_BY","ga":"ga_IE","gu":"gu_IN","fo":"fo_FO","haw":"haw_US","hy":"hy_AM","iu":"iu_CA","mi":"mi_CK","mk":"mk_MK","my":"my_MM","ne":"ne_NP","no":"no_NO","ps":"ps_AF","chr":"chr_US"},"rtlScriptDirection":["ar","he","fa","ps"],"startOfWeek":{"af":0,"bg":1,"ca":1,"cs":1,"cy":0,"da":1,"de":1,"el":1,"en-AU":1,"en-CA":0,"en-GB":1,"en-US":0,"es":1,"et":1,"eu":1,"fi":1,"fr":1,"fr-CA":0,"hr":1,"hu":1,"id":1,"is":1,"it":1,"lt":1,"lv":1,"mn":1,"nb":1,"nl":1,"nn":1,"pl":1,"pt":1,"pt-BR":0,"ro":1,"ru":1,"sk":1,"sl":1,"sr":1,"sv":1,"tr":1,"uk":1,"vi":1,"ar":6,"ar-SA":0,"fa-IR":6,"he":0,"ja":0,"km":0,"th":0,"hi":0,"ko":0,"zh-CN":1}}')},84542:e=>{"use strict";e.exports=JSON.parse('{"sentryDSN":"https://395fecf8768243eead8a6a93295f3b11@sentry.io/50133","sentryDSN_NOADS":"https://a069cd499c504c3084b7c8853b98e752@sentry.io/1275414","sentryDSN_teacher":"https://489f01b2ff4e4c1ab69e319802dcfd89@sentry.io/1763178"}')},33563:e=>{"use strict";e.exports=JSON.parse('{"staticURL":"m","localization":{"defaultLocale":"en_US","spaceLocales":["en_US","en_GB","es_ES","es_419","ar_SA","bg_BG","de_DE","nl_NL","fa_IR","fr_FR","fr_CA","he_IL","hu_HU","it_IT","ja_JP","ko_KR","pl_PL","pt_BR","pt_PT","ru_RU","sk_SK","sv_SE","zh_CN"],"contentLocales":["ar","bg","zh","en","en_GB","es","es_419","fa","fr","fr_CA","de","de_CH","he","hu","it","ja","pl","pt","pt_BR","ru","nl","sk","sv","ko_KR"],"namespaces":["common","badge","website","options"],"userLocaleKeys":["account.locale","locale"]}}')},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"uix","version":"1.1.1-1187","description":"TypingClub Frontend Build","repository":"https://github.com/EdClub/tpclub/tree/master/uix","applications":["student","student_tp","student_authoring","student_cordova","teacher","adminportal","playback","auth_class_import","auth","website:website/website","school_entry:website/school_entry","approuter_simple","editor_simple"],"scripts":{"clean":"make clean","build-svg":"make build-svg","watch":"npm run build-svg && node ./scripts/builder/index.js --mode=development --watch","build:dev":"npm run build-svg && node ./scripts/builder/index.js --mode=development","build:staging":"npm run crowdin && npm run build-svg && node ./scripts/builder/index.js --mode=production --staging","build:prod":"npm run build-svg && node ./scripts/builder/index.js --mode=production","build:deploy":"npm version prerelease && npm run build:prod","test":"jest","test:clear-cache":"jest --clearCache","test:verbose":"jest --verbose","test:coverage":"jest --coverage","test:watch":"jest --watch","test:website":"jest --testPathPattern=js/website","test:watch:website":"jest --watch --testPathPattern=js/website","lint:teacher":"eslint \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","lint:teacher:fail-on-error":"eslint --max-warnings 0 \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","lint:teacher:fix":"eslint --fix \'./js/teacher/**/*.{js,jsx,ts,tsx}\'","commit-checks:teacher":"npm-run-all lint:teacher:fail-on-error --parallel translate:teacher test","postinstall":"touch ./node_modules/.metadata_never_index","crowdin":"npm -prefix ./scripts/crowdin-client install && node ./scripts/crowdin-client/build/index.js ./scripts/crowdin.config.json","tscan":"node ./scripts/t-scanner/build/scan.js ./uix/scripts/tscanner.config.json"},"author":"","license":"ISC","devDependencies":{"@babel/cli":"7.23.9","@babel/core":"7.24.0","@babel/plugin-proposal-class-properties":"7.10.1","@babel/plugin-proposal-decorators":"7.10.1","@babel/plugin-proposal-export-default-from":"7.10.1","@babel/plugin-proposal-export-namespace-from":"7.10.1","@babel/plugin-syntax-dynamic-import":"7.8.3","@babel/plugin-syntax-export-default-from":"7.10.1","@babel/plugin-syntax-export-namespace-from":"7.8.3","@babel/plugin-transform-modules-commonjs":"7.10.1","@babel/plugin-transform-numeric-separator":"^7.23.4","@babel/plugin-transform-object-rest-spread":"^7.24.0","@babel/plugin-transform-optional-chaining":"^7.23.4","@babel/preset-env":"7.10.2","@babel/preset-react":"7.10.1","@babel/preset-stage-0":"7.8.3","@sentry/cli":"^1.58.0","@testing-library/jest-dom":"5.14.1","@testing-library/react":"11.0.4","@types/crypto-js":"^4.1.1","@types/dom-mediacapture-record":"1.0.9","@types/faker":"5.5.6","@types/highlightjs":"9.12.1","@types/jest":"26.0.23","@types/js-cookie":"2.2.6","@types/lodash":"4.14.170","@types/lodash.sortby":"^4.7.9","@types/react":"16.9.52","@types/react-dom":"16.9.8","@types/react-helmet":"^6.1.5","@types/react-highlight-words":"^0.16.6","@types/react-router-dom":"5.1.7","@types/react-window":"1.8.3","@types/video.js":"^7.3.46","@types/wavesurfer.js":"^6.0.3","@types/yup":"0.29.11","@typescript-eslint/eslint-plugin":"^5.48.0","@typescript-eslint/parser":"^5.48.0","acorn":"7.2.0","babel":"6.23.0","babel-eslint":"10.1.0","babel-jest":"26.5.2","babel-loader":"^8.2.2","babel-plugin-espower":"3.0.1","babel-plugin-jsx-remove-data-test-id":"2.1.3","babel-plugin-transform-react-remove-prop-types":"^0.4.24","babel-plugin-transform-remove-strict-mode":"0.0.2","babel-root-import":"4.1.8","browserify":"16.5.1","circular-dependency-plugin":"^5.2.2","clean-webpack-plugin":"^3.0.0","common":"file:./js/common","crowdin-client":"file:./scripts/crowdin-client","css-loader":"^5.1.2","envify":"4.1.0","eslint":"7.29.0","eslint-plugin-jsx-a11y":"6.4.1","eslint-plugin-prettier":"3.4.0","eslint-plugin-react":"7.24.0","eslint-plugin-react-hooks":"4.2.0","eslint-plugin-testing-library":"3.9.1","eslint-plugin-you-dont-need-lodash-underscore":"6.12.0","exorcist":"1.0.1","exports-loader":"0.7.0","expose-loader":"^2.0.0","file-replace-loader":"1.2.0","find-imports":"1.1.0","fork-ts-checker-webpack-plugin":"^7.2.14","html-webpack-plugin":"^5.3.1","identity-obj-proxy":"3.0.0","imports-loader":"0.8.0","jest":"26.5.3","mini-css-extract-plugin":"^1.3.9","node-sass":"6.0.1","normalize.css":"8.0.1","npm-run-all":"4.1.5","parse-svg-path":"0.1.2","pbf":"3.2.1","pbf-loader":"1.1.0","prop-types":"15.7.2","react-test-renderer":"16.13.1","sass-loader":"^11.0.1","script-loader":"0.7.2","svg-inline-loader":"^0.8.2","svg-sprite":"^1.3.7","t-scanner-webpack-plugin":"file:./scripts/t-scanner-webpack-plugin","terser-webpack-plugin":"^5.1.1","ts-jest":"26.4.1","ts-loader":"^9.4.2","ts-migrate":"^0.1.35","typescript":"^4.9.4","wavesurfer.js":"^6.2.0","webpack":"^5.24.4","webpack-cli":"^4.5.0","webpack-manifest-plugin":"^4.1.1","webpack-merge":"^5.7.3","webpack-strip-block":"^0.3.0","webpack-visualizer-plugin":"^0.1.11"},"dependencies":{"@babel/polyfill":"7.8.7","@babel/runtime":"^7.13.10","@emotion/react":"^11.1.5","@popperjs/core":"^2.9.2","@reach/rect":"0.15.2","@reach/skip-nav":"0.15.2","@reach/visually-hidden":"0.15.2","@sentry/browser":"5.27.0","@vimeo/player":"github:EdClub/player.js","ajv":"6.12.6","aws-sdk":"^2.1210.0","bootstrap":"^5.2.3","classnames":"^2.3.1","clsx":"^1.1.1","copy-webpack-plugin":"^9.0.1","core-js":"3.25.1","createjs":"1.0.1","crypto-js":"^4.1.1","dagre":"^0.8.5","dashjs":"^4.4.1","date-fns":"2.15.0","downloadjs":"1.4.7","downshift":"5.4.7","draft-js":"^0.11.7","draft-js-plugins-editor":"^3.0.0","draft-js-static-toolbar-plugin":"^3.0.1","easing":"1.2.1","faker":"4.1.0","formik":"2.2.9","framer-motion":"4.1.17","fuse.js":"3.6.1","gridlex":"^2.7.1","gsap":"^3.6.1","hangul-js":"^0.2.6","highcharts":"^6.2.0","highcharts-more":"0.1.7","highcharts-react-official":"2.2.2","highlightjs":"9.16.2","immer":"^8.0.1","immutable":"3.8.2","interactjs":"^1.10.3","jquery":"2.2.3","jquery.transit":"0.9.12","js-cookie":"2.2.1","jstimezonedetect":"1.0.7","lity":"^2.4.1","lodash":"4.17.15","lodash.sortby":"^4.7.0","lottie-web":"5.6.6","mediainfo.js":"^0.1.8","moment":"2.24.0","moment-timezone":"0.5.28","named-urls":"2.0.0","path-to-regexp":"3.2.0","pdfmake":"^0.2.4","phaser":"2.6.2","popper.js":"1.16.1","react":"16.13.1","react-bootstrap":"0.33.1","react-dom":"16.13.1","react-error-boundary":"2.3.0","react-focus-lock":"2.5.1","react-ga":"2.7.0","react-helmet":"^6.1.0","react-highlight-words":"^0.20.0","react-hook-form":"^7.1.1","react-hotkeys":"2.0.0","react-intersection-observer":"^8.32.0","react-popper":"^2.2.5","react-query":"^3.18.1","react-router-dom":"5.2.0","react-sortable-hoc":"1.11.0","react-stripe-checkout":"2.6.3","react-transition-group":"4.3.0","react-window":"1.8.5","sbd":"^1.0.18","scrollmagic":"2.0.7","ssml-check-core":"^0.3.4","stream-browserify":"^3.0.0","swagger-client":"3.10.5","terser-webpack-plugin":"^5.1.2","url-search-params":"1.1.0","use-deep-compare-effect":"^1.6.1","use-immer":"^0.4.2","use-onclickoutside":"0.4.0","valtio":"1.0.6","video.js":"^7.20.2","videojs-contrib-dash":"^5.1.1","videojs-contrib-quality-levels":"^2.1.0","videojs-http-source-selector":"^1.1.6","webfontloader":"1.6.28","webpack-merge":"^5.7.3","yup":"0.32.9"}}')}},e=>{e.O(0,[839],(()=>{[736,486,742,930,900,602,426,903].map(e.E)}),5);e.O(0,[736],(()=>{return t=41947,e(e.s=t);var t}));var t=e.O();student_tp=t}]);
//# sourceMappingURL=student_tp.1187.min.js.map